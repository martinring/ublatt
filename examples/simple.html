<!DOCTYPE html><html lang="en">
<head >
<meta name="generator" content="ublatt"/><meta charset="utf-8"/><title >
1. Übungsblatt - ublatt
</title><script type="module">
var Nl=Object.assign(function(s,e,...t){let i=document.createElement(s);return Object.entries(e).forEach(([n,r])=>{switch(n){case"attributes":Object.entries(r).forEach(([o,l])=>i.setAttribute(o,`${l}`));break;case"data":Object.entries(r).forEach(([o,l])=>i.dataset[o]=`${l}`);break;case"class":Array.isArray(r)?i.classList.add(...r):i.classList.add(r);break;case"events":Object.entries(r).forEach(([o,l])=>i.addEventListener(o,l));break;default:i[n]=r}}),i.append(...t),i},{fragment(...s){let e=document.createDocumentFragment();return e.append(...s),e},empty:()=>document.createDocumentFragment(),fromString(s){let e=document.createElement("div");e.innerHTML=s;let t=document.createDocumentFragment();return t.append(...Array.from(e.childNodes)),t},when(s,e){if(s){let t=e();return typeof t=="string"?document.createTextNode(t):t}else return document.createDocumentFragment()}});function $t(s){return s(Nl)}function cs(s,e=[]){return $t(t=>{let i=[],n=t("tbody",{});function r(h,a){let f=t("td",{},(h+1).toString()),c=t("span",{class:"field",contentEditable:"true"},a.name),u=t("span",{class:"field",contentEditable:"true"},a.matriculation_number),d=t("span",{class:"field",contentEditable:"true"},a.email),p=t("tr",{},f,t("td",{},c),t("td",{},u),t("td",{},d));n.appendChild(p),i.push({setIndex(m){f.textContent=(m+1).toString()},get(){return{name:c.textContent||"",matriculation_number:u.textContent||"",email:d.textContent||""}},validate(){return(c.textContent||"").trim().length>0&&(u.textContent||"").trim().length>0&&(d.textContent||"").trim().length>0},remove(){p.remove()}})}function o(){i.splice(-1)[0].remove()}let l=t.fragment(t("table",{class:"authors"},t("thead",{},t("tr",{},t("th",{},"#"),t("th",{},"Name"),t("th",{},"Matrikelnummer"),t("th",{},"Email"))),n),t("p",{class:"center"},t("a",{class:"icon",events:{click:()=>r(i.length,{name:"",matriculation_number:"",email:""})}},t("i",{},"➕")),t("a",{class:"icon",events:{click:()=>o()}},t("i",{},"➖"))));return s.replaceWith(l),{get:()=>i.map(h=>h.get()),set:h=>{i.splice(0,i.length),h.forEach((a,f)=>r(f,a))},validate:()=>i.length>0&&i.every(h=>h.validate())}})}var ji="ͼ",us=typeof Symbol=="undefined"?"__"+ji:Symbol.for(ji),zi=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ds=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{},Oe=class{constructor(e,t){this.rules=[];let{process:i,extend:n}=t||{};function r(l){if(/^@/.test(l))return[l];let h=l.split(",");return i?h.map(i):h}function o(l,h,a){let f=[],c=/^@(\w+)\b/.exec(l[0]);if(c&&h==null)return a.push(l[0]+";");for(let u in h){let d=h[u];if(/&/.test(u))o(l.map(p=>n?n(u,p):u.replace(/&/,p)),d,a);else if(d&&typeof d=="object"){if(!c)throw new RangeError("The value of a property ("+u+") should be a primitive value.");o(c[1]=="keyframes"?[u]:r(u),d,f)}else d!=null&&f.push(u.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+d+";")}(f.length||c&&c[1]=="keyframes")&&a.push(l.join(",")+" {"+f.join(" ")+"}")}for(let l in e)o(r(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ds[us]||1;return ds[us]=e+1,ji+e.toString(36)}static mount(e,t){(e[zi]||new ps(e)).mount(Array.isArray(t)?t:[t])}},ii=null,ps=class{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet!="undefined"){if(ii)return e.adoptedStyleSheets=[ii.sheet].concat(e.adoptedStyleSheets),e[zi]=ii;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),ii=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[zi]=this}mount(e){let t=this.sheet,i=0,n=0;for(let r=0;r<e.length;r++){let o=e[r],l=this.modules.indexOf(o);if(l<n&&l>-1&&(this.modules.splice(l,1),n--,l=-1),l==-1){if(this.modules.splice(n++,0,o),t)for(let h=0;h<o.rules.length;h++)t.insertRule(o.rules[h],i++)}else{for(;n<l;)i+=this.modules[n++].rules.length;i+=o.rules.length,n++}}if(!t){let r="";for(let o=0;o<this.modules.length;o++)r+=this.modules[o].getRules()+`
`;this.styleTag.textContent=r}}};var ni=1024,Ql=0,gs=new WeakMap,$=class{constructor({deserialize:e}={}){this.id=Ql++,this.deserialize=e||(()=>{throw new Error("This node type doesn't define a deserialize function")})}static string(){return new $({deserialize:e=>e})}static number(){return new $({deserialize:Number})}static flag(){return new $({deserialize:()=>!0})}set(e,t){return e[this.id]=t,e}add(e){return typeof e!="function"&&(e=G.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}};$.closedBy=new $({deserialize:s=>s.split(" ")});$.openedBy=new $({deserialize:s=>s.split(" ")});$.group=new $({deserialize:s=>s.split(" ")});var Xl=Object.create(null),G=class{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):Xl,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new G(e.name||"",t,e.id,i);if(e.props)for(let r of e.props)Array.isArray(r)||(r=r(n)),r&&r[0].set(t,r[1]);return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop($.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop($.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?i.name:n[r]];if(o)return o}}}};G.none=new G("",Object.create(null),0,8);var ut=class{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);o&&(n||(n=Object.assign({},i.props)),o[0].set(n,o[1]))}t.push(n?new G(i.name,n,i.id,i.flags):i)}return new ut(t)}},j=class{constructor(e,t,i,n){this.type=e,this.children=t,this.positions=i,this.length=n}toString(){let e=this.children.map(t=>t.toString()).join();return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(e,t=0){let i=e!=null&&gs.get(this)||this.topNode,n=new pt(i);return e!=null&&(n.moveTo(e,t),gs.set(this,n._tree)),n}fullCursor(){return new pt(this.topNode,!0)}get topNode(){return new dt(this,0,0,null)}resolve(e,t=0){return this.cursor(e,t).node}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e;for(let o=this.cursor();;){let l=!1;if(o.from<=r&&o.to>=n&&(o.type.isAnonymous||t(o.type,o.from,o.to)!==!1)){if(o.firstChild())continue;o.type.isAnonymous||(l=!0)}for(;l&&i&&i(o.type,o.from,o.to),l=o.type.isAnonymous,!o.nextSibling();){if(!o.parent())return;l=!0}}}balance(e=ni){return this.children.length<=Fi?this:Wi(this.type,G.none,this.children,this.positions,0,this.children.length,0,e,this.length)}static build(e){return Vl(e)}};j.empty=new j(G.none,[],[],0);var Ze=class{constructor(e,t,i,n=G.none){this.buffer=e,this.length=t,this.set=i,this.type=n}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,n){let{buffer:r}=this,o=-1;for(let l=e;l!=t;l=r[l+3])if(n!=-1e8){let h=r[l+1],a=r[l+2];if(i>0){if(a>n&&(o=l),a>n)break}else if(h<n&&(o=l),a>=n)break}else if(o=l,i>0)break;return o}},dt=class{constructor(e,t,i,n){this.node=e,this.from=t,this.index=i,this._parent=n}get type(){return this.node.type}get name(){return this.node.type.name}get to(){return this.from+this.node.length}nextChild(e,t,i,n=!1){for(let r=this;;){for(let{children:o,positions:l}=r.node,h=t>0?o.length:-1;e!=h;e+=t){let a=o[e],f=l[e]+r.from;if(!(i!=-1e8&&(t<0?f>=i:f+a.length<=i))){if(a instanceof Ze){let c=a.findChild(0,a.buffer.length,t,i==-1e8?-1e8:i-f);if(c>-1)return new We(new ms(r,a,e,f),null,c)}else if(n||!a.type.isAnonymous||qi(a)){let c=new dt(a,f,e,r);return n||!c.type.isAnonymous?c:c.nextChild(t<0?a.children.length-1:0,t,i)}}}if(n||!r.type.isAnonymous||(e=r.index+t,r=r._parent,!r))return null}}get firstChild(){return this.nextChild(0,1,-1e8)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,-1e8)}childAfter(e){return this.nextChild(0,1,e)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent?this._parent.nextChild(this.index+1,1,-1):null}get prevSibling(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null}get cursor(){return new pt(this)}resolve(e,t=0){return this.cursor.moveTo(e,t).node}getChild(e,t=null,i=null){let n=si(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return si(this,e,t,i)}toString(){return this.node.toString()}};function si(s,e,t,i){let n=s.cursor,r=[];if(!n.firstChild())return r;if(t!=null){for(;!n.type.is(t);)if(!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}var ms=class{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}},We=class{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t){let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t==-1e8?-1e8:t-this.context.start);return n<0?null:new We(this.context,this,n)}get firstChild(){return this.child(1,-1e8)}get lastChild(){return this.child(-1,-1e8)}childAfter(e){return this.child(1,e)}childBefore(e){return this.child(-1,e)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,-1)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new We(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new We(this.context,this._parent,e.findChild(t,this.index,-1,-1e8))}get cursor(){return new pt(this)}resolve(e,t=0){return this.cursor.moveTo(e,t).node}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=si(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return si(this,e,t,i)}},pt=class{constructor(e,t=!1){if(this.full=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof dt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof dt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enter(e,t){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,t,this.full));let{buffer:i}=this.buffer,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t==-1e8?-1e8:t-this.buffer.start);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enter(1,-1e8)}lastChild(){return this.enter(-1,-1e8)}childAfter(e){return this.enter(1,e)}childBefore(e){return this.enter(-1,e)}parent(){if(!this.buffer)return this.yieldNode(this.full?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.full?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree._parent.nextChild(this._tree.index+e,e,-1e8,this.full)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,-1e8))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,-1e8,this.full)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)for(let r=t+e,o=e<0?-1:i.node.children.length;r!=o;r+=e){let l=i.node.children[r];if(this.full||!l.type.isAnonymous||l instanceof Ze||qi(l))return!1}return!0}move(e){if(this.enter(e,-1e8))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){return this.move(1)}prev(){return this.move(-1)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;!(t<0?!this.childBefore(e):!this.childAfter(e));)if(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e)){this.parent();break}return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=r+1;break e}n=this.stack[--r]}}for(let n=i;n<this.stack.length;n++)t=new We(this.buffer,t,this.stack[n]);return this.bufferNode=new We(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree.node}};function qi(s){return s.children.some(e=>!e.type.isAnonymous||e instanceof Ze||qi(e))}var ri=class{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ri(this.buffer,this.index)}},Fi=8;function Vl(s){var e;let{buffer:t,nodeSet:i,topID:n=0,maxBufferLength:r=ni,reused:o=[],minRepeatType:l=i.types.length}=s,h=Array.isArray(t)?new ri(t,t.length):t,a=i.types;function f(y,k,x,B,T){let{id:X,start:D,end:V,size:N}=h;for(;X==T;)h.next(),{id:X,start:D,end:V,size:N}=h;let _=D-y;if(N<0){x.push(o[X]),B.push(_),h.next();return}let Q=a[X],F,q;if(V-D<=r&&(q=c(h.pos-k,T))){let I=new Uint16Array(q.size-q.skip),W=h.pos-q.size,me=I.length;for(;h.pos>W;)me=u(q.start,I,me,T);F=new Ze(I,V-q.start,i,T<0?G.none:a[T]),_=q.start-y}else{let I=h.pos-N;h.next();let W=[],me=[],Le=X>=l?X:-1;for(;h.pos>I;)f(D,I,W,me,Le);W.reverse(),me.reverse(),Le>-1&&W.length>Fi?F=Wi(Q,Q,W,me,0,W.length,0,r,V-D):F=new j(Q,W,me,V-D)}x.push(F),B.push(_)}function c(y,k){let x=h.fork(),B=0,T=0,X=0,D=x.end-r,V={size:0,start:0,skip:0};e:for(let N=x.pos-y;x.pos>N;){if(x.id==k){V.size=B,V.start=T,V.skip=X,X+=4,B+=4,x.next();continue}let _=x.size,Q=x.pos-_;if(_<0||Q<N||x.start<D)break;let F=x.id>=l?4:0,q=x.start;for(x.next();x.pos>Q;){if(x.size<0)break e;x.id>=l&&(F+=4),x.next()}T=q,B+=_,X+=F}return(k<0||B==y)&&(V.size=B,V.start=T,V.skip=X),V.size>4?V:void 0}function u(y,k,x,B){let{id:T,start:X,end:D,size:V}=h;if(h.next(),T==B)return x;let N=x;if(V>4){let _=h.pos-(V-4);for(;h.pos>_;)x=u(y,k,x,B)}return T<l&&(k[--x]=N,k[--x]=D-y,k[--x]=X-y,k[--x]=T),x}let d=[],p=[];for(;h.pos>0;)f(s.start||0,0,d,p,-1);let m=(e=s.length)!==null&&e!==void 0?e:d.length?p[0]+d[0].length:0;return new j(a[n],d.reverse(),p.reverse(),m)}function Wi(s,e,t,i,n,r,o,l,h){let a=[],f=[];if(h<=l)for(let c=n;c<r;c++)a.push(t[c]),f.push(i[c]-o);else{let c=Math.max(l,Math.ceil(h*1.5/Fi));for(let u=n;u<r;){let d=u,p=i[u];for(u++;u<r&&!(i[u]+t[u].length-p>c);u++);if(u==d+1){let m=t[d];if(m instanceof j&&m.type==e&&m.length>c<<1){for(let y=0;y<m.children.length;y++)a.push(m.children[y]),f.push(m.positions[y]+p-o);continue}a.push(m)}else if(u==d+1)a.push(t[d]);else{let m=Wi(e,e,t,i,d,u,p,l,i[u-1]+t[u-1].length-p);e!=G.none&&!Il(m.children,e)&&(m=new j(G.none,m.children,m.positions,m.length)),a.push(m)}f.push(p-o)}}return new j(s,a,f,h)}function Il(s,e){for(let t of s)if(t.type==e)return!0;return!1}var Be=class{constructor(e,t,i,n,r){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=r}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,o=e.length?e[0]:null,l=0,h=0,a=0;for(;;){let f=l<t.length?t[l++]:null,c=f?f.fromA:1e9;if(c-h>=i)for(;o&&o.from<c;){let u=o;if(h>=u.from||c<=u.to||a){let d=Math.max(u.from,h)-a,p=Math.min(u.to,c)-a;u=d>=p?null:new Be(d,p,u.tree,u.offset+a,(l>0?1:0)|(f?2:0))}if(u&&n.push(u),o.to>c)break;o=r<e.length?e[r++]:null}if(!f)break;h=f.toA,a=f.toA-f.toB}return n}static addTree(e,t=[],i=!1){let n=[new Be(0,e.length,e,0,i?2:0)];for(let r of t)r.to>e.length&&n.push(r);return n}};function Hi(s){return new oi(s)}var oi=class{constructor(e,t=e.length){this.string=e,this.length=t}get(e){return e<0||e>=this.length?-1:this.string.charCodeAt(e)}lineAfter(e){if(e<0)return"";let t=this.string.indexOf(`
`,e);return this.string.slice(e,t<0?this.length:Math.min(t,this.length))}read(e,t){return this.string.slice(e,Math.min(this.length,t))}clip(e){return new oi(this.string,e)}};var gt="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<gt.length;s++)gt[s]+=gt[s-1];function _l(s){for(let e=1;e<gt.length;e+=2)if(gt[e]>s)return gt[e-1]<=s;return!1}function ys(s){return s>=127462&&s<=127487}var Os=8205;function fe(s,e,t=!0){return(t?bs:jl)(s,e)}function bs(s,e){if(e==s.length)return e;e&&xs(s.charCodeAt(e))&&ks(s.charCodeAt(e-1))&&e--;let t=mt(s,e);for(e+=li(t);e<s.length;){let i=mt(s,e);if(t==Os||i==Os||_l(i))e+=li(i),t=i;else if(ys(i)){let n=0,r=e-2;for(;r>=0&&ys(mt(s,r));)n++,r-=2;if(n%2==0)break;e+=2}else break}return e}function jl(s,e){for(;e>0;){let t=bs(s,e-2);if(t<e)return t;e--}return 0}function xs(s){return s>=56320&&s<57344}function ks(s){return s>=55296&&s<56320}function mt(s,e){let t=s.charCodeAt(e);if(!ks(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return xs(i)?(t-55296<<10)+(i-56320)+65536:t}function li(s){return s<65536?1:2}function Je(s,e,t){for(let i=0;i<s.length;)s.charCodeAt(i)==9?(e+=t-e%t,i++):(e++,i=fe(s,i));return e}function ws(s,e,t,i){for(let n=0;n<s.length;){if(e>=t)return{offset:n,leftOver:0};e+=s.charCodeAt(n)==9?i-e%i:1,n=fe(s,n)}return{offset:s.length,leftOver:t-e}}var S=class{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,1|2),this.decompose(t,this.length,n,1),Pe.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Pe.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=new Lt(this),i=new Lt(e);for(;;){if(t.next(),i.next(),t.lineBreak!=i.lineBreak||t.done!=i.done||t.value!=i.value)return!1;if(t.done)return!0}}iter(e=1){return new Lt(this,e)}iterRange(e,t=this.length){return new vs(this,e,t)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?S.empty:e.length<=32?new z(e):Pe.from(z.split(e,[]))}};typeof Symbol!="undefined"&&(S.prototype[Symbol.iterator]=function(){return this.iter()});var z=class extends S{constructor(e,t=zl(e)){super();this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((t?i:l)>=e)return new Ps(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new z(Ss(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=hi(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new z(l,o.length+r.length));else{let h=l.length>>1;i.push(new z(l.slice(0,h)),new z(l.slice(h)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof z))return super.replace(e,t,i);let n=hi(this.text,hi(i.text,Ss(this.text,0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new z(n,r):Pe.from(z.split(n,[]),r)}sliceString(e,t=this.length,i=`
`){let n="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],h=r+l.length;r>e&&o&&(n+=i),e<h&&t>r&&(n+=l.slice(Math.max(0,e-r),t-r)),r=h+1}return n}flatten(e){for(let t of this.text)e.push(t)}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(t.push(new z(i,n)),i=[],n=-1);return n>-1&&t.push(new z(i,n)),t}},Pe=class extends S{constructor(e,t){super();this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,h=i+o.lines-1;if((t?h:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=h+1}}decompose(e,t,i,n){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],h=o+l.length;if(e<=h&&t>=o){let a=n&((o<=e?1:0)|(h>=t?2:0));o>=e&&h<=t&&!a?i.push(l):l.decompose(e-o,t-o,i,a)}o=h+1}}replace(e,t,i){if(i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&t<=l){let h=o.replace(e-r,t-r,i),a=this.lines-o.lines+h.lines;if(h.lines<a>>5-1&&h.lines>a>>5+1){let f=this.children.slice();return f[n]=h,new Pe(f,this.length-(t-e)+i.length)}return super.replace(r,l,h)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let n="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],h=o+l.length;o>e&&r&&(n+=i),e<h&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=h+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new z(d,t)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],h=0,a=-1,f=[];function c(d){let p;if(d.lines>r&&d instanceof Pe)for(let m of d.children)c(m);else d.lines>o&&(h>o||!h)?(u(),l.push(d)):d instanceof z&&h&&(p=f[f.length-1])instanceof z&&d.lines+p.lines<=32?(h+=d.lines,a+=d.length+1,f[f.length-1]=new z(p.text.concat(d.text),p.length+1+d.length)):(h+d.lines>n&&u(),h+=d.lines,a+=d.length+1,f.push(d))}function u(){h!=0&&(l.push(f.length==1?f[0]:Pe.from(f,a)),a=-1,h=f.length=0)}for(let d of e)c(d);return u(),l.length==1?l[0]:new Pe(l,t)}};S.empty=new z([""],0);function zl(s){let e=-1;for(let t of s)e+=t.length+1;return e}function hi(s,e,t=0,i=1e9){for(let n=0,r=0,o=!0;r<s.length&&n<=i;r++){let l=s[r],h=n+l.length;h>=t&&(h>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=h+1}return e}function Ss(s,e,t){return hi(s,[""],e,t)}var Lt=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?0:e instanceof z?e.text.length:e.children.length]}next(e=0){for(;;){let t=this.nodes.length-1;if(t<0)return this.done=!0,this.value="",this.lineBreak=!1,this;let i=this.nodes[t],n=this.offsets[t],r=i instanceof z?i.text.length:i.children.length;if(n==(this.dir>0?r:0))this.nodes.pop(),this.offsets.pop();else if(!this.lineBreak&&n!=(this.dir>0?0:r)){if(this.lineBreak=!0,e==0)return this.value=`
`,this;e--}else if(i instanceof z){let o=i.text[n-(this.dir<0?1:0)];if(this.offsets[t]=n+=this.dir,this.lineBreak=!1,o.length>Math.max(0,e))return this.value=e==0?o:this.dir>0?o.slice(e):o.slice(0,o.length-e),this;e-=o.length}else{let o=i.children[this.dir>0?n:n-1];this.offsets[t]=n+this.dir,this.lineBreak=!1,e>o.length?e-=o.length:(this.nodes.push(o),this.offsets.push(this.dir>0?0:o instanceof z?o.text.length:o.children.length))}}}},vs=class{constructor(e,t,i){this.value="",this.cursor=new Lt(e,t>i?-1:1),t>i?(this.skip=e.length-t,this.limit=t-i):(this.skip=t,this.limit=i-t)}next(e=0){if(this.limit<=0)this.limit=-1;else{let{value:t,lineBreak:i,done:n}=this.cursor.next(this.skip+e);this.skip=0,this.value=t;let r=i?1:t.length;r>this.limit&&(this.value=this.cursor.dir>0?t.slice(0,this.limit):t.slice(r-this.limit)),n||this.value.length==0?this.limit=-1:this.limit-=this.value.length}return this}get lineBreak(){return this.cursor.lineBreak}get done(){return this.limit<0}},Ps=class{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}};var Ui=/\r\n?|\n/,ie;(function(s){s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter"})(ie||(ie={}));var qe=class{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,t=!1){Gi(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new qe(e)}composeDesc(e){return this.empty?e:e.empty?this:As(this,e)}mapDesc(e,t=!1){return e.empty?this:Yi(this,e,t)}mapPos(e,t=-1,i=ie.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],h=this.sections[o++],a=n+l;if(h<0){if(a>e)return r+(e-n);r+=l}else{if(i!=ie.Simple&&a>=e&&(i==ie.TrackDel&&n<e&&a>e||i==ie.TrackBefore&&n<e||i==ie.TrackAfter&&a>e))return null;if(a>e||a==e&&t<0&&!l)return e==n||t<0?r:r+h;r+=h}n=a}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}},Y=class extends qe{constructor(e,t){super(e);this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Gi(this,(t,i,n,r,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return Yi(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,r=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let h=n>>1;for(;i.length<h;)i.push(S.empty);i.push(o?e.slice(r,r+o):S.empty)}r+=o}return new Y(t,i)}compose(e){return this.empty?e:e.empty?this:As(this,e,!0)}map(e,t=!1){return e.empty?this:Yi(this,e,t,!0)}iterChanges(e,t=!1){Gi(this,e,t)}get desc(){return new qe(this.sections)}filter(e){let t=[],i=[],n=[],r=new yt(this);e:for(let o=0,l=0;;){let h=o==e.length?1e9:e[o++];for(;l<h||l==h&&r.len==0;){if(r.done)break e;let f=Math.min(r.len,h-l);se(n,f,-1);let c=r.ins==-1?-1:r.off==0?r.ins:0;se(t,f,c),c>0&&et(i,t,r.text),r.forward(f),l+=f}let a=e[o++];for(;l<a;){if(r.done)break e;let f=Math.min(r.len,a-l);se(t,f,-1),se(n,f,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(f),l+=f}}return{changes:new Y(t,i),filtered:new qe(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],r=[],o=0,l=null;function h(f=!1){if(!f&&!n.length)return;o<t&&se(n,t-o,-1);let c=new Y(n,r);l=l?l.compose(c.map(l)):c,n=[],r=[],o=0}function a(f){if(Array.isArray(f))for(let c of f)a(c);else if(f instanceof Y){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);h(),l=l?l.compose(f.map(l)):f}else{let{from:c,to:u=c,insert:d}=f;if(c>u||c<0||u>t)throw new RangeError(`Invalid change range ${c} to ${u} (in doc of length ${t})`);let p=d?typeof d=="string"?S.of(d.split(i||Ui)):d:S.empty,m=p.length;if(c==u&&m==0)return;c<o&&h(),c>o&&se(n,c-o,-1),se(n,u-c,m),et(r,n,p),o=u}}return a(e),h(!l),l}static empty(e){return new Y(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<n;)i.push(S.empty);i[n]=S.of(r.slice(1)),t.push(r[0],i[n].length)}}}return new Y(t,i)}};function se(s,e,t,i=!1){if(e==0&&t<=0)return;let n=s.length-2;n>=0&&t<=0&&t==s[n+1]?s[n]+=e:e==0&&s[n]==0?s[n+1]+=t:i?(s[n]+=e,s[n+1]+=t):s.push(e,t)}function et(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(S.empty);s.push(t)}}function Gi(s,e,t){let i=s.inserted;for(let n=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],h=s.sections[o++];if(h<0)n+=l,r+=l;else{let a=n,f=r,c=S.empty;for(;a+=l,f+=h,h&&i&&(c=c.append(i[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],h=s.sections[o++];e(n,a,r,f,c),n=a,r=f}}}function Yi(s,e,t,i=!1){let n=[],r=i?[]:null,o=new yt(s),l=new yt(e);for(let h=0,a=0;;)if(o.ins==-1)h+=o.len,o.next();else if(l.ins==-1&&a<h){let f=Math.min(l.len,h-a);l.forward(f),se(n,f,-1),a+=f}else if(l.ins>=0&&(o.done||a<h||a==h&&(l.len<o.len||l.len==o.len&&!t))){for(se(n,l.ins,-1);h>a&&!o.done&&h+o.len<a+l.len;)h+=o.len,o.next();a+=l.len,l.next()}else if(o.ins>=0){let f=0,c=h+o.len;for(;;)if(l.ins>=0&&a>h&&a+l.len<c)f+=l.ins,a+=l.len,l.next();else if(l.ins==-1&&a<c){let u=Math.min(l.len,c-a);f+=u,l.forward(u),a+=u}else break;se(n,f,o.ins),r&&et(r,n,o.text),h=c,o.next()}else{if(o.done&&l.done)return r?new Y(n,r):new qe(n);throw new Error("Mismatched change set lengths")}}function As(s,e,t=!1){let i=[],n=t?[]:null,r=new yt(s),o=new yt(e);for(let l=!1;;){if(r.done&&o.done)return n?new Y(i,n):new qe(i);if(r.ins==0)se(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)se(i,0,o.ins,l),n&&et(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let h=Math.min(r.len2,o.len),a=i.length;if(r.ins==-1){let f=o.ins==-1?-1:o.off?0:o.ins;se(i,h,f,l),n&&f&&et(n,i,o.text)}else o.ins==-1?(se(i,r.off?0:r.len,h,l),n&&et(n,i,r.textBit(h))):(se(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&et(n,i,o.text));l=(r.ins>h||o.ins>=0&&o.len>h)&&(l||i.length>a),r.forward2(h),o.forward(h)}}}}var yt=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?S.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?S.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},tt=class{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e){let t=e.mapPos(this.from),i=e.mapPos(this.to);return t==this.from&&i==this.to?this:new tt(t,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return O.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return O.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return O.range(e.anchor,e.head)}},O=class{constructor(e,t=0){this.ranges=e,this.mainIndex=t}map(e){return e.empty?this:O.create(this.ranges.map(t=>t.map(e)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new O([this.main])}addRange(e,t=!0){return O.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,O.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new O(e.ranges.map(t=>tt.fromJSON(t)),e.main)}static single(e,t=e){return new O([O.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return Fl(e.slice(),t);i=r.to}return new O(e,t)}static cursor(e,t=0,i,n){return new tt(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(n!=null?n:33554431)<<5)}static range(e,t,i){let n=(i!=null?i:33554431)<<5;return t<e?new tt(t,e,16|n):new tt(e,t,n)}};function Fl(s,e=0){let t=s[e];s.sort((i,n)=>i.from-n.from),e=s.indexOf(t);for(let i=1;i<s.length;i++){let n=s[i],r=s[i-1];if(n.empty?n.from<=r.to:n.from<r.to){let o=r.from,l=Math.max(n.to,r.to);i<=e&&e--,s.splice(--i,2,n.anchor>n.head?O.range(l,o):O.range(o,l))}}return new O(s,e)}function Cs(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var Ki=0,w=class{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.extensions=r,this.id=Ki++,this.default=e([])}static define(e={}){return new w(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Wl),!!e.static,e.enables)}of(e){return new Rt([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rt(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rt(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}};function Wl(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}var Rt=class{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=Ki++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=e[this.id]>>1,o=this.type==2,l=!1,h=!1,a=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?h=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&a.push(e[f.id]);return(f,c)=>{if(!c||c.reconfigure)return f.values[r]=i(f),1;{if(!(l&&c.docChanged||h&&(c.docChanged||c.selection)||a.some(m=>(Bt(f,m)&1)>0)))return 0;let d=i(f),p=c.startState.values[r];return(o?ql(d,p,n):n(d,p))?0:(f.values[r]=d,1)}}}};function ql(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function Hl(s,e,t){let i=t.map(l=>s[l.id]),n=t.map(l=>l.type),r=i.filter(l=>!(l&1)),o=s[e.id]>>1;return(l,h)=>{let a=h?h.reconfigure?h.startState.config.address[e.id]:o<<1:null,f=a==null;for(let d of r)Bt(l,d)&1&&(f=!0);if(!f)return 0;let c=[];for(let d=0;d<i.length;d++){let p=Ot(l,i[d]);if(n[d]==2)for(let m of p)c.push(m);else c.push(p)}let u=e.combine(c);return a!=null&&e.compare(u,Ot(h.startState,a))?0:(l.values[o]=u,1)}}function Ul(s,e){let t=s.config.address[e];return t==null?null:t>>1}var Ts=w.define({static:!0}),be=class{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new be(Ki++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ts).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return(i,n)=>{if(!n)return i.values[t]=this.create(i),1;let r,o=0;if(n.reconfigure){let h=Ul(n.startState,this.id);r=h==null?this.create(n.startState):n.startState.values[h],o=1}else r=n.startState.values[t];let l=this.updateF(r,n);return!o&&!this.compareF(r,l)&&(o=1),o&&(i.values[t]=l),o}}init(e){return[this,Ts.of({field:this,create:e})]}},bt={fallback:3,default:2,extend:1,override:0};function ai(s){return e=>new Zi(e,s)}var Nt={fallback:ai(bt.fallback),default:ai(bt.default),extend:ai(bt.extend),override:ai(bt.override)},Zi=class{constructor(e,t){this.inner=e,this.prec=t}},Ms=class{constructor(e,t){this.tag=e,this.inner=t}};var Qt=class{constructor(e,t,i,n,r){for(this.source=e,this.replacements=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t=Object.create(null),i){let n=[],r=Object.create(null);for(let a of Gl(e,t))a instanceof be?n.push(a):(r[a.facet.id]||(r[a.facet.id]=[])).push(a);let o=Object.create(null),l=[],h=[];for(let a of n)o[a.id]=h.length<<1,h.push(f=>a.slot(f));for(let a in r){let f=r[a],c=f[0].facet;if(f.every(u=>u.type==0)){o[c.id]=l.length<<1|1;let u=c.combine(f.map(p=>p.value)),d=i?i.config.address[c.id]:null;if(d!=null){let p=Ot(i,d);c.compare(u,p)&&(u=p)}l.push(u)}else{for(let u of f)u.type==0?(o[u.id]=l.length<<1|1,l.push(u.value)):(o[u.id]=h.length<<1,h.push(d=>u.dynamicSlot(d)));o[c.id]=h.length<<1,h.push(u=>Hl(u,c,f))}}return new Qt(e,t,h.map(a=>a(o)),o,l)}};function Yl(s){return(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(s):[]).concat(Object.keys(s))}function Gl(s,e){let t=[[],[],[],[]],i=new Map,n=Object.create(null);function r(o,l){let h=i.get(o);if(h!=null){if(h>=l)return;let a=t[h].indexOf(o);a>-1&&t[h].splice(a,1)}if(i.set(o,l),Array.isArray(o))for(let a of o)r(a,l);else if(o instanceof Ms){if(o.tag in n)throw new RangeError(`Duplicate use of tag '${String(o.tag)}' in extensions`);n[o.tag]=!0,r(e[o.tag]||o.inner,l)}else o instanceof Zi?r(o.inner,o.prec):o instanceof be?(t[l].push(o),o.provides&&r(o.provides,l)):o instanceof Rt?(t[l].push(o),o.facet.extensions&&r(o.facet.extensions,l)):r(o.extension,l)}r(s,bt.default);for(let o of Yl(e))!(o in n)&&o!="full"&&e[o]&&(n[o]=!0,r(e[o],bt.default));return t.reduce((o,l)=>o.concat(l))}function Bt(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let n=s.config.dynamicSlots[t](s,s.applying);return s.status[t]=2|n}function Ot(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}var Ds=w.define(),Es=w.define({combine:s=>s.some(e=>e),static:!0}),$s=w.define({combine:s=>s.length?s[0]:void 0,static:!0}),Ls=w.define(),Rs=w.define(),Bs=w.define(),He=class{constructor(e,t){this.type=e,this.value=t}static define(){return new Ns}},Ns=class{of(e){return new He(this,e)}},re=class{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new re(this.type,t)}is(e){return this.type==e}static define(e={}){return new Qs(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(t);r&&i.push(r)}return i}},Qs=class{constructor(e){this.map=e}of(e){return new re(this,e)}},P=class{constructor(e,t,i,n,r,o,l){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.reconfigure=o,this.scrollIntoView=l,this._doc=null,this._state=null,i&&Cs(i,t.newLength),r.some(h=>h.type==P.time)||(this.annotations=r.concat(P.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}};P.time=He.define();P.userEvent=He.define();P.addToHistory=He.define();function Kl(s,e){let t=[];for(let i=0,n=0;;){let r,o;if(i<s.length&&(n==e.length||e[n]>=s[i]))r=s[i++],o=s[i++];else if(n<e.length)r=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Xs(s,e,t){var i;let n,r,o;return t?(n=e.changes,r=Y.empty(e.changes.length),o=s.changes.compose(e.changes)):(n=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:re.mapEffects(s.effects,n).concat(re.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView,reconfigure:e.reconfigure?e.reconfigure.full||!s.reconfigure?e.reconfigure:Object.assign({},s.reconfigure,e.reconfigure):s.reconfigure}}function Ji(s,e,t){let i=e.reconfigure;if(i&&i.append){i=Object.assign({},i);let r=typeof Symbol=="undefined"?"__append"+Math.floor(Math.random()*4294967295):Symbol("appendConf");i[r]=i.append,i.append=void 0}let n=e.selection;return{changes:e.changes instanceof Y?e.changes:Y.of(e.changes||[],t,s.facet($s)),selection:n&&(n instanceof O?n:O.single(n.anchor,n.head)),effects:Xt(e.effects),annotations:Xt(e.annotations),scrollIntoView:!!e.scrollIntoView,reconfigure:i}}function Vs(s,e,t){let i=Ji(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=Xs(i,Ji(s,e[r],o?i.changes.newLength:s.doc.length),o)}let n=new P(s,i.changes,i.selection,i.effects,i.annotations,i.reconfigure,i.scrollIntoView);return Jl(t?Zl(n):n)}function Zl(s){let e=s.startState,t=!0;for(let n of e.facet(Ls)){let r=n(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:Kl(t,r))}if(t!==!0){let n,r;if(t===!1)r=s.changes.invertedDesc,n=Y.empty(e.doc.length);else{let o=s.changes.filter(t);n=o.changes,r=o.filtered.invertedDesc}s=new P(e,n,s.selection&&s.selection.map(r),re.mapEffects(s.effects,r),s.annotations,s.reconfigure,s.scrollIntoView)}let i=e.facet(Rs);for(let n=i.length-1;n>=0;n--){let r=i[n](s);r instanceof P?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof P?s=r[0]:s=Vs(e,Xt(r),!1)}return s}function Jl(s){let e=s.startState,t=e.facet(Bs),i=s;for(let n=t.length-1;n>=0;n--){let r=t[n](s);r&&Object.keys(r).length&&(i=Xs(s,Ji(e,r,s.changes.newLength),!0))}return i==s?s:new P(e,s.changes,s.selection,i.effects,i.annotations,i.reconfigure,i.scrollIntoView)}var eh=[];function Xt(s){return s==null?eh:Array.isArray(s)?s:[s]}var Ae;(function(s){s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other"})(Ae||(Ae={}));var th=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,en;try{en=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(s){}function ih(s){if(en)return en.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||th.test(t)))return!0}return!1}function nh(s){return e=>{if(!/\S/.test(e))return Ae.Space;if(ih(e))return Ae.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return Ae.Word;return Ae.Other}}var M=class{constructor(e,t,i,n=null){if(this.config=e,this.doc=t,this.selection=i,this.applying=null,this.status=e.statusTemplate.slice(),n&&!n.reconfigure)this.values=n.startState.values.slice();else if(this.values=e.dynamicSlots.map(r=>null),n)for(let r in e.address){let o=e.address[r],l=n.startState.config.address[r];l!=null&&(o&1)==0&&(this.values[o>>1]=Ot(n.startState,l))}this.applying=n,n&&(n._state=this);for(let r=0;r<this.config.dynamicSlots.length;r++)Bt(this,r<<1);this.applying=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Bt(this,i),Ot(this,i)}update(...e){return Vs(this,e,!0)}applyTransaction(e){let t=this.config;e.reconfigure&&(t=Qt.resolve(e.reconfigure.full||t.source,Object.assign(t.replacements,e.reconfigure,{full:void 0}),this)),new M(t,e.newDoc,e.newSelection,e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:O.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],o=Xt(i.effects);for(let l=1;l<t.ranges.length;l++){let h=e(t.ranges[l]),a=this.changes(h.changes),f=a.map(n);for(let u=0;u<l;u++)r[u]=r[u].map(f);let c=n.mapDesc(a,!0);r.push(h.range.map(c)),n=n.compose(f),o=re.mapEffects(o,f).concat(re.mapEffects(Xt(h.effects),c))}return{changes:n,selection:O.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Y?e:Y.of(e,this.doc.length,this.facet(M.lineSeparator))}toText(e){return S.of(e.split(this.facet(M.lineSeparator)||Ui))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Bt(this,t),Ot(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e)t[i]=e[i].spec.toJSON(this.field(e[i]),this);return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i)for(let r in i){let o=i[r],l=e[r];n.push(o.init(h=>o.spec.fromJSON(l,h)))}return M.create({doc:e.doc,selection:O.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=Qt.resolve(e.extensions||[]),i=e.doc instanceof S?e.doc:S.of((e.doc||"").split(t.staticFacet(M.lineSeparator)||Ui)),n=e.selection?e.selection instanceof O?e.selection:O.single(e.selection.anchor,e.selection.head):O.single(0);return Cs(n,i.length),t.staticFacet(Es)||(n=n.asSingle()),new M(t,i,n)}get tabSize(){return this.facet(M.tabSize)}get lineBreak(){return this.facet(M.lineSeparator)||`
`}phrase(e){for(let t of this.facet(M.phrases))if(Object.prototype.hasOwnProperty.call(t,e))return t[e];return e}languageDataAt(e,t){let i=[];for(let n of this.facet(Ds))for(let r of n(this,t))Object.prototype.hasOwnProperty.call(r,e)&&i.push(r[e]);return i}charCategorizer(e){return nh(this.languageDataAt("wordChars",e).join(""))}};M.allowMultipleSelections=Es;M.tabSize=w.define({combine:s=>s.length?s[0]:4});M.lineSeparator=$s;M.phrases=w.define();M.languageData=Ds;M.changeFilter=Ls;M.transactionFilter=Rs;M.transactionExtender=Bs;function Ne(s,e,t={}){let i={};for(let n of s)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}var Qe=class{eq(e){return this==e}range(e,t=e){return new fi(e,t,this)}};Qe.prototype.startSide=Qe.prototype.endSide=0;Qe.prototype.point=!1;Qe.prototype.mapMode=ie.TrackDel;var fi=class{constructor(e,t,i){this.from=e,this.to=t,this.value=i}};function Is(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}var ci=class{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i=t*1e9,n=0){if(e<=0)return n;let r=t<0?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let h=o+l>>1,a=r[h]-e||(t<0?this.value[h].startSide:this.value[h].endSide)-i;if(h==o)return a>=0?o:l;a>=0?l=h:o=h+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1),o=this.findIndex(i,1,void 0,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],n=[],r=[],o=-1,l=-1;for(let h=0;h<this.value.length;h++){let a=this.value[h],f=this.from[h]+e,c=this.to[h]+e,u,d;if(f==c){let p=t.mapPos(f,a.startSide,a.mapMode);if(p==null)continue;u=d=p}else if(u=t.mapPos(f,a.startSide),d=t.mapPos(c,a.endSide),u>d||u==d&&a.startSide>0&&a.endSide<=0)continue;(d-u||a.endSide-a.startSide)<0||(o<0&&(o=u),a.point&&(l=Math.max(l,d-u)),i.push(a),n.push(u-o),r.push(d-o))}return{mapped:i.length?new ci(n,r,i,l):null,pos:o}}},A=class{constructor(e,t,i=A.empty,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this==A.empty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&t.slice().sort(Is),this==A.empty)return t.length?A.of(t):this;let l=new tn(this,null,-1).goto(0),h=0,a=[],f=new Ue;for(;l.value||h<t.length;)if(h<t.length&&(l.from-t[h].from||l.startSide-t[h].value.startSide)>=0){let c=t[h++];f.addInner(c.from,c.to,c.value)||a.push(c)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(l.chunkIndex)<t[h].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||a.push(new fi(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer==A.empty&&!a.length?A.empty:this.nextLayer.update({add:a,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.length==0||this==A.empty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],h=this.chunk[o],a=e.touchesRange(l,l+h.length);if(a===!1)n=Math.max(n,h.maxPoint),t.push(h),i.push(e.mapPos(l));else if(a===!0){let{mapped:f,pos:c}=h.map(l,e);f&&(n=Math.max(n,f.maxPoint),t.push(f),i.push(c))}}let r=this.nextLayer.map(e);return t.length==0?r:new A(i,t,r,n)}between(e,t,i){if(this!=A.empty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return xt.from([this]).goto(e)}static iter(e,t=0){return xt.from(e).goto(t)}static compare(e,t,i,n,r=-1){let o=e.filter(c=>c.maxPoint>=500||c!=A.empty&&t.indexOf(c)<0&&c.maxPoint>=r),l=t.filter(c=>c.maxPoint>=500||c!=A.empty&&e.indexOf(c)<0&&c.maxPoint>=r),h=sh(o,l),a=new ui(o,h,r),f=new ui(l,h,r);i.iterGaps((c,u,d)=>_s(a,c,f,u,d,n)),i.empty&&i.length==0&&_s(a,0,f,0,0,n)}static spans(e,t,i,n,r=-1){let o=new ui(e,null,r).goto(t),l=t,h=o.openStart;for(;;){let a=Math.min(o.to,i);if(o.point?(n.point(l,a,o.point,o.activeForPoint(o.to),h),h=o.openEnd(a)+(o.to>a?1:0)):a>l&&(n.span(l,a,o.active,h),h=o.openEnd(a)),o.to>i)break;l=o.to,o.next()}return h}static of(e,t=!1){let i=new Ue;for(let n of e instanceof fi?[e]:t?e.slice().sort(Is):e)i.add(n.from,n.to,n.value);return i.finish()}};A.empty=new A([],[],null,-1);A.empty.nextLayer=A.empty;var Ue=class{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new ci(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Ue)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(A.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=new A(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function sh(s,e){let t=new Map;for(let n of s)for(let r=0;r<n.chunk.length;r++)n.chunk[r].maxPoint<500&&t.set(n.chunk[r],n.chunkPos[r]);let i=new Set;for(let n of e)for(let r=0;r<n.chunk.length;r++)t.get(n.chunk[r])==n.chunkPos[r]&&i.add(n.chunk[r]);return i}var tn=class{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}let n=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],-1,t);(!i||this.rangeIndex<n)&&(this.rangeIndex=n),this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],++this.rangeIndex==t.value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.to-e.to||this.endSide-e.endSide}},xt=class{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];o!=A.empty;o=o.nextLayer)o.maxPoint>=i&&n.push(new tn(o,t,i,r));return n.length==1?n[0]:new xt(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)nn(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)nn(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),nn(this.heap,0)}}};function nn(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),t.compare(n)<0)break;s[i]=t,s[e]=n,e=i}}var ui=class{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=xt.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){di(this.active,e),di(this.activeTo,e),di(this.activeRank,e),this.minActive=js(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=r;)t++;pi(this.active,t,i),pi(this.activeTo,t,n),pi(this.activeRank,t,r),e&&pi(e,t,this.cursor.from),this.minActive=js(this.active,this.activeTo)}next(){let e=this.to;this.point=null;let t=this.openStart<0?[]:null,i=0;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),t&&di(t,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(t),this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.from<e&&(i=1),this.cursor.next(),this.to>e&&this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(t){let n=0;for(;n<t.length&&t[n]<e;)n++;this.openStart=n+i}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=0;i<this.active.length&&!(this.activeRank[i]>this.pointRank);i++)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>this.point.endSide)&&t.push(this.active[i]);return t}openEnd(e){let t=0;for(;t<this.activeTo.length&&this.activeTo[t]>e;)t++;return t}};function _s(s,e,t,i,n,r){s.goto(e),t.goto(i);let o=i+n,l=i,h=i-e;for(;;){let a=s.to+h-t.to||s.endSide-t.endSide,f=a<0?s.to+h:t.to,c=Math.min(f,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))||r.comparePoint(l,c,s.point,t.point):c>l&&!rh(s.active,t.active)&&r.compareRange(l,c,s.active,t.active),f>o)break;l=f,a<=0&&s.next(),a>=0&&t.next()}}function rh(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function di(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function pi(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function js(s,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||s[n].endSide-s[t].endSide)<0&&(t=n,i=e[n]);return t}var Xe={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},gi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},zs=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),oh=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),lh=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),Fs=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),hh=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ah=zs&&(Fs||+zs[1]<57)||lh&&Fs;for(var J=0;J<10;J++)Xe[48+J]=Xe[96+J]=String(J);for(var J=1;J<=24;J++)Xe[J+111]="F"+J;for(var J=65;J<=90;J++)Xe[J]=String.fromCharCode(J+32),gi[J]=String.fromCharCode(J);for(var sn in Xe)gi.hasOwnProperty(sn)||(gi[sn]=Xe[sn]);function Ws(s){var e=ah&&(s.ctrlKey||s.altKey||s.metaKey)||(oh||hh)&&s.shiftKey&&s.key&&s.key.length==1,t=!e&&s.key||(s.shiftKey?gi:Xe)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}var[xe,rn]=typeof navigator!="undefined"?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],on=/Edge\/(\d+)/.exec(xe.userAgent),qs=/MSIE \d/.test(xe.userAgent),ln=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xe.userAgent),mi=!!(qs||ln||on),Hs=!mi&&/gecko\/(\d+)/i.test(xe.userAgent),hn=!mi&&/Chrome\/(\d+)/.exec(xe.userAgent),Us="webkitFontSmoothing"in rn.documentElement.style,Gs=!mi&&/Apple Computer/.test(xe.vendor),v={mac:/Mac/.test(xe.platform),ie:mi,ie_version:qs?rn.documentMode||6:ln?+ln[1]:on?+on[1]:0,gecko:Hs,gecko_version:Hs?+(/Firefox\/(\d+)/.exec(xe.userAgent)||[0,0])[1]:0,chrome:!!hn,chrome_version:hn?+hn[1]:0,ios:Gs&&(/Mobile\/\w+/.test(xe.userAgent)||xe.maxTouchPoints>2),android:/Android\b/.test(xe.userAgent),webkit:Us,safari:Gs,webkit_version:Us?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:rn.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function ke(s){return s.getSelection?s.getSelection():document.getSelection()}function fh(s){let e=s.isCollapsed;return e&&v.chrome&&s.rangeCount&&!s.getRangeAt(0).collapsed&&(e=!1),e}function Ys(s,e){if(!e.anchorNode)return!1;try{return s.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)}catch(t){return!1}}function fn(s){if(s.nodeType==3){let e=an();return e.setEnd(s,s.nodeValue.length),e.setStart(s,0),e.getClientRects()}else return s.nodeType==1?s.getClientRects():[]}function cn(s,e,t,i){return t?Ks(s,e,t,i,-1)||Ks(s,e,t,i,1):!1}function un(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function Ks(s,e,t,i,n){for(;;){if(s==t&&e==i)return!0;if(e==(n<0?0:yi(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=un(s)+(n<0?0:1),s=r}else if(s.nodeType==1)s=s.childNodes[e+(n<0?-1:0)],e=n<0?yi(s):0;else return!1}}function yi(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function dn(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function ch(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}var Oi=5;function uh(s,e){let t=s.ownerDocument,i=t.defaultView;for(let n=s.parentNode;n;)if(n.nodeType==1){let r,o=n==document.body;if(o)r=ch(i);else{if(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth){n=n.parentNode;continue}let a=n.getBoundingClientRect();r={left:a.left,right:a.left+n.clientWidth,top:a.top,bottom:a.top+n.clientHeight}}let l=0,h=0;if(e.top<r.top?h=-(r.top-e.top+Oi):e.bottom>r.bottom&&(h=e.bottom-r.bottom+Oi),e.left<r.left?l=-(r.left-e.left+Oi):e.right>r.right&&(l=e.right-r.right+Oi),l||h)if(o)i.scrollBy(l,h);else{if(h){let a=n.scrollTop;n.scrollTop+=h,h=n.scrollTop-a}if(l){let a=n.scrollLeft;n.scrollLeft+=l,l=n.scrollLeft-a}e={left:e.left-l,top:e.top-h,right:e.right-l,bottom:e.bottom-h}}if(o)break;n=n.parentNode}else if(n.nodeType==11)n=n.host;else break}var Zs=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},kt=null;function Js(s){if(s.setActive)return s.setActive();if(kt)return s.focus(kt);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(kt==null?{get preventScroll(){return kt={preventScroll:!0},!0}}:void 0),!kt){kt=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],r=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}var er;function an(){return er||(er=document.createRange())}var oe=class{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new oe(e.parentNode,un(e),t)}static after(e,t){return new oe(e.parentNode,un(e)+1,t)}},dh=[],K=class{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null;for(let r of this.children){if(r.dirty){let o=i?i.nextSibling:t.firstChild;o&&!r.dom&&!K.get(o)&&r.reuseDOM(o),r.sync(e),r.dirty=0}e&&e.node==t&&i!=r.dom&&(e.written=!0),ph(t,i,r.dom),i=r.dom}let n=i?i.nextSibling:t.firstChild;for(n&&e&&e.node==t&&(e.written=!0);n;)n=tr(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){return!1}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=yi(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!K.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,o=-1,l=-1;for(let h=0,a=i;h<this.children.length;h++){let f=this.children[h],c=a+f.length;if(a<e&&c>t)return f.domBoundsAround(e,t,a);if(c>=e&&n==-1&&(n=h,r=a),c>=t&&c!=a&&o==-1){o=h,l=c;break}a=c+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length-1&&o>=0?this.children[o+1].dom:null}}markDirty(e=!1){this.dirty&2||(this.dirty|=2,this.markParentsDirty(e))}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=dh){this.markDirty();for(let n=e;n<t;n++)this.children[n].parent=null;this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new pn(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}};K.prototype.breakAfter=0;function tr(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}function ph(s,e,t){let i=e?e.nextSibling:s.firstChild;if(t.parentNode==s)for(;i!=t;)i=tr(i);else s.insertBefore(t,i)}var pn=class{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}},ir=[],it=class extends K{become(e){return!1}getSide(){return 0}};it.prototype.children=ir;var gh=256,wt=class extends it{constructor(e){super();this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){return e.nodeType!=3?!1:(this.createDOM(e),!0)}merge(e,t,i){return i&&(!(i instanceof wt)||this.length-(t-e)+i.length>gh)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}slice(e){return new wt(this.text.slice(e))}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new oe(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return nr(this.dom,e,t)}},nt=class extends it{constructor(e,t=[],i=0){super();this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}createDOM(){let e=document.createElement(this.mark.tagName);if(this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);this.setDOM(e)}sync(e){this.dom||this.createDOM(),super.sync(e)}merge(e,t,i,n,r){return i&&(!(i instanceof nt&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&r<=0)?!1:(sr(this,e,t,i?i.children:ir,n-1,r-1),this.markDirty(),!0)}slice(e){return new nt(this.mark,mh(this.children,e),this.length-e)}domAtPos(e){return rr(this.dom,this.children,e)}coordsAt(e,t){return or(this,e,t)}};function nr(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?v.chrome||v.gecko||(e?(n--,o=1):(r++,o=-1)):t<0?n--:r++;let l=an();l.setEnd(s,r),l.setStart(s,n);let h=l.getClientRects(),a=h[(o?o<0:t>=0)?0:h.length-1];return v.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(h,f=>f.width)||a),o?dn(a,o<0):a}var Ce=class extends it{constructor(e,t,i){super();this.widget=e,this.length=t,this.side=i}static create(e,t,i){return new(e.customView||Ce)(e,t,i)}slice(e){return Ce.create(this.widget,this.length-e,this.side)}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,r){return i&&(!(i instanceof Ce)||!this.widget.compare(i.widget)||e>0&&n<=0||t<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Ce&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return S.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):S.empty}domAtPos(e){return e==0?oe.before(this.dom):oe.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;for(let r=e>0?i.length-1:0;n=i[r],!(e>0?r==0:r==i.length-1||n.top<n.bottom);r+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:dn(n,e==0)}},lr=class extends Ce{domAtPos(e){return new oe(this.widget.text,e)}sync(){this.dom||this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){return t?e.nodeType==3?Math.min(t,this.length):this.length:0}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){return nr(this.widget.text,e,t)}};function sr(s,e,t,i,n,r){let o=s.childCursor(),{i:l,off:h}=o.findPos(t,1),{i:a,off:f}=o.findPos(e,-1),c=e-t;for(let d of i)c+=d.length;s.length+=c;let{children:u}=s;if(a==l&&f){let d=u[a];if(i.length==1&&d.merge(f,h,i[0],n,r))return;if(i.length==0){d.merge(f,h,null,n,r);return}let p=d.slice(h);p.merge(0,0,i[i.length-1],0,r)?i[i.length-1]=p:i.push(p),l++,r=h=0}if(h){let d=u[l];i.length&&d.merge(0,h,i[i.length-1],0,r)?(i.pop(),r=0):d.merge(0,h,null,0,0)}else l<u.length&&i.length&&u[l].merge(0,0,i[i.length-1],0,r)&&(i.pop(),r=0);if(f){let d=u[a];i.length&&d.merge(f,d.length,i[0],n,0)?(i.shift(),n=0):d.merge(f,d.length,null,0,0),a++}else if(a&&i.length){let d=u[a-1];d.merge(d.length,d.length,i[0],n,0)&&(i.shift(),n=0)}for(;a<l&&i.length&&u[l-1].become(i[i.length-1]);)i.pop(),l--,r=0;for(;a<l&&i.length&&u[a].become(i[0]);)i.shift(),a++,n=0;!i.length&&a&&l<u.length&&n&&r&&u[l].merge(0,0,u[a-1],n,r)&&a--,(i.length||a!=l)&&s.replaceChildren(a,l,i)}function mh(s,e){let t=[],i=0;for(let n of s){let r=i+n.length;r>e&&t.push(i<e?n.slice(e-i):n),i=r}return t}function rr(s,e,t){let i=0;for(let n=0;i<e.length;i++){let r=e[i],o=n+r.length;if(!(o==n&&r.getSide()<=0)){if(t>n&&t<o&&r.dom.parentNode==s)return r.domAtPos(t-n);if(t<=n)break;n=o}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==s)return oe.after(n)}return new oe(s,0)}function hr(s,e,t){let i,{children:n}=s;t>0&&e instanceof nt&&n.length&&(i=n[n.length-1])instanceof nt&&i.mark.eq(e.mark)?hr(i,e.children[0],t-1):(n.push(e),e.setParent(s)),s.length+=e.length}function or(s,e,t){for(let i=0,n=0;n<s.children.length;n++){let r=s.children[n],o=i+r.length;if(!(o==i&&r.getSide()<=0)){if(t<=0||o==s.length?o>=e:o>e)return r.coordsAt(e-i,t);i=o}}return(s.dom.lastChild||s.dom).getBoundingClientRect()}function Vt(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}function gn(s,e){if(s==e)return!0;if(!s||!e)return!1;let t=Object.keys(s),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||s[n]!==e[n])return!1;return!0}function mn(s,e,t){if(e)for(let i in e)t&&i in t||s.removeAttribute(i);if(t)for(let i in t)e&&e[i]==t[i]||s.setAttribute(i,t[i])}var It=class{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}},H;(function(s){s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange"})(H||(H={}));var L=class extends Qe{constructor(e,t,i,n){super();this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new _t(e)}static widget(e){let t=e.side||0;return e.block&&(t+=(2e8+1)*(t>0?1:-1)),new st(e,t,t,!!e.block,e.widget||null,!1)}static replace(e){let t=!!e.block,{start:i,end:n}=ar(e),r=t?-2e8*(i?2:1):1e8*(i?-1:1),o=t?2e8*(n?2:1):1e8*(n?1:-1);return new st(e,r,o,t,e.widget||null,!0)}static line(e){return new vt(e)}static set(e,t=!1){return A.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};L.none=A.empty;var _t=class extends L{constructor(e){let{start:t,end:i}=ar(e);super(1e8*(t?-1:1),1e8*(i?1:-1),null,e);this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof _t&&this.tagName==e.tagName&&this.class==e.class&&gn(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};_t.prototype.point=!1;var vt=class extends L{constructor(e){super(-1e8,-1e8,null,e)}eq(e){return e instanceof vt&&gn(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};vt.prototype.mapMode=ie.TrackBefore;vt.prototype.point=!0;var st=class extends L{constructor(e,t,i,n,r,o){super(t,i,r,e);this.block=n,this.isReplace=o,this.mapMode=n?t<0?ie.TrackBefore:ie.TrackAfter:ie.TrackDel}get type(){return this.startSide<this.endSide?H.WidgetRange:this.startSide<0?H.WidgetBefore:H.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof st&&yh(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};st.prototype.point=!0;function ar(s){let{inclusiveStart:e,inclusiveEnd:t}=s;return e==null&&(e=s.inclusive),t==null&&(t=s.inclusive),{start:e||!1,end:t||!1}}function yh(s,e){return s==e||!!(s&&e&&s.compare(e))}function yn(s,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>s?t[n]=Math.max(t[n],e):t.push(s,e)}var fr=w.define({combine:s=>s.join(" ")}),cr=w.define({combine:s=>s.indexOf(!0)>-1}),bi=Oe.newName();function ur(s){return s.replace(/\$\w[\w\.]*/g,e=>{let t=e.slice(1).split("."),i="";for(let n=1;n<=t.length;n++)i+=".cm-"+t.slice(0,n).join("-");return i})}function On(s,e){return new Oe(e,{process(t){return t=ur(t),/\$/.test(t)?t.replace(/\$/,s):s+" "+t},extend(t,i){return t=ur(t),i.slice(0,s.length+1)==s+" "?s+" "+t.replace(/&/,i.slice(s.length+1)):t.replace(/&/,i)}})}function ee(s){if(s.indexOf(".")<0)return"cm-"+s;let e=s.split("."),t="";for(let i=1;i<=e.length;i++)t+=(t?" ":"")+"cm-"+e.slice(0,i).join("-");return t}var Oh=On("."+bi,{$:{position:"relative !important",boxSizing:"border-box","&$focused":{outline_fallback:"1px dotted #212121",outline:"5px auto -webkit-focus-ring-color"},display:"flex !important",flexDirection:"column"},$scroller:{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},$content:{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",boxSizing:"border-box",padding:"4px 0",outline:"none"},"$$light $content":{caretColor:"black"},"$$dark $content":{caretColor:"white"},$line:{display:"block",padding:"0 2px 0 4px"},$selectionLayer:{zIndex:-1,contain:"size style"},$selectionBackground:{position:"absolute"},"$$light $selectionBackground":{background:"#d9d9d9"},"$$dark $selectionBackground":{background:"#222"},"$$focused$light $selectionBackground":{background:"#d7d4f0"},"$$focused$dark $selectionBackground":{background:"#233"},$cursorLayer:{zIndex:100,contain:"size style",pointerEvents:"none"},"$$focused $cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},$cursor:{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none",display:"none"},"$$dark $cursor":{borderLeftColor:"#444"},"$$focused $cursor":{display:"block"},"$$light $activeLine":{backgroundColor:"#f3f9ff"},"$$dark $activeLine":{backgroundColor:"#223039"},"$$light $specialChar":{color:"red"},"$$dark $specialChar":{color:"#f78"},$tab:{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},$placeholder:{color:"#888",display:"inline-block"},$button:{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"$$light $button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"$$dark $button":{backgroundImage:"linear-gradient(#555, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},$textfield:{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"$$light $textfield":{backgroundColor:"white"},"$$dark $textfield":{border:"1px solid #555",backgroundColor:"inherit"}}),dr=ee("line"),le=class extends K{constructor(){super(...arguments);this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,o){if(i){if(!(i instanceof le))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),sr(this,e,t,i?i.children:pr,r,o),!0}split(e){let t=new le;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].slice(n),0),this.children[i].merge(n,this.children[i].length,null,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[i-1].parent=null,i--;return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){gn(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){hr(this,e,t)}addLineDeco(e){let t=e.spec.attributes;t&&(this.attrs=Vt(t,this.attrs||{}))}domAtPos(e){return rr(this.dom,this.children,e)}sync(e){this.dom||(this.setDOM(document.createElement("div")),this.dom.className=dr,this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(mn(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add(dr),this.prevAttrs=void 0),super.sync(e);let t=this.dom.lastChild;if(!t||t.nodeName!="BR"&&K.get(t)instanceof Ce){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof wt))return null;let i=fn(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return or(this,e,t)}match(e){return!1}get type(){return H.Text}static find(e,t){for(let i=0,n=0;;i++){let r=e.children[i],o=n+r.length;if(o>=t){if(r instanceof le)return r;if(r.length)return null}n=o+r.breakAfter}}},pr=[],rt=class extends K{constructor(e,t,i){super();this.widget=e,this.length=t,this.type=i,this.breakAfter=0}merge(e,t,i,n,r,o){return i&&(!(i instanceof rt)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?oe.before(this.dom):oe.after(this.dom,e==this.length)}split(e){let t=this.length-e;return this.length=e,new rt(this.widget,t,this.type)}get children(){return pr}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):S.empty}domBoundsAround(){return null}match(e){return e instanceof rt&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}},xi=class{constructor(e,t,i){this.doc=e,this.pos=t,this.end=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof rt&&e.type==H.WidgetBefore)}getLine(){return this.curLine||this.content.push(this.curLine=new le),this.curLine}addWidget(e){this.curLine=null,this.content.push(e)}finish(){this.posCovered()||this.getLine()}wrapMarks(e,t){for(let i=t.length-1;i>=0;i--)e=new nt(t[i],[e],e.length);return e}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.curLine=null,e--;continue}else this.text=r,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.getLine().append(this.wrapMarks(new wt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r){let o=t-e;if(i instanceof st)if(i.block){let{type:l}=i;l==H.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addWidget(new rt(i.widget||new bn("div"),o,l))}else{let l=this.wrapMarks(Ce.create(i.widget||new bn("span"),o,i.startSide),n);this.getLine().append(l,r)}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n){let r=new xi(e,t,i);return r.openEnd=A.spans(n,t,i,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(),r}},bn=class extends It{constructor(e){super();this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}},bh=[],gr=w.define(),mr=w.define(),yr=w.define(),Or=w.define(),xn=w.define(),br=w.define();function ot(s,e,t){let i=s.facet(Or);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}var kn=w.define({combine:s=>s.length?s[0]:!0}),xr=class{constructor(e,t){this.field=e,this.get=t}},ce=class{from(e){return new xr(this,e)}static define(){return new ce}};ce.decorations=ce.define();ce.scrollMargins=ce.define();var xh=0,jt=w.define(),ne=class{constructor(e,t,i){this.id=e,this.create=t,this.fields=i,this.extension=jt.of(this)}static define(e,t){let{eventHandlers:i,provide:n,decorations:r}=t||{},o=[];if(n)for(let l of Array.isArray(n)?n:[n])o.push(l);return i&&o.push(kr.from(l=>({plugin:l,handlers:i}))),r&&o.push(ce.decorations.from(r)),new ne(xh++,e,o)}static fromClass(e,t){return ne.define(i=>new e(i),t)}},kr=ce.define(),Ve=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}takeField(e,t){for(let{field:i,get:n}of this.spec.fields)i==e&&t.push(n(this.value))}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,!this.value.update)return this;try{this.value.update(t)}catch(i){if(ot(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(n){}return Ve.dummy}}}else try{this.value=this.spec.create(e)}catch(t){return ot(e.state,t,"CodeMirror plugin crashed"),Ve.dummy}return this}destroy(e){var t;if((t=this.value)===null||t===void 0?void 0:t.destroy)try{this.value.destroy()}catch(i){ot(e.state,i,"CodeMirror plugin crashed")}}};Ve.dummy=new Ve(ne.define(()=>({})));var wr=w.define({combine:s=>s.reduce((e,t)=>Vt(t,e),{})}),vr=w.define({combine:s=>s.reduce((e,t)=>Vt(t,e),{})}),lt=w.define(),zt=w.define(),Te=class{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Te(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let h=n==e.length?null:e[n],a=o-l,f=h?h.fromB:1e9;for(;r<t.length&&t[r]<f;){let c=t[r],u=t[r+1],d=Math.max(l,c),p=Math.min(f,u);if(d<=p&&new Te(d+a,p+a,d,p).addToSet(i),u>f)break;r+=2}if(!h)return i;new Te(h.fromA,h.toA,h.fromB,h.toB).addToSet(i),o=h.toA,l=h.toB}}},wn=class{constructor(e,t,i=bh){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Y.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let n=[];this.changes.iterChangedRanges((o,l,h,a)=>n.push(new Te(o,l,h,a))),this.changedRanges=n;let r=e.hasFocus;r!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=r,this.flags|=1),this.docChanged&&(this.flags|=2)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&(16|2))>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return this.transactions.some(e=>e.docChanged)}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},vn=class extends K{constructor(e){super();this.view=e,this.compositionDeco=L.none,this.decorations=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.setDOM(e.contentDOM),this.children=[new le],this.children[0].setParent(this),this.updateInner([new Te(0,0,0,e.state.doc.length)],this.updateDeco(),0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:h,toA:a})=>a<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=0),this.view.inputState.composing<0?this.compositionDeco=L.none:e.transactions.length&&(this.compositionDeco=kh(this.view,e.changes));let i=(v.ie||v.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines,n=this.decorations,r=this.updateDeco(),o=wh(n,r,e.changes);t=Te.extendWithRanges(t,o);let l=e.transactions.some(h=>h.annotation(P.userEvent)=="pointerselection");return this.dirty==0&&t.length==0&&!(e.flags&(4|8))&&e.state.selection.main.from>=this.view.viewport.from&&e.state.selection.main.to<=this.view.viewport.to?(this.updateSelection(i,l),!1):(this.updateInner(t,r,e.startState.doc.length,i,l),!0)}updateInner(e,t,i,n=!1,r=!1){this.updateChildren(e,t,i),this.view.observer.ignore(()=>{this.dom.style.height=this.view.viewState.domHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let o=v.chrome?{node:ke(this.view.root).focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,(o==null?void 0:o.written)&&(n=!0),this.updateSelection(n,r),this.dom.style.height=""})}updateChildren(e,t,i){let n=this.childCursor(i);for(let r=e.length-1;;r--){let o=r>=0?e[r]:null;if(!o)break;let{fromA:l,toA:h,fromB:a,toB:f}=o,{content:c,breakAtStart:u,openStart:d,openEnd:p}=xi.build(this.view.state.doc,a,f,t),{i:m,off:y}=n.findPos(h,1),{i:k,off:x}=n.findPos(l,-1);this.replaceRange(k,x,m,y,c,u,d,p)}}replaceRange(e,t,i,n,r,o,l,h){let a=this.children[e],f=r.length?r[r.length-1]:null,c=f?f.breakAfter:o;if(e==i&&!o&&!c&&r.length<2&&a.merge(t,n,r.length?f:null,t==0,l,h))return;let u=this.children[i];for(n<u.length||u.children.length&&u.children[u.children.length-1].length==0?(e==i&&(u=u.split(n),n=0),!c&&f&&u.merge(0,n,f,!0,0,h)?r[r.length-1]=u:((n||u.children.length&&u.children[0].length==0)&&u.merge(0,n,null,!1,0,h),r.push(u))):u.breakAfter&&(f?f.breakAfter=1:o=1),i++,a.breakAfter=o,t>0&&(!o&&r.length&&a.merge(t,a.length,r[0],!1,l,0)?a.breakAfter=r.shift().breakAfter:(t<a.length||a.children.length&&a.children[a.children.length-1].length==0)&&a.merge(t,a.length,null,!1,l,0),e++);e<i&&r.length;)if(this.children[i-1].match(r[r.length-1]))i--,r.pop();else if(this.children[e].match(r[0]))e++,r.shift();else break;(e<i||r.length)&&this.replaceChildren(e,i,r)}updateSelection(e=!1,t=!1){if(!(t||this.mayControlSelection()))return;let i=this.view.state.selection.main,n=this.domAtPos(i.anchor),r=this.domAtPos(i.head),o=ke(this.root);(e||!o.focusNode||v.gecko&&i.empty&&Ar(o.focusNode,o.focusOffset)||!cn(n.node,n.offset,o.anchorNode,o.anchorOffset)||!cn(r.node,r.offset,o.focusNode,o.focusOffset))&&this.view.observer.ignore(()=>{if(i.empty){if(v.gecko){let l=Ar(n.node,n.offset);if(l&&l!=(1|2)){let h=Pr(n.node,n.offset,l==1?1:-1);h&&(n=new oe(h,l==1?0:h.nodeValue.length))}}o.collapse(n.node,n.offset),i.bidiLevel!=null&&o.cursorBidiLevel!=null&&(o.cursorBidiLevel=i.bidiLevel)}else if(o.extend)o.collapse(n.node,n.offset),o.extend(r.node,r.offset);else{let l=document.createRange();i.anchor>i.head&&([n,r]=[r,n]),l.setEnd(r.node,r.offset),l.setStart(n.node,n.offset),o.removeAllRanges(),o.addRange(l)}}),this.impreciseAnchor=n.precise?null:new oe(o.anchorNode,o.anchorOffset),this.impreciseHead=r.precise?null:new oe(o.focusNode,o.focusOffset)}enforceCursorAssoc(){let e=this.view.state.selection.main,t=ke(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=le.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let r=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!r||!o||r.bottom>o.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(kn)?this.root.activeElement==this.dom:Ys(this.dom,ke(this.root))}nearest(e){for(let t=e;t;){let i=K.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof le)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let r=this.children[n],o=i-r.breakAfter-r.length;if(e>o||e==o&&(r.type==H.Text||!n||this.children[n-1].breakAfter))return r.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(){let e=[],{from:t,to:i}=this.view.viewState.viewport,n=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;for(let r=0,o=0;o<this.children.length;o++){let l=this.children[o],h=r+l.length;if(h>i)break;if(r>=t){e.push(l.dom.getBoundingClientRect().height);let a=l.dom.scrollWidth;a>n&&(this.minWidth=n=a,this.minWidthFrom=r,this.minWidthTo=h)}r=h+l.breakAfter}return e}measureTextSize(){for(let n of this.children)if(n instanceof le){let r=n.measureTextSize();if(r)return r}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=fn(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new pn(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=t.lineAt(o,0).bottom-t.lineAt(i,0).top;e.push(L.replace({widget:new Sr(l),block:!0,inclusive:!0}).range(i,o))}if(!r)break;i=r.to+1}return L.set(e)}updateDeco(){return this.decorations=[this.computeBlockGapDeco(),this.view.viewState.lineGapDeco,this.compositionDeco,...this.view.state.facet(lt),...this.view.pluginField(ce.decorations)]}scrollPosIntoView(e,t){let i=this.coordsAt(e,t);if(!i)return;let n=0,r=0,o=0,l=0;for(let h of this.view.pluginField(ce.scrollMargins))if(h){let{left:a,right:f,top:c,bottom:u}=h;a!=null&&(n=Math.max(n,a)),f!=null&&(r=Math.max(r,f)),c!=null&&(o=Math.max(o,c)),u!=null&&(l=Math.max(l,u))}uh(this.dom,{left:i.left-n,top:i.top-o,right:i.right+r,bottom:i.bottom+l})}},Sr=class extends It{constructor(e){super();this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}};function kh(s,e){let t=ke(s.root),i=t.focusNode&&Pr(t.focusNode,t.focusOffset,0);if(!i)return L.none;let n=s.docView.nearest(i),r,o,l=i;if(n instanceof it){for(;n.parent instanceof it;)n=n.parent;r=n.posAtStart,o=r+n.length,l=n.dom}else if(n instanceof le){for(;l.parentNode!=n.dom;)l=l.parentNode;let u=l.previousSibling;for(;u&&!K.get(u);)u=u.previousSibling;r=o=u?K.get(u).posAtEnd:n.posAtStart}else return L.none;let h=e.mapPos(r,1),a=Math.max(h,e.mapPos(o,-1)),f=i.nodeValue,{state:c}=s;if(a-h<f.length)if(c.sliceDoc(h,Math.min(c.doc.length,h+f.length))==f)a=h+f.length;else if(c.sliceDoc(Math.max(0,a-f.length),a)==f)h=a-f.length;else return L.none;else if(c.sliceDoc(h,a)!=f)return L.none;return L.set(L.replace({widget:new Cr(l,i)}).range(h,a))}var Cr=class extends It{constructor(e,t){super();this.top=e,this.text=t}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return lr}};function Pr(s,e,t){for(;;){if(s.nodeType==3)return s;if(s.nodeType==1&&e>0&&t<=0)s=s.childNodes[e-1],e=yi(s);else if(s.nodeType==1&&e<s.childNodes.length&&t>=0)s=s.childNodes[e],e=0;else return null}}function Ar(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}var Tr=class{constructor(){this.changes=[]}compareRange(e,t){yn(e,t,this.changes)}comparePoint(e,t){yn(e,t,this.changes)}};function wh(s,e,t){let i=new Tr;return A.compare(s,e,t,i),i.changes}var E;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(E||(E={}));var Mr=E.LTR,vh=E.RTL;function Dr(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}var Sh=Dr("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ph=Dr("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333");function Ah(s){return s<=247?Sh[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?Ph[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203||s==8204?256:1}var Ch=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,ht=class{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?vh:Mr}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}},U=[];function Th(s,e){let t=s.length,i=e==Mr?1:2;if(!s||i==1&&!Ch.test(s))return Er(t);for(let r=0,o=i,l=i;r<t;r++){let h=Ah(s.charCodeAt(r));h==512?h=o:h==8&&l==4&&(h=16),U[r]=h==4?2:h,h&7&&(l=h),o=h}for(let r=0,o=i,l=i;r<t;r++){let h=U[r];if(h==128)r<t-1&&o==U[r+1]&&o&24?h=U[r]=o:U[r]=256;else if(h==64){let a=r+1;for(;a<t&&U[a]==64;)a++;let f=r&&o==8||a<t&&U[a]==8?l==1?1:8:256;for(let c=r;c<a;c++)U[c]=f;r=a-1}else h==8&&l==1&&(U[r]=1);o=h,h&7&&(l=h)}for(let r=0;r<t;r++)if(U[r]==256){let o=r+1;for(;o<t&&U[o]==256;)o++;let l=(r?U[r-1]:i)==1,h=(o<t?U[o]:i)==1,a=l==h?l?1:2:i;for(let f=r;f<o;f++)U[f]=a;r=o-1}let n=[];if(i==1)for(let r=0;r<t;){let o=r,l=U[r++]!=1;for(;r<t&&l==(U[r]!=1);)r++;if(l)for(let h=r;h>o;){let a=h,f=U[--h]!=2;for(;h>o&&f==(U[h-1]!=2);)h--;n.push(new ht(h,a,f?2:1))}else n.push(new ht(o,r,0))}else for(let r=0;r<t;){let o=r,l=U[r++]==2;for(;r<t&&l==(U[r]==2);)r++;n.push(new ht(o,r,l?1:2))}return n}function Er(s){return[new ht(0,s,0)]}var $r="";function Mh(s,e,t,i,n){var r;let o=i.head-s.from,l=-1;if(o==0){if(!n||!s.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==s.length){if(n)return null;let u=e[e.length-1];u.level!=t&&(o=u.side(!0,t),l=e.length-1)}l<0&&(l=ht.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc));let h=e[l];o==h.side(n,t)&&(h=e[l+=n?1:-1],o=h.side(!n,t));let a=n==(h.dir==t),f=fe(s.text,o,a);if($r=s.text.slice(Math.min(o,f),Math.max(o,f)),f!=h.side(n,t))return O.cursor(f+s.from,a?-1:1,h.level);let c=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return!c&&h.level!=t?O.cursor(n?s.to:s.from,n?-1:1,t):c&&c.level<h.level?O.cursor(c.side(!n,t)+s.from,0,c.level):O.cursor(f+s.from,0,h.level)}function Dh(s,e,t=1){let i=s.charCategorizer(e),n=s.doc.lineAt(e),r=e-n.from;if(n.length==0)return O.cursor(e);r==0?t=1:r==n.length&&(t=-1);let o=r,l=r;t<0?o=fe(n.text,r,!1):l=fe(n.text,r);let h=i(n.text.slice(o,l));for(;o>0;){let a=fe(n.text,o,!1);if(i(n.text.slice(a,o))!=h)break;o=a}for(;l<n.length;){let a=fe(n.text,l);if(i(n.text.slice(l,a))!=h)break;l=a}return O.range(o+n.from,l+n.from)}function Eh(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function $h(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function Sn(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function Lr(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function Rr(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function Pn(s,e,t){let i,n,r,o,l,h,a,f;for(let d=s.firstChild;d;d=d.nextSibling){let p=fn(d);for(let m=0;m<p.length;m++){let y=p[m];n&&Sn(n,y)&&(y=Lr(Rr(y,n.bottom),n.top));let k=Eh(e,y),x=$h(t,y);if(k==0&&x==0)return d.nodeType==3?Br(d,e,t):Pn(d,e,t);(!i||o>x||o==x&&r>k)&&(i=d,n=y,r=k,o=x),k==0?t>y.bottom&&(!a||a.bottom<y.bottom)?(l=d,a=y):t<y.top&&(!f||f.top>y.top)&&(h=d,f=y):a&&Sn(a,y)?a=Rr(a,y.bottom):f&&Sn(f,y)&&(f=Lr(f,y.top))}}if(a&&a.bottom>=t?(i=l,n=a):f&&f.top<=t&&(i=h,n=f),!i)return{node:s,offset:0};let c=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Br(i,c,t);if(!r&&i.contentEditable=="true")return Pn(i,c,t);let u=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:s,offset:u}}function Br(s,e,t){let i=s.nodeValue.length,n=an();for(let r=0;r<i;r++){n.setEnd(s,r+1),n.setStart(s,r);let o=n.getClientRects();for(let l=0;l<o.length;l++){let h=o[l];if(h.top!=h.bottom&&h.left-1<=e&&h.right+1>=e&&h.top-1<=t&&h.bottom+1>=t){let a=e>=(h.left+h.right)/2,f=a;return(v.chrome||v.gecko)&&(n.setEnd(s,r),n.getBoundingClientRect().left==h.right&&(f=!a)),{node:s,offset:r+(f?1:0)}}}}return{node:s,offset:0}}function Nr(s,{x:e,y:t},i=-1){let n=s.contentDOM.getBoundingClientRect(),r,o=s.defaultLineHeight/2;for(let u=!1;;){if(r=s.blockAtHeight(t,n.top),r.top>t||r.bottom<t){if(i=r.top>t?-1:1,t=Math.min(r.bottom-o,Math.max(r.top+o,t)),u)return-1;u=!0}if(r.type==H.Text)break;t=i>0?r.bottom+o:r.top-o}let l=r.from;if(l<s.viewport.from)return s.viewport.from==0?0:null;if(l>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:null;e=Math.max(n.left+1,Math.min(n.right-1,e));let h=s.root,a=h.elementFromPoint(e,t),f,c=-1;if(a&&s.contentDOM.contains(a)&&!(s.docView.nearest(a)instanceof Ce)){if(h.caretPositionFromPoint){let u=h.caretPositionFromPoint(e,t);u&&({offsetNode:f,offset:c}=u)}else if(h.caretRangeFromPoint){let u=h.caretRangeFromPoint(e,t);u&&({startContainer:f,startOffset:c}=u)}}if(!f||!s.docView.dom.contains(f)){let u=le.find(s.docView,l);({node:f,offset:c}=Pn(u.dom,e,t))}return s.docView.posFromDOM(f,c)}function Lh(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=!i||!s.lineWrapping?null:s.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let h=s.dom.getBoundingClientRect(),a=s.posAtCoords({x:t==(s.textDirection==E.LTR)?h.right-1:h.left+1,y:(r.top+r.bottom)/2});if(a!=null)return O.cursor(a,t?-1:1)}let o=le.find(s.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?n.to:n.from;return O.cursor(l,t?-1:1)}function Qr(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=s.bidiSpans(n);for(let o=e,l=null;;){let h=Mh(n,r,s.textDirection,o,t),a=$r;if(!h){if(n.number==(t?s.state.doc.lines:1))return o;a=`
`,n=s.state.doc.line(n.number+(t?1:-1)),r=s.bidiSpans(n),h=O.cursor(t?n.from:n.to)}if(l){if(!l(a))return o}else{if(!i)return h;l=i(a)}o=h}}function Rh(s,e,t){let i=s.state.charCategorizer(e),n=i(t);return r=>{let o=i(r);return n==Ae.Space&&(n=o),n==o}}function Bh(s,e,t,i){var n;let r=e.head,o=t?1:-1;if(r==(t?s.state.doc.length:0))return O.cursor(r);let l=s.coordsAtPos(r);if(l){let y=s.dom.getBoundingClientRect(),k=(n=e.goalColumn)!==null&&n!==void 0?n:l.left-y.left,x=y.left+k,B=i!=null?i:5;for(let T=o<0?l.top:l.bottom,X=0;X<50;X+=10){let D=Nr(s,{x,y:T+(B+X)*o},o);if(D==null)break;if(D!=r)return O.cursor(D,void 0,void 0,k)}}let{doc:h}=s.state,a=h.lineAt(r),f=s.state.tabSize,c=e.goalColumn,u=0;if(c==null){for(let y=h.iterRange(a.from,r);!y.next().done;)u=Je(y.value,u,f);c=u*s.defaultCharacterWidth}else u=Math.round(c/s.defaultCharacterWidth);if(o<0&&a.from==0)return O.cursor(0);if(o>0&&a.to==h.length)return O.cursor(a.to);let d=h.line(a.number+o),p=d.from,m=0;for(let y=h.iterRange(d.from,d.to);m>=u&&!y.next().done;){let{offset:k,leftOver:x}=ws(y.value,m,u,f);m=u-x,p+=k}return O.cursor(p,void 0,void 0,c)}var Xr=class{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in te){let i=te[t];e.contentDOM.addEventListener(t,n=>{!_r(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.screenKeyEvent(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}e.contentDOM.addEventListener("keydown",t=>{e.inputState.lastKeyCode=t.keyCode,e.inputState.lastKeyTime=Date.now()}),this.notifiedFocused=e.hasFocus,this.ensureHandlers(e)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e){let t=this.customHandlers=e.pluginField(kr);for(let i of t)for(let n in i.handlers)this.registeredEvents.indexOf(n)<0&&n!="scroll"&&(this.registeredEvents.push(n),e.contentDOM.addEventListener(n,r=>{!_r(e,r)||this.runCustomHandlers(n,e,r)&&r.preventDefault()}))}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let r=n.handlers[e],o=!1;if(r){try{o=r.call(n.plugin,i,t)}catch(l){ot(t.state,l)}if(o||i.defaultPrevented)return v.android&&e=="keydown"&&i.keyCode==13&&t.observer.flushSoon(),!0}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(r){ot(e.state,r)}}}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:v.safari&&e.timeStamp-this.compositionEndedAt<500?(this.compositionEndedAt=0,!0):!1:!1}screenKeyEvent(e,t){let i=t.keyCode==9&&Date.now()<this.lastEscPress+2e3;return t.keyCode==27?this.lastEscPress=Date.now():Vr.indexOf(t.keyCode)<0&&(this.lastEscPress=0),i}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"}startMouseSelection(e,t,i){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=new Ir(this,e,t,i)}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.lastKeyCode=this.lastSelectionTime=0}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}},Vr=[16,17,18,20,91,92,224,225],Ir=class{constructor(e,t,i,n){this.inputState=e,this.view=t,this.startEvent=i,this.style=n;let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=t.state.facet(M.allowMultipleSelections)&&Nh(t,i),this.dragMove=Qh(t,i),this.dragging=Xh(t,i)?null:!1,this.dragging===!1&&(i.preventDefault(),this.select(i))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(e)}up(e){this.dragging==null&&this.select(this.startEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,annotations:P.userEvent.of("pointerselection"),scrollIntoView:!0})}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)}};function Nh(s,e){let t=s.state.facet(gr);return t.length?t[0](e):v.mac?e.metaKey:e.ctrlKey}function Qh(s,e){let t=s.state.facet(mr);return t.length?t[0](e):v.mac?!e.altKey:!e.ctrlKey}function Xh(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=ke(s.root);if(i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function _r(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=K.get(t))&&i.ignoreEvent(e))return!1;return!0}var te=Object.create(null),jr=v.ie&&v.ie_version<15||v.ios&&v.webkit_version<604;function Vh(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),zr(s,t.value)},50)}function zr(s,e){let{state:t}=s,i,n=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;An&&t.selection.ranges.every(h=>h.empty)&&An==r.toString()?i={changes:t.selection.ranges.map(h=>t.doc.lineAt(h.from)).filter((h,a,f)=>a==0||f[a-1]!=h).map(h=>({from:h.from,insert:(o?r.line(n++).text:e)+t.lineBreak}))}:o?i=t.changeByRange(h=>{let a=r.line(n++);return{changes:{from:h.from,to:h.to,insert:a.text},range:O.cursor(h.from+a.length)}}):i=t.replaceSelection(r),s.dispatch(i,{annotations:P.userEvent.of("paste"),scrollIntoView:!0})}function Ih(s){let e=(s.ctrlKey?1:0)|(s.metaKey?8:0)|(s.altKey?2:0)|(s.shiftKey?4:0),t=s.keyCode,i=v.mac&&e==1;return t==8||i&&t==72||t==46||i&&t==68||t==27||e==(v.mac?8:1)&&(t==66||t==73||t==89||t==90)}te.keydown=(s,e)=>{Ih(e)&&e.preventDefault(),s.inputState.setSelectionOrigin("keyboardselection")};te.touchdown=te.touchmove=s=>{s.inputState.setSelectionOrigin("pointerselection")};te.mousedown=(s,e)=>{let t=null;for(let i of s.state.facet(yr))if(t=i(s,e),t)break;!t&&e.button==0&&(t=_h(s,e)),t&&(s.root.activeElement!=s.contentDOM&&s.observer.ignore(()=>Js(s.contentDOM)),s.inputState.startMouseSelection(s,e,t))};function Fr(s,e,t,i){if(i==1)return O.cursor(e,t);if(i==2)return Dh(s.state,e,t);{let n=le.find(s.docView,e);if(n)return O.range(n.posAtStart,n.posAtEnd);let{from:r,to:o}=s.state.doc.lineAt(e);return O.range(r,o)}}var Wr=(s,e)=>s>=e.top&&s<=e.bottom,qr=(s,e,t)=>Wr(e,t)&&s>=t.left&&s<=t.right;function jh(s,e,t,i){let n=le.find(s.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&qr(t,i,o))return-1;let l=n.coordsAt(r,1);return l&&qr(t,i,l)?1:o&&Wr(i,o)?-1:1}function Hr(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY});return t==null?null:{pos:t,bias:jh(s,t,e.clientX,e.clientY)}}var zh=v.ie&&v.ie_version<=11,Ur=null,Gr=0;function Fh(s){if(!zh)return s.detail;let e=Ur;return Ur=s,Gr=!e||e.timeStamp>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(Gr+1)%3:1}function _h(s,e){let t=Hr(s,e),i=Fh(e),n=s.state.selection,r=t,o=e;return{update(l){l.changes&&(t&&(t.pos=l.changes.mapPos(t.pos)),n=n.map(l.changes))},get(l,h,a){let f;if(l.clientX==o.clientX&&l.clientY==o.clientY?f=r:(f=r=Hr(s,l),o=l),!f||!t)return n;let c=Fr(s,f.pos,f.bias,i);if(t.pos!=f.pos&&!h){let u=Fr(s,t.pos,t.bias,i),d=Math.min(u.from,c.from),p=Math.max(u.to,c.to);c=d<c.from?O.range(d,p):O.range(p,d)}return h?n.replaceRange(n.main.extend(c.from,c.to)):a?n.addRange(c):O.create([c])}}}te.dragstart=(s,e)=>{let{selection:{main:t}}=s.state,{mouseSelection:i}=s.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};te.drop=(s,e)=>{if(!e.dataTransfer)return;let t=s.posAtCoords({x:e.clientX,y:e.clientY}),i=e.dataTransfer.getData("Text");if(t==null||!i)return;e.preventDefault();let{mouseSelection:n}=s.inputState,r=n&&n.dragging&&n.dragMove?{from:n.dragging.from,to:n.dragging.to}:null,o={from:t,insert:i},l=s.state.changes(r?[r,o]:o);s.focus(),s.dispatch({changes:l,selection:{anchor:l.mapPos(t,-1),head:l.mapPos(t,1)},annotations:P.userEvent.of("drop")})};te.paste=(s,e)=>{s.observer.flush();let t=jr?null:e.clipboardData,i=t&&t.getData("text/plain");i?(zr(s,i),e.preventDefault()):Vh(s)};function Wh(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function qh(s){let e=[],t=[],i=!1;for(let n of s.selection.ranges)n.empty||(e.push(s.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),n=o.number}i=!0}return{text:e.join(s.lineBreak),ranges:t,linewise:i}}var An=null;te.copy=te.cut=(s,e)=>{let{text:t,ranges:i,linewise:n}=qh(s.state);if(!t)return;An=n?t:null;let r=jr?null:e.clipboardData;r?(e.preventDefault(),r.clearData(),r.setData("text/plain",t)):Wh(s,t),e.type=="cut"&&s.dispatch({changes:i,scrollIntoView:!0,annotations:P.userEvent.of("cut")})};te.focus=te.blur=s=>{setTimeout(()=>{s.hasFocus!=s.inputState.notifiedFocused&&s.update([])},10)};te.beforeprint=s=>{s.viewState.printing=!0,s.requestMeasure(),setTimeout(()=>{s.viewState.printing=!1,s.requestMeasure()},2e3)};function Yr(s){s.docView.compositionDeco.size&&s.update([])}te.compositionstart=te.compositionupdate=s=>{s.inputState.composing<0&&(s.docView.compositionDeco.size&&(s.observer.flush(),Yr(s)),s.inputState.composing=0)};te.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),setTimeout(()=>{s.inputState.composing<0&&Yr(s)},50)};var Kr=["pre-wrap","normal","pre-line"],Zr=class{constructor(){this.doc=S.empty,this.lineWrapping=!1,this.direction=E.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefresh(e,t,i){let n=!1;for(let r=0;r<e.length;r++){let o=e[r];o<0?r++:this.heightSamples[Math.floor(o*10)]||(n=!0,this.heightSamples[Math.floor(o*10)]=!0)}return n||Kr.indexOf(t)>-1!=this.lineWrapping||this.direction!=i}refresh(e,t,i,n,r,o){let l=Kr.indexOf(e)>-1,h=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=l||this.direction!=t;if(this.lineWrapping=l,this.direction=t,this.lineHeight=i,this.charWidth=n,this.lineLength=r,h){this.heightSamples={};for(let a=0;a<o.length;a++){let f=o[a];f<0?a++:this.heightSamples[Math.floor(f*10)]=!0}}return h}},Jr=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},Ie=class{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this.type=r}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Ie(this.from,this.length+e.length,this.top,this.height+e.height,t)}},R;(function(s){s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight"})(R||(R={}));var Hh=1e-4,he=class{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&~2}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Hh&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return he.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this;for(let o=n.length-1;o>=0;o--){let{fromA:l,toA:h,fromB:a,toB:f}=n[o],c=r.lineAt(l,R.ByPosNoHeight,t,0,0),u=c.to>=h?c:r.lineAt(h,R.ByPosNoHeight,t,0,0);for(f+=u.to-h,h=u.to;o>0&&c.from<=n[o-1].toA;)l=n[o-1].fromA,a=n[o-1].fromB,o--,l<c.from&&(c=r.lineAt(l,R.ByPosNoHeight,t,0,0));a+=c.from-l,l=c.from;let d=ki.build(i,e,a,f);r=r.replace(l,h,d)}return r.updateHeight(i,0)}static empty(){return new ae(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new eo(he.of(e.slice(0,t)),o,he.of(e.slice(i)))}};he.prototype.size=1;var Cn=class extends he{constructor(e,t,i){super(e,t);this.type=i}blockAt(e,t,i,n){return new Ie(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,o){o(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},ae=class extends Cn{constructor(e,t){super(e,t,H.Text);this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof ae||n instanceof Z&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Z?n=new ae(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):he.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Z=class extends he{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:r,lastLine:o,lineHeight:l}=this.lines(t,n),h=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:a,length:f}=t.line(r+h);return new Ie(a,f,i+l*h,l,H.Text)}lineAt(e,t,i,n,r){if(t==R.ByHeight)return this.blockAt(e,i,n,r);if(t==R.ByPosNoHeight){let{from:c,to:u}=i.lineAt(e);return new Ie(c,u-c,0,0,H.Text)}let{firstLine:o,lineHeight:l}=this.lines(i,r),{from:h,length:a,number:f}=i.lineAt(e);return new Ie(h,a,n+l*(f-o),l,H.Text)}forEachLine(e,t,i,n,r,o){let{firstLine:l,lineHeight:h}=this.lines(i,r);for(let a=Math.max(e,r),f=Math.min(r+this.length,t);a<=f;){let c=i.lineAt(a);a==e&&(n+=h*(c.number-l)),o(new Ie(c.from,c.length,n,n+=h,H.Text)),a=c.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let r=i[i.length-1];r instanceof Z?i[i.length-1]=new Z(r.length+n):i.push(null,new Z(n-1))}if(e>0){let r=i[0];r instanceof Z?i[0]=new Z(e+r.length):i.unshift(new Z(e-1),null)}return he.of(i)}decomposeLeft(e,t){t.push(new Z(e-1),null)}decomposeRight(e,t){t.push(null,new Z(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from);for(n.from>t&&o.push(new Z(n.from-t-1).updateHeight(e,t));l<=r&&n.more;){let h=e.doc.lineAt(l).length;o.length&&o.push(null);let a=new ae(h,n.heights[n.index++]);a.outdated=!1,o.push(a),l+=h+1}return l<=r&&o.push(null,new Z(r-l).updateHeight(e,l)),e.heightChanged=!0,he.of(o)}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},eo=class extends he{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0));this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let r=i+this.left.height;return e<r||this.right.height==0?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,h=t==R.ByHeight?e<o||this.right.height==0:e<l,a=h?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,o,l);if(this.break||(h?a.to<l:a.from>l))return a;let f=t==R.ByPosNoHeight?R.ByPosNoHeight:R.ByPos;return h?a.join(this.right.lineAt(l,f,i,o,l)):this.left.lineAt(l,f,i,n,r).join(a)}forEachLine(e,t,i,n,r,o){let l=n+this.left.height,h=r+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,i,n,r,o),t>=h&&this.right.forEachLine(e,t,i,l,h,o);else{let a=this.lineAt(h,R.ByPos,i,n,r);e<a.from&&this.left.forEachLine(e,a.from-1,i,n,r,o),a.to>=e&&a.from<=t&&o(a),t>a.to&&this.right.forEachLine(a.to+1,t,i,l,h,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&to(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),to(r,l)}return he.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?he.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:o}=this,l=t+r.length+this.break,h=null;return n&&n.from<=t+r.length&&n.more?h=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?h=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),h?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function to(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof Z&&(i=s[e+1])instanceof Z&&s.splice(e-1,3,new Z(t.length+1+i.length))}var Uh=5,ki=class{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof ae?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ae(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?Math.max(0,i.widget.estimatedHeight):0,r=t-e;i.block?this.addBlock(new Cn(r,n,i.type)):(r||n>=Uh)&&this.addLineDeco(n,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ae(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Z(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ae)return e;let t=new ae(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==H.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=H.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ae)&&!this.isCovered?this.nodes.push(new ae(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof ae&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let r=new ki(i,e);return A.spans(t,i,n,r,0),r.finish(i)}};function Gh(s,e,t){let i=new io;return A.compare(s,e,t,i,0),i.changes}var io=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&yn(e,t,this.changes,5)}};function Yh(s,e){let t=s.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),r=Math.max(0,t.top),o=Math.min(innerHeight,t.bottom);for(let l=s.parentNode;l;)if(l.nodeType==1){if((l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth)&&window.getComputedStyle(l).overflow!="visible"){let h=l.getBoundingClientRect();i=Math.max(i,h.left),n=Math.min(n,h.right),r=Math.max(r,h.top),o=Math.min(o,h.bottom)}l=l.parentNode}else if(l.nodeType==11)l=l.host;else break;return{left:i-t.left,right:n-t.left,top:r-(t.top+e),bottom:o-(t.top+e)}}var Ft=class{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e){return L.replace({widget:new no(this.size,e)}).range(this.from,this.to)}},no=class extends It{constructor(e,t){super();this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},Tn=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentWidth=0,this.heightOracle=new Zr,this.scaler=oo,this.scrollTo=null,this.printing=!1,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=he.empty().applyChanges(e.facet(lt),S.empty,this.heightOracle.setDoc(e.doc),[new Te(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=L.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineAt(n,0);e.push(new St(r,o))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?oo:new lo(this.heightOracle.doc,this.heightMap,this.viewports)}update(e,t=null){let i=this.state;this.state=e.state;let n=this.state.facet(lt),r=e.changedRanges,o=Te.extendWithRanges(r,Gh(e.startState.facet(lt),n,e?e.changes:Y.empty(this.state.doc.length))),l=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(n,i.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=l&&(e.flags|=2);let h=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.head<h.from||t.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t)),h.eq(this.viewport)||(this.viewport=h,e.flags|=4),this.updateForViewport(),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(e.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes)))),this.computeVisibleRanges(),t&&(this.scrollTo=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e,t){let i=e.dom,n="",r=E.LTR;if(!t){let p=window.getComputedStyle(i);n=p.whiteSpace,r=p.direction=="rtl"?E.RTL:E.LTR,this.paddingTop=parseInt(p.paddingTop)||0,this.paddingBottom=parseInt(p.paddingBottom)||0}let o=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:Yh(i,this.paddingTop),l=o.top-this.pixelViewport.top,h=o.bottom-this.pixelViewport.bottom;if(this.pixelViewport=o,this.inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left,!this.inView)return 0;let a=e.measureVisibleLineHeights(),f=!1,c=0,u=0,d=this.heightOracle;if(!t){let p=e.dom.clientWidth;if(d.mustRefresh(a,n,r)||d.lineWrapping&&Math.abs(p-this.contentWidth)>d.charWidth){let{lineHeight:m,charWidth:y}=e.measureTextSize();f=d.refresh(n,r,m,y,p/y,a),f&&(e.minWidth=0,u|=16)}this.contentWidth!=p&&(this.contentWidth=p,u|=16),l>0&&h>0?c=Math.max(l,h):l<0&&h<0&&(c=Math.min(l,h))}if(d.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(d,0,f,new Jr(this.viewport.from,a)),d.heightChanged&&(u|=2),!this.viewportIsAppropriate(this.viewport,c)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to)){let p=this.getViewport(c,this.scrollTo);(p.from!=this.viewport.from||p.to!=this.viewport.to)&&(this.viewport=p,u|=4)}return this.updateForViewport(),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(u|=this.updateLineGaps(this.ensureLineGaps(f?[]:this.lineGaps))),this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top,0)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom,0)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.state.doc,{visibleTop:o,visibleBottom:l}=this,h=new St(n.lineAt(o-i*1e3,R.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,R.ByHeight,r,0,0).to);if(t){if(t.head<h.from){let{top:a}=n.lineAt(t.head,R.ByPos,r,0,0);h=new St(n.lineAt(a-1e3/2,R.ByHeight,r,0,0).from,n.lineAt(a+(l-o)+1e3/2,R.ByHeight,r,0,0).to)}else if(t.head>h.to){let{bottom:a}=n.lineAt(t.head,R.ByPos,r,0,0);h=new St(n.lineAt(a-(l-o)-1e3/2,R.ByHeight,r,0,0).from,n.lineAt(a+1e3/2,R.ByHeight,r,0,0).to)}}return h}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new St(this.heightMap.lineAt(i,R.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,R.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){let{top:n}=this.heightMap.lineAt(e,R.ByPos,this.state.doc,0,0),{bottom:r}=this.heightMap.lineAt(t,R.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Ft(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];return this.heightOracle.direction!=E.LTR||this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,i=>{if(i.length<1e4)return;let n=Kh(i.from,i.to,this.state);if(n.total<1e4)return;let r,o;if(this.heightOracle.lineWrapping)i.from!=this.viewport.from?r=i.from:r=wi(n,(this.visibleTop-i.top)/i.height),i.to!=this.viewport.to?o=i.to:o=wi(n,(this.visibleBottom-i.top)/i.height);else{let f=n.total*this.heightOracle.charWidth;r=wi(n,this.pixelViewport.left/f),o=wi(n,this.pixelViewport.right/f)}let l=this.state.selection.main;l.from<=r&&l.to>=i.from&&(r=l.from),l.from<=i.to&&l.to>=o&&(o=l.to);let h=r-1e4,a=o+1e4;h>i.from+5e3&&t.push(ro(e,f=>f.from==i.from&&f.to>h-5e3&&f.to<h+5e3)||new Ft(i.from,h,this.gapSize(i,h,!0,n))),a<i.to-5e3&&t.push(ro(e,f=>f.to==i.to&&f.from>a-5e3&&f.from<a+5e3)||new Ft(a,i.to,this.gapSize(i,a,!1,n)))}),t}gapSize(e,t,i,n){if(this.heightOracle.lineWrapping){let r=e.height*so(n,t);return i?r:e.height-r}else{let r=so(n,t);return n.total*this.heightOracle.charWidth*(i?r:1-r)}}updateLineGaps(e){return Ft.same(e,this.lineGaps)?0:(this.lineGaps=e,this.lineGapDeco=L.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))),8)}computeVisibleRanges(){let e=this.state.facet(lt);this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];A.spans(e,this.viewport.from,this.viewport.to,{span(i,n){t.push({from:i,to:n})},point(){}},20),this.visibleRanges=t}lineAt(e,t){return t+=this.paddingTop,Wt(this.heightMap.lineAt(e,R.ByPos,this.state.doc,t,0),this.scaler,t)}lineAtHeight(e,t){return t+=this.paddingTop,Wt(this.heightMap.lineAt(this.scaler.fromDOM(e,t),R.ByHeight,this.state.doc,t,0),this.scaler,t)}blockAtHeight(e,t){return t+=this.paddingTop,Wt(this.heightMap.blockAt(this.scaler.fromDOM(e,t),this.state.doc,t,0),this.scaler,t)}forEachLine(e,t,i,n){return n+=this.paddingTop,this.heightMap.forEachLine(e,t,this.state.doc,n,0,this.scaler.scale==1?i:r=>i(Wt(r,this.scaler,n)))}get contentHeight(){return this.domHeight+this.paddingTop+this.paddingBottom}get domHeight(){return this.scaler.toDOM(this.heightMap.height,this.paddingTop)}},St=class{constructor(e,t){this.from=e,this.to=t}eq(e){return this.from==e.from&&this.to==e.to}};function Kh(s,e,t){let i=[],n=s,r=0;return A.spans(t.facet(lt),s,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function wi({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function so(s,e){let t=0;for(let{from:i,to:n}of s.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/s.total}function ro(s,e){for(let t of s)if(e(t))return t}var oo={toDOM(s){return s},fromDOM(s){return s},scale:1},lo=class{constructor(e,t,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:h})=>{let a=t.lineAt(l,R.ByPos,e,0,0).top,f=t.lineAt(h,R.ByPos,e,0,0).bottom;return n+=f-a,{from:l,to:h,top:a,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e,t){e-=t;for(let i=0,n=0,r=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||e<o.top)return r+(e-n)*this.scale+t;if(e<=o.bottom)return o.domTop+(e-o.top)+t;n=o.bottom,r=o.domBottom}}fromDOM(e,t){e-=t;for(let i=0,n=0,r=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||e<o.domTop)return n+(e-r)/this.scale+t;if(e<=o.domBottom)return o.top+(e-o.domTop)+t;n=o.bottom,r=o.domBottom}}};function Wt(s,e,t){if(e.scale==1)return s;let i=e.toDOM(s.top,t),n=e.toDOM(s.bottom,t);return new Ie(s.from,s.length,i,n-i,Array.isArray(s.type)?s.type.map(r=>Wt(r,e,t)):s.type)}var Zh={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},Mn=v.ie&&v.ie_version<=11,ho=class{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.ignoreSelection=new Zs,this.delayedFlush=-1,this.queue=[],this.scrollTargets=[],this.intersection=null,this.intersecting=!1,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);v.ie&&v.ie_version<=11&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Mn&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=n=>{if(this.view.root.activeElement!=this.dom)return;let r=ke(this.view.root),o=r.anchorNode&&this.view.docView.nearest(r.anchorNode);o&&o.ignoreEvent(n)||(v.ie&&v.ie_version<=11&&!this.view.state.selection.main.empty&&r.focusNode&&cn(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush())},this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom)),this.listenForScroll()}onScroll(e){this.intersecting&&(this.flush(),this.onScrollChanged(e))}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Zh),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),Mn&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),Mn&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clearSelection(){this.ignoreSelection.set(ke(this.view.root))}clear(){this.observer.takeRecords(),this.queue.length=0,this.clearSelection()}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}flush(){if(this.delayedFlush>=0)return;let e=this.queue;for(let h of this.observer.takeRecords())e.push(h);e.length&&(this.queue=[]);let t=ke(this.view.root),i=!this.ignoreSelection.eq(t)&&Ys(this.dom,t);if(e.length==0&&!i)return;let n=-1,r=-1,o=!1;for(let h of e){let a=this.readMutation(h);!a||(a.typeOver&&(o=!0),n==-1?{from:n,to:r}=a:(n=Math.min(a.from,n),r=Math.max(a.to,r)))}let l=this.view.state;(n>-1||i)&&this.onChange(n,r,o),this.view.state==l&&(this.view.docView.dirty&&(this.ignore(()=>this.view.docView.sync()),this.view.docView.dirty=0),this.view.docView.updateSelection()),this.clearSelection()}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(),e.type=="childList"){let i=ao(t,e.previousSibling||e.target.previousSibling,-1),n=ao(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}destroy(){this.stop(),this.intersection&&this.intersection.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),clearTimeout(this.parentCheck)}};function ao(s,e,t){for(;e;){let i=K.get(e);if(i&&i.parent==s)return i;let n=e.parentNode;e=n!=s.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function ia(s,e,t,i){let n,r,o=s.state.selection.main,l;if(e>-1&&(l=s.docView.domBoundsAround(e,t,0))){let{from:h,to:a}=l,f=s.docView.impreciseHead||s.docView.impreciseAnchor?[]:ea(s.contentDOM,s.root),c=new fo(f,s);c.readRange(l.startDOM,l.endDOM),r=ta(f,h);let u=o.from,d=null;(s.inputState.lastKeyCode===8&&s.inputState.lastKeyTime>Date.now()-100||v.android&&c.text.length<a-h)&&(u=o.to,d="end");let p=Jh(s.state.sliceDoc(h,a),c.text,u-h,d);p&&(n={from:h+p.from,to:h+p.toA,insert:s.state.toText(c.text.slice(p.from,p.toB))})}else if(s.hasFocus){let h=ke(s.root),{impreciseHead:a,impreciseAnchor:f}=s.docView,c=a&&a.node==h.focusNode&&a.offset==h.focusOffset?s.state.selection.main.head:s.docView.posFromDOM(h.focusNode,h.focusOffset),u=f&&f.node==h.anchorNode&&f.offset==h.anchorOffset?s.state.selection.main.anchor:fh(h)?c:s.docView.posFromDOM(h.anchorNode,h.anchorOffset);(c!=o.head||u!=o.anchor)&&(r=O.single(u,c))}if(!(!n&&!r)){if(!n&&i&&!o.empty&&r&&r.main.empty&&(n={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,o.to)}),n){let h=s.state;if(v.android&&(n.from==o.from&&n.to==o.to&&n.insert.length==1&&n.insert.lines==2&&Dn(s,"Enter",10)||n.from==o.from-1&&n.to==o.to&&n.insert.length==0&&Dn(s,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&n.insert.length==0&&Dn(s,"Delete",46)))return;let a=n.insert.toString();if(s.state.facet(br).some(c=>c(s,n.from,n.to,a)))return;s.inputState.composing>=0&&s.inputState.composing++;let f;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3){let c=o.from<n.from?h.sliceDoc(o.from,n.from):"",u=o.to>n.to?h.sliceDoc(n.to,o.to):"";f=h.replaceSelection(s.state.toText(c+n.insert.sliceString(0,void 0,s.state.lineBreak)+u))}else{let c=h.changes(n);f={changes:c,selection:r&&!h.selection.main.eq(r.main)&&r.main.to<=c.newLength?h.selection.replaceRange(r.main):void 0}}s.dispatch(f,{scrollIntoView:!0,annotations:P.userEvent.of("input")})}else if(r&&!r.main.eq(o)){let h=!1,a;s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="keyboardselection"?h=!0:a=P.userEvent.of(s.inputState.lastSelectionOrigin)),s.dispatch({selection:r,scrollIntoView:h,annotations:a})}}}function Jh(s,e,t,i){let n=Math.min(s.length,e.length),r=0;for(;r<n&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let h=Math.max(0,r-Math.min(o,l));t-=o+h-r}return o<r&&s.length<e.length?(r-=t<=r&&t>=o?r-t:0,l=r+(l-o),o=r):l<r&&(r-=t<=r&&t>=l?r-t:0,o=r+(o-l),l=r),{from:r,toA:o,toB:l}}var fo=class{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineBreak=t.state.lineBreak}readRange(e,t){if(!e)return;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let r=n.nextSibling;if(r==t)break;let o=K.get(n),l=K.get(r);((o?o.breakAfter:co(n))||(l?l.breakAfter:co(r))&&!(n.nodeName=="BR"&&!n.cmIgnore))&&(this.text+=this.lineBreak),n=r}this.findPointBefore(i,t)}readNode(e){if(e.cmIgnore)return;let t=K.get(e),i=t&&t.overrideDOMText,n;i!=null?n=i.sliceString(0,void 0,this.lineBreak):e.nodeType==3?n=e.nodeValue:e.nodeName=="BR"?n=e.nextSibling?this.lineBreak:"":e.nodeType==1&&this.readRange(e.firstChild,null),n!=null&&(this.findPointIn(e,n.length),this.text+=n,v.chrome&&this.view.inputState.lastKeyCode==13&&!e.nextSibling&&/\n\n$/.test(this.text)&&(this.text=this.text.slice(0,-1)))}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointIn(e,t){for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t))}};function co(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}var En=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}};function ea(s,e){let t=[];if(e.activeElement!=s)return t;let{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:o}=ke(e);return i&&(t.push(new En(i,n)),(r!=i||o!=n)&&t.push(new En(r,o))),t}function ta(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?O.single(t+e,i+e):null}function Dn(s,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);s.contentDOM.dispatchEvent(n);let r=new KeyboardEvent("keyup",i);return s.contentDOM.dispatchEvent(r),n.defaultPrevented||r.defaultPrevented}var C=class{constructor(e={}){this.plugins=[],this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.className=ee("scroller"),this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||document,this.viewState=new Tn(e.state||M.create()),this.plugins=this.state.facet(jt).map(t=>new Ve(t).update(this)),this.observer=new ho(this,(t,i,n)=>{ia(this,t,i,n)},t=>{this.inputState.runScrollHandlers(this,t),this.measure()}),this.inputState=new Xr(this),this.docView=new vn(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,sa(),this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof P?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i;this.updateState=2;try{let n=this.state;for(let o of e){if(o.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=o.state}i=new wn(this,n,e);let r=e.some(o=>o.scrollIntoView)?n.selection.main:null;this.viewState.update(i,r),this.bidiCache=qt.update(this.bidiCache,i.changes),i.empty||this.updatePlugins(i),t=this.docView.update(i),this.state.facet(zt)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(e)}finally{this.updateState=0}if((t||scrollTo||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure(),!i.empty)for(let n of this.state.facet(xn))n(i)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");this.updateState=2;try{for(let t of this.plugins)t.destroy(this);this.viewState=new Tn(e),this.plugins=e.facet(jt).map(t=>new Ve(t).update(this)),this.docView=new vn(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(jt),i=e.state.facet(jt);if(t!=i){let n=[];for(let r of i){let o=t.indexOf(r);if(o<0)n.push(new Ve(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.inputState.ensureHandlers(this)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n]=this.plugins[n].update(this)}measure(){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=-1;let e=null;try{for(let t=0;;t++){this.updateState=1;let i=this.viewState.measure(this.docView,t>0),n=this.measureRequests;if(!i&&!n.length&&this.viewState.scrollTo==null)break;if(this.measureRequests=[],t>5){console.warn("Viewport failed to stabilize");break}let r=n.map(l=>{try{return l.read(this)}catch(h){return ot(this.state,h),uo}}),o=new wn(this,this.state);o.flags|=i,e?e.flags|=i:e=o,this.updateState=2,o.empty||this.updatePlugins(o),this.updateAttrs(),i&&this.docView.update(o);for(let l=0;l<n.length;l++)if(r[l]!=uo)try{n[l].write(r[l],this)}catch(h){ot(this.state,h)}if(this.viewState.scrollTo&&(this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc),this.viewState.scrollTo=null),!(i&4)&&this.measureRequests.length==0)break}}finally{this.updateState=0}if(this.measureScheduled=-1,e&&!e.empty)for(let t of this.state.facet(xn))t(e)}get themeClasses(){return bi+" "+(this.state.facet(cr)?"cm-dark":"cm-light")+" "+this.state.facet(fr)}updateAttrs(){let e=Vt(this.state.facet(wr),{class:ee("wrap")+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});mn(this.dom,this.editorAttrs,e),this.editorAttrs=e;let t=Vt(this.state.facet(vr),{spellcheck:"false",contenteditable:String(this.state.facet(kn)),class:ee("content"),style:`${v.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"});mn(this.contentDOM,this.contentAttrs,t),this.contentAttrs=t}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(C.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(zt),Oe.mount(this.root,this.styleModules.concat(Oh).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure()}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}pluginField(e){let t=[];for(let i of this.plugins)i.update(this).takeField(e,t);return t}plugin(e){for(let t of this.plugins)if(t.spec==e)return t.update(this).value;return null}blockAtHeight(e,t){return this.readMeasured(),this.viewState.blockAtHeight(e,$n(t,this.contentDOM))}visualLineAtHeight(e,t){return this.readMeasured(),this.viewState.lineAtHeight(e,$n(t,this.contentDOM))}viewportLines(e,t){let{from:i,to:n}=this.viewport;this.viewState.forEachLine(i,n,e,$n(t,this.contentDOM))}visualLineAt(e,t=0){return this.viewState.lineAt(e,t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Qr(this,e,t,i)}moveByGroup(e,t){return Qr(this,e,t,i=>Rh(this,e.head,i))}moveToLineBoundary(e,t,i=!0){return Lh(this,e,t,i)}moveVertically(e,t,i){return Bh(this,e,t,i)}scrollPosIntoView(e){this.viewState.scrollTo=O.cursor(e),this.requestMeasure()}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e){return this.readMeasured(),Nr(this,e)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[ht.find(r,e-n.from,-1,t)];return dn(i,o.dir==E.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>na)return Er(e.length);let t=this.textDirection;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=Th(e.text,this.textDirection);return this.bidiCache.push(new qt(e.from,e.to,t,i)),i}get hasFocus(){return document.hasFocus()&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Js(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled)}static domEventHandlers(e){return ne.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Oe.newName(),n=[fr.of(i),zt.of(On(`.${bi}.${i}`,e))];return t&&t.dark&&n.push(cr.of(!0)),n}static baseTheme(e){return Nt.fallback(zt.of(On("."+bi,e)))}};C.styleModule=zt;C.inputHandler=br;C.exceptionSink=Or;C.updateListener=xn;C.editable=kn;C.mouseSelectionStyle=yr;C.dragMovesSelection=mr;C.clickAddsSelectionRange=gr;C.decorations=lt;C.lineWrapping=C.theme({$content:{whiteSpace:"pre-wrap"}});C.contentAttributes=vr;C.editorAttributes=wr;C.announce=re.define();var na=4096;function $n(s,e){return s==null?e.getBoundingClientRect().top:s}var Ln=-1;function sa(){window.addEventListener("resize",()=>{Ln==-1&&(Ln=setTimeout(ra,50))})}function ra(){Ln=-1;let s=document.querySelectorAll(".cm-content");for(let e=0;e<s.length;e++){let t=K.get(s[e]);t&&t.editorView.requestMeasure()}}var uo={},qt=class{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:E.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new qt(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}},oa=typeof navigator=="undefined"?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?"win":/Linux|X11/.test(navigator.platform)?"linux":"key";function la(s,e){let t=s.split(/-(?!$)/),i=t[t.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let h=0;h<t.length-1;++h){let a=t[h];if(/^(cmd|meta|m)$/i.test(a))l=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+a)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Rn(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}var fa=C.domEventHandlers({keydown(s,e){return aa(ha(e.state),s,e,"editor")}}),vi=w.define({enables:fa}),po=new WeakMap;function ha(s){let e=s.facet(vi),t=po.get(e);return t||po.set(e,t=ca(e.reduce((i,n)=>i.concat(n),[]))),t}var Ge=null,ua=4e3;function ca(s,e=oa){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let h=i[o];if(h==null)i[o]=l;else if(h!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,h,a)=>{let f=t[o]||(t[o]=Object.create(null)),c=l.split(/ (?!$)/).map(p=>la(p,e));for(let p=1;p<c.length;p++){let m=c.slice(0,p).join(" ");n(m,!0),f[m]||(f[m]={preventDefault:!0,commands:[y=>{let k=Ge={view:y,prefix:m,scope:o};return setTimeout(()=>{Ge==k&&(Ge=null)},ua),!0}]})}let u=c.join(" ");n(u,!1);let d=f[u]||(f[u]={preventDefault:!1,commands:[]});d.commands.push(h),a&&(d.preventDefault=!0)};for(let o of s){let l=o[e]||o.key;if(!!l)for(let h of o.scope?o.scope.split(" "):["editor"])r(h,l,o.run,o.preventDefault),o.shift&&r(h,"Shift-"+l,o.shift,o.preventDefault)}return t}function aa(s,e,t,i){let n=Ws(e),r=n.length==1&&n!=" ",o="",l=!1;Ge&&Ge.view==t&&Ge.scope==i&&(o=Ge.prefix+" ",(l=Vr.indexOf(e.keyCode)<0)&&(Ge=null));let h=c=>{if(c){for(let u of c.commands)if(u(t))return!0;c.preventDefault&&(l=!0)}return!1},a=s[i],f;if(a){if(h(a[o+Rn(n,e,!r)]))return!0;if(r&&(e.shiftKey||e.altKey||e.metaKey)&&(f=Xe[e.keyCode])&&f!=n){if(h(a[o+Rn(f,e,!0)]))return!0}else if(r&&e.shiftKey&&h(a[o+Rn(n,e,!0)]))return!0}return l}var go=!v.ios,Si=w.define({combine(s){return Ne(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});var Bn=class{constructor(e,t,i,n,r){this.left=e,this.top=t,this.width=i,this.height=n,this.className=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}},yc=ne.fromClass(class{constructor(s){this.view=s,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=s.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className=ee("selectionLayer"),this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=s.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className=ee("cursorLayer"),this.cursorLayer.setAttribute("aria-hidden","true"),s.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Si).cursorBlinkRate+"ms"}update(s){let e=s.startState.facet(Si)!=s.state.facet(Si);(e||s.selectionSet||s.geometryChanged||s.viewportChanged)&&this.view.requestMeasure(this.measureReq),s.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:s}=this.view,e=s.facet(Si),t=s.selection.ranges.map(n=>n.empty?[]:da(this.view,n)).reduce((n,r)=>n.concat(r)),i=[];for(let n of s.selection.ranges){let r=n==s.selection.main;if(n.empty?!r||go:e.drawRangeCursor){let o=pa(this.view,n,r);o&&i.push(o)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:s,cursors:e}){if(s.length!=this.rangePieces.length||s.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of s)this.selectionLayer.appendChild(t.draw());this.rangePieces=s}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(let i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,n)=>i.adjust(t[n]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),mo={$line:{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};go&&(mo.$line.caretColor="transparent !important");var Oc=Nt.override(C.theme(mo)),ga=ee("selectionBackground");function yo(s){let e=s.scrollDOM.getBoundingClientRect();return{left:e.left-s.scrollDOM.scrollLeft,top:e.top-s.scrollDOM.scrollTop}}function Oo(s,e,t){let i=O.cursor(e);return{from:Math.max(t.from,s.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,s.moveToLineBoundary(i,!0,!0).from)}}function da(s,e){if(e.to<=s.viewport.from||e.from>=s.viewport.to)return[];let t=Math.max(e.from,s.viewport.from),i=Math.min(e.to,s.viewport.to),n=s.textDirection==E.LTR,r=s.contentDOM,o=r.getBoundingClientRect(),l=yo(s),h=window.getComputedStyle(r.firstChild),a=o.left+parseInt(h.paddingLeft),f=o.right-parseInt(h.paddingRight),c=s.visualLineAt(t),u=s.visualLineAt(i);if(s.lineWrapping&&(c=Oo(s,t,c),u=Oo(s,i,u)),c.from==u.from)return p(m(e.from,e.to));{let y=m(e.from,null),k=m(null,e.to),x=[];return c.to<u.from-1?x.push(d(a,y.bottom,f,k.top)):y.bottom<k.top&&k.top-y.bottom<4&&(y.bottom=k.top=(y.bottom+k.top)/2),p(y).concat(x).concat(p(k))}function d(y,k,x,B){return new Bn(y-l.left,k-l.top,x-y,B-k,ga)}function p({top:y,bottom:k,horizontal:x}){let B=[];for(let T=0;T<x.length;T+=2)B.push(d(x[T],y,x[T+1],k));return B}function m(y,k){let x=1e9,B=-1e9,T=[];function X(N,_,Q,F,q){let I=s.coordsAtPos(N,1),W=s.coordsAtPos(Q,-1);x=Math.min(I.top,W.top,x),B=Math.max(I.bottom,W.bottom,B),q==E.LTR?T.push(n&&_?a:I.left,n&&F?f:W.right):T.push(!n&&F?a:W.left,!n&&_?f:I.right)}let D=y!=null?y:s.moveToLineBoundary(O.cursor(k,1),!1).head,V=k!=null?k:s.moveToLineBoundary(O.cursor(y,-1),!0).head;for(let N of s.visibleRanges)if(N.to>D&&N.from<V)for(let _=Math.max(N.from,D),Q=Math.min(N.to,V);;){let F=s.state.doc.lineAt(_);for(let q of s.bidiSpans(F)){let I=q.from+F.from,W=q.to+F.from;if(I>=Q)break;W>_&&X(Math.max(I,_),y==null&&I<=D,Math.min(W,Q),k==null&&W>=V,q.dir)}if(_=F.to+1,_>=Q)break}if(T.length==0){let N=s.coordsAtPos(D,-1);x=Math.min(N.top,x),B=Math.max(N.bottom,B)}return{top:x,bottom:B,horizontal:T}}}var ma=ee("cursor.primary"),ya=ee("cursor.secondary");function pa(s,e,t){let i=s.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let n=yo(s);return new Bn(i.left-n.left,i.top-n.top,-1,i.bottom-i.top,t?ma:ya)}var Nn=/x/.unicode!=null?"gu":"g",Oa=new RegExp(`[\0-\b
--­؜​-‌‎‏\u2028\u2029\uFEFF￹-￼]`,Nn);var Qn=null;function ba(){if(Qn==null&&typeof document!="undefined"&&document.body){let s=document.body.style;Qn=(s.tabSize||s.MozTabSize)!=null}return Qn||!1}var bc=w.define({combine(s){let e=Ne(s,{render:null,specialChars:Oa,addSpecialChars:null});return(e.replaceTabs=!ba())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Nn)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Nn)),e}});var xa=L.line({attributes:{class:ee("activeLine")}}),xc=ne.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let i of s.state.selection.ranges){if(!i.empty)continue;let n=s.visualLineAt(i.head);n.from>e&&(t.push(xa.range(n.from)),e=n.from)}return L.set(t)}},{decorations:s=>s.decorations});var Xn=new $;function ka(s){return w.define({combine:s?e=>e.concat(s):void 0})}var we=class{constructor(e,t,i=[]){this.data=e,M.prototype.hasOwnProperty("tree")||Object.defineProperty(M.prototype,"tree",{get(){return ue(this)}}),this.parser=t,this.extension=[At.of(this),M.languageData.of((n,r)=>n.facet(bo(n,r)))].concat(i)}isActiveAt(e,t){return bo(e,t)==this.data}findRegions(e){let t=e.facet(At);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[];return ue(e).iterate({enter:(n,r,o)=>{if(n.isTop&&n.prop(Xn)==this.data)return i.push({from:r,to:o}),!1}}),i}get allowsNesting(){return!0}parseString(e){let t=S.of(e.split(`
`)),i=this.parser.startParse(new Ht(t),0,new Pt(this.parser,M.create({doc:t}),[],j.empty,{from:0,to:e.length},[])),n;for(;!(n=i.advance()););return n}};we.setState=re.define();function bo(s,e){let t=s.facet(At);if(!t)return null;if(!t.allowsNesting)return t.data;let n=ue(s).resolve(e,-1);for(;n;){let r=n.type.prop(Xn);if(r)return r;n=n.parent}return t.data}var Ct=class extends we{constructor(e,t){super(e,t);this.parser=t}static define(e){let t=ka(e.languageData);return new Ct(t,e.parser.configure({props:[Xn.add(i=>i.isTop?t:void 0)]}))}configure(e){return new Ct(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasNested}};function ue(s){let e=s.field(we.state,!1);return e?e.tree:j.empty}var Ht=class{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.prevString="",this.cursor=e.iter()}syncTo(e){return e<this.cursorPos&&(this.cursor=this.doc.iter(),this.cursorPos=0),this.prevString=e==this.cursorPos?this.string:"",this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}get(e){if(e>=this.length)return-1;let t=this.cursorPos-this.string.length;if(e<t||e>=this.cursorPos){if(e<t&&e>=t-this.prevString.length)return this.prevString.charCodeAt(e-(t-this.prevString.length));t=this.syncTo(e)}return this.string.charCodeAt(e-t)}lineAfter(e){if(e>=this.length||e<0)return"";let t=this.cursorPos-this.string.length;return(e<t||e>=this.cursorPos)&&(t=this.syncTo(e)),this.cursor.lineBreak?"":this.string.slice(e-t)}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}clip(e){return new Ht(this.doc,e)}},Pt=class{constructor(e,t,i=[],n,r,o){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.viewport=r,this.skipped=o,this.parse=null,this.tempSkipped=[]}work(e,t){if(this.tree!=j.empty&&(t==null?this.tree.length==this.state.doc.length:this.tree.length>=t))return this.takeTree(),!0;this.parse||(this.parse=this.parser.startParse(new Ht(this.state.doc),0,this));let i=Date.now()+e;for(;;){let n=this.parse.advance();if(n)return this.fragments=this.withoutTempSkipped(Be.addTree(n)),this.parse=null,this.tree=n,!0;if(t!=null&&this.parse.pos>=t)return this.takeTree(),!0;if(Date.now()>i)return!1}}takeTree(){this.parse&&this.parse.pos>this.tree.length&&(this.tree=this.parse.forceFinish(),this.fragments=this.withoutTempSkipped(Be.addTree(this.tree,this.fragments,!0)))}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=xo(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,viewport:r,skipped:o}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((h,a,f,c)=>l.push({fromA:h,toA:a,fromB:f,toB:c})),i=Be.applyChanges(i,l),n=j.empty,r={from:e.mapPos(r.from,-1),to:e.mapPos(r.to,1)},this.skipped.length){o=[];for(let h of this.skipped){let a=e.mapPos(h.from,1),f=e.mapPos(h.to,-1);a<f&&o.push({from:a,to:f})}}}return new Pt(this.parser,t,i,n,r,o)}updateViewport(e){this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=xo(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length<t}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}movedPast(e){return this.tree.length<e&&this.parse&&this.parse.pos>=e}};Pt.skippingParser={startParse(s,e,t){return{pos:e,advance(){return t.tempSkipped.push({from:e,to:s.length}),this.pos=s.length,new j(G.none,[],[],s.length-e)},forceFinish(){return this.advance()}}}};function xo(s,e,t){return Be.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}var at=class{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged)return this;let t=this.context.changes(e.changes,e.state),i=this.context.tree.length==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.tree.length),t.viewport.to);return t.work(25,i)||t.takeTree(),new at(t)}static init(e){let t=new Pt(e.facet(At).parser,e,[],j.empty,{from:0,to:e.doc.length},[]);return t.work(25)||t.takeTree(),new at(t)}};we.state=be.define({create:at.init,update(s,e){for(let t of e.effects)if(t.is(we.setState))return t.value;return e.startState.facet(At)!=e.state.facet(At)?at.init(e.state):s.apply(e)}});var wa=typeof window!="undefined"&&window.requestIdleCallback||((s,{timeout:e})=>setTimeout(s,e)),va=typeof window!="undefined"&&window.cancelIdleCallback||clearTimeout,Sa=ne.fromClass(class{constructor(e){this.view=e,this.working=-1,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){if(e.viewportChanged){let t=this.view.state.field(we.state).context;t.updateViewport(e.view.viewport)&&t.reset(),this.view.viewport.to>t.tree.length&&this.scheduleWork()}e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork())}scheduleWork(){if(this.working>-1)return;let{state:e}=this.view;e.field(we.state).tree.length>=e.doc.length||(this.working=wa(this.work,{timeout:500}))}work(e){this.working=-1;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(we.state);if(r.tree.length>=n+1e6)return;let o=Math.min(this.chunkBudget,e?Math.max(25,e.timeRemaining()):100),l=r.context.work(o,n+1e6);this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0||r.context.movedPast(n))&&(r.context.takeTree(),this.view.dispatch({effects:we.setState.of(new at(r.context))})),!l&&this.chunkBudget>0&&this.scheduleWork()}destroy(){this.working>=0&&va(this.working)}},{eventHandlers:{focus(){this.scheduleWork()}}}),At=w.define({combine(s){return s.length?s[0]:null},enables:[we.state,Sa]});var Pa=w.define(),Pi=w.define({combine:s=>{if(!s.length)return"  ";if(!/^(?: +|\t+)$/.test(s[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return s[0]}});function Ut(s){let e=s.facet(Pi);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Gt(s,e){let t="",i=s.tabSize;if(s.facet(Pi).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let n=0;n<e;n++)t+=" ";return t}function Vn(s,e){s instanceof M&&(s=new Tt(s));for(let i of s.state.facet(Pa)){let n=i(s,e);if(n!=null)return n}let t=ue(s.state);return t?Aa(s,t,e):null}var Tt=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ut(e)}textAfterPos(e){var t,i;let n=(t=this.options)===null||t===void 0?void 0:t.simulateBreak;return e==n&&((i=this.options)===null||i===void 0?void 0:i.simulateDoubleBreak)?"":this.state.sliceDoc(e,Math.min(e+100,n!=null&&n>e?n:1e9,this.state.doc.lineAt(e).to))}column(e){var t;let i=this.state.doc.lineAt(e),n=i.text.slice(0,e-i.from),r=this.countColumn(n,e-i.from),o=((t=this.options)===null||t===void 0?void 0:t.overrideIndentation)?this.options.overrideIndentation(i.from):-1;return o>-1&&(r+=o-this.countColumn(n,n.search(/\S/))),r}countColumn(e,t){return Je(t<0?e:e.slice(0,t),0,this.state.tabSize)}lineIndent(e){var t;let i=(t=this.options)===null||t===void 0?void 0:t.overrideIndentation;if(i){let n=i(e.from);if(n>-1)return n}return this.countColumn(e.text,e.text.search(/\S/))}},Ca=new $;function Aa(s,e,t){let i=e.resolve(t);for(let n=i,r=t;;){let o=n.childBefore(r);if(!o)break;o.type.isError&&o.from==o.to?(i=n,r=o.from):(n=o,r=n.to+1)}for(;i;i=i.parent){let n=Ta(i);if(n)return n(new ko(s,t,i))}return null}function Ma(s){var e,t;return s.pos==((e=s.options)===null||e===void 0?void 0:e.simulateBreak)&&((t=s.options)===null||t===void 0?void 0:t.simulateDoubleBreak)}function Ta(s){let e=s.type.prop(Ca);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop($.closedBy))){let n=s.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>Ea(o,!0,1,void 0,r&&!Ma(o)?n.from:void 0)}return s.parent==null?Da:null}function Da(){return 0}var ko=class extends Tt{constructor(e,t,i){super(e.state,e.options);this.pos=t,this.node=i}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if($a(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e)}};function $a(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function La(s){var e;let t=s.node,i=t.childAfter(t.from),n=t.lastChild;if(!i)return null;let r=(e=s.options)===null||e===void 0?void 0:e.simulateBreak,o=s.state.doc.lineAt(i.from),l=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let h=i.to;;){let a=t.childAfter(h);if(!a||a==n)return null;if(!a.type.isSkipped)return a.from<l?i:null;h=a.to}}function Ea(s,e,t,i,n){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==s.pos+o,h=e?La(s):null;return h?l?s.column(h.from):s.column(h.to):s.baseIndent+(l?0:s.unit*t)}var Cc=w.define(),Tc=new $;var Ra=0,ve=class{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Ra++}static define(e){if(e==null?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new ve([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Yt;return t=>t.modified.indexOf(e)>-1?t:Yt.get(t.base||t,t.modified.concat(e).sort((i,n)=>i.id-n.id))}},Ba=0,Yt=class{constructor(){this.instances=[],this.id=Ba++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&Na(t,l.modified));if(i)return i;let n=[],r=new ve(n,e,t);for(let l of t)l.instances.push(r);let o=wo(t);for(let l of e.set)for(let h of o)n.push(Yt.get(l,h));return r}};function Na(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function wo(s){let e=[s];for(let t=0;t<s.length;t++)for(let i of wo(s.slice(0,t).concat(s.slice(t+1))))e.push(i);return e}function Po(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let r=[],o=2,l=n;for(let c=0;;){if(l=="..."&&c>0&&c+3==n.length){o=1;break}let u=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!u)throw new RangeError("Invalid path: "+n);if(r.push(u[0]=="*"?null:u[0][0]=='"'?JSON.parse(u[0]):u[0]),c+=u[0].length,c==n.length)break;let d=n[c++];if(c==n.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+n);l=n.slice(c)}let h=r.length-1,a=r[h];if(!a)throw new RangeError("Invalid path: "+n);let f=new So(i,o,h>0?r.slice(0,h):null);e[a]=f.sort(e[a])}}return vo.add(e)}var vo=new $,Ai=w.define({combine(s){return s.length?s[0]:null}}),So=class{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}},Mt=class{constructor(e){this.map=Object.create(null);let t=Object.create(null);for(let i of e){let n=Oe.newName();t["."+n]=Object.assign({},i,{tag:null});let r=i.tag;Array.isArray(r)||(r=[r]);for(let o of r)this.map[o.id]=n}this.module=new Oe(t),this.match=this.match.bind(this),this.extension=[Qa,Ai.of(this),C.styleModule.of(this.module)]}match(e){for(let t of e.set){let i=this.map[t.id];if(i)return t!=e&&(this.map[e.id]=i),i}return this.map[e.id]=null}static define(...e){return new Mt(e)}};var Ao=class{constructor(e){this.markCache=Object.create(null),this.tree=ue(e.state),this.decorations=this.buildDeco(e,e.state.facet(Ai))}update(e){let t=ue(e.state),i=e.state.facet(Ai),n=i!=e.startState.facet(Ai);t.length<e.view.viewport.to&&!n?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return L.none;let i=new Ue;for(let{from:n,to:r}of e.visibleRanges)Xa(this.tree,n,r,t.match,(o,l,h)=>{i.add(o,l,this.markCache[h]||(this.markCache[h]=L.mark({class:h})))});return i.finish()}},Qa=Nt.fallback(ne.fromClass(Ao,{decorations:s=>s.decorations})),Co=[""],To=[""],Mo=[""];function Xa(s,e,t,i,n){let r=e,o="",l=0;s.iterate({from:e,to:t,enter:(h,a)=>{l++;let f=Mo[l-1],c=f,u=h.prop(vo),d=!1;for(;u;){if(!u.context||Va(u.context,Co,l)){for(let p of u.tags){let m=i(p);m&&(c&&(c+=" "),c+=m,u.mode==1?f=c:u.mode==0&&(d=!0))}break}u=u.next}if(c!=o&&(a>r&&o&&n(r,a,o),r=a,o=c),d)return l--,!1;To[l]=c,Mo[l]=f,Co[l]=h.name},leave:(h,a,f)=>{l--;let c=To[l];if(c!=o){let u=Math.min(t,f);u>r&&o&&n(r,u,o),r=u,o=c}}})}function Va(s,e,t){if(s.length>t-1)return!1;for(let i=t-1,n=s.length-1;n>=0;n--,i--){let r=s[n];if(r&&r!=e[i])return!1}return!0}var b=ve.define,Ci=b(),Ye=b(),Ke=b(),In=b(Ke),_n=b(Ke),_e=b(),ft=b(_e),je=b(),Me=b(),jn=b(),Kt=b(jn),Ti=b(),g={comment:Ci,lineComment:b(Ci),blockComment:b(Ci),docComment:b(Ci),name:Ye,variableName:b(Ye),typeName:b(Ye),propertyName:b(Ye),className:b(Ye),labelName:b(Ye),namespace:b(Ye),macroName:b(Ye),literal:Ke,string:In,docString:b(In),character:b(In),number:_n,integer:b(_n),float:b(_n),bool:b(Ke),regexp:b(Ke),escape:b(Ke),color:b(Ke),url:b(Ke),keyword:je,self:b(je),null:b(je),atom:b(je),unit:b(je),modifier:b(je),operatorKeyword:b(je),controlKeyword:b(je),definitionKeyword:b(je),operator:Me,derefOperator:b(Me),arithmeticOperator:b(Me),logicOperator:b(Me),bitwiseOperator:b(Me),compareOperator:b(Me),updateOperator:b(Me),definitionOperator:b(Me),typeOperator:b(Me),controlOperator:b(Me),punctuation:jn,separator:b(jn),bracket:Kt,angleBracket:b(Kt),squareBracket:b(Kt),paren:b(Kt),brace:b(Kt),content:_e,heading:ft,heading1:b(ft),heading2:b(ft),heading3:b(ft),heading4:b(ft),heading5:b(ft),heading6:b(ft),contentSeparator:b(_e),list:b(_e),quote:b(_e),emphasis:b(_e),strong:b(_e),link:b(_e),monospace:b(_e),inserted:b(),deleted:b(),changed:b(),invalid:b(),meta:Ti,documentMeta:b(Ti),annotation:b(Ti),processingInstruction:b(Ti),definition:ve.defineModifier(),constant:ve.defineModifier(),function:ve.defineModifier(),standard:ve.defineModifier(),local:ve.defineModifier(),special:ve.defineModifier()},Nc=Mt.define({tag:g.link,textDecoration:"underline"},{tag:g.heading,textDecoration:"underline",fontWeight:"bold"},{tag:g.emphasis,fontStyle:"italic"},{tag:g.strong,fontWeight:"bold"},{tag:g.keyword,color:"#708"},{tag:[g.atom,g.bool,g.url,g.contentSeparator,g.labelName],color:"#219"},{tag:[g.literal,g.inserted],color:"#164"},{tag:[g.string,g.deleted],color:"#a11"},{tag:[g.regexp,g.escape,g.special(g.string)],color:"#e40"},{tag:g.definition(g.variableName),color:"#00f"},{tag:g.local(g.variableName),color:"#30a"},{tag:[g.typeName,g.namespace],color:"#085"},{tag:g.className,color:"#167"},{tag:[g.special(g.variableName),g.macroName,g.local(g.variableName)],color:"#256"},{tag:g.definition(g.propertyName),color:"#00c"},{tag:g.comment,color:"#940"},{tag:g.meta,color:"#7a757a"},{tag:g.invalid,color:"#f00"});var Mi=Mt.define({tag:g.link,textDecoration:"underline"},{tag:g.heading,textDecoration:"underline",fontWeight:"bold"},{tag:g.function(g.variableName),color:"#795e26"},{tag:g.emphasis,fontStyle:"italic"},{tag:g.strong,fontWeight:"bold"},{tag:g.keyword,color:"#00f"},{tag:g.controlKeyword,color:"#af00db"},{tag:[g.atom,g.bool,g.url,g.contentSeparator,g.labelName],color:"#219"},{tag:[g.literal,g.inserted],color:"#098658"},{tag:[g.string,g.deleted],color:"#a31515"},{tag:[g.regexp,g.escape,g.special(g.string)],color:"#e40"},{tag:g.definition(g.variableName),color:"#0070c1"},{tag:g.local(g.variableName),color:"#30a"},{tag:[g.typeName,g.namespace],color:"#267f99"},{tag:g.className,color:"#267f99"},{tag:[g.special(g.variableName),g.macroName,g.local(g.variableName)],color:"#256"},{tag:g.propertyName,color:"#001080"},{tag:g.definition(g.propertyName),color:"#001080"},{tag:g.comment,color:"#008000"},{tag:g.meta,color:"#7a757a"},{tag:g.invalid,color:"#f00"});var Do=class{constructor(s,e){this.nosave=!1;this.exerciseTypes=new Map;this.exercises={};this.evalMode=!1;this.metadata=e,this.sheet=s;let t=s.querySelector(".submit .authors");t?this.authors=cs(t,[{name:"",email:"",matriculation_number:""}]):console.warn("table with class authors was not found")}write(){var e;let s={course:this.metadata.title,sheet:this.metadata.sheet,authors:((e=this.authors)==null?void 0:e.get())||[],solutions:{}};for(let[t,i]of Object.entries(this.exercises))if(i){let n=i.get();n&&(s.solutions[t]=n)}return s}read(s){var e;(e=this.authors)==null||e.set(s.authors);for(let[t,i]of Object.entries(this.exercises)){let n=s.solutions[t];n&&i.set(n)}}init(s,e){Oe.mount(document,Mi.module);let t=this;$t(u=>{var d;return(d=document.getElementById("submit-buttons"))==null?void 0:d.append(u("a",{class:["icon","large"],events:{click:()=>t.save()}},u("i",{},"💾")," Speichern"),u("a",{class:["icon","large"],events:{click:()=>t.load()}},u("i",{},"📂")," Laden"),u("a",{class:["icon","large"],events:{click:()=>t.clearSheet()}},u("i",{},"🗑")," Leeren"))}),this.exerciseTypes.size==0&&console.warn("no exercise types were registerd before init");let i=Array.from(this.exerciseTypes.keys()).map(u=>"."+u).join(", ");var n=0;let r=0,o=0,l=document.createElement("div");l.contentEditable="true",l.classList.add("points");function h(){l.innerHTML=`Ihr habt ${o} von ${r} Punkten erreicht.`}s&&e&&(document.querySelectorAll(".ublatt div.main").forEach(u=>u.insertAdjacentElement("afterbegin",l)),document.querySelectorAll("div.info").forEach(u=>u.remove())),this.sheet.querySelectorAll(".main > section").forEach(u=>{var d,p,m;if(((d=u.firstElementChild)==null?void 0:d.tagName)=="H1"){let y="e"+ ++n,k=document.createElement("span");k.classList.add("secnum"),k.innerText=`${this.metadata.sheet}.${n}`,(p=u.firstElementChild)==null||p.insertAdjacentElement("afterbegin",k);let x=document.createElement("span");x.classList.add("points"),x.contentEditable="true";let B=0,T=0;x.addEventListener("input",()=>{let D=x.innerText.match(/([0-9]+([,\.][0-9]+)?) von/);D&&(T=Number.parseFloat(D[1].replace(",",".")))});let X=()=>{h(),x.innerHTML=`${T} von ${B} Punkten`};x.innerHTML="0 %",(s||e)&&((m=u.firstElementChild)==null||m.appendChild(x)),u.querySelectorAll(i).forEach((D,V)=>{let N=Number.parseInt((Array.from(D.classList).find(Q=>/^[0-9]+p$/g.test(Q))||"1p").slice(0,-1));B+=N,r+=N;let _=Array.from(this.exerciseTypes.entries()).find(([Q,F])=>D.classList.contains(Q));if(_){let Q=V>0?y+"_"+(V+1):y;if(!s||!e)this.exercises[Q]=_[1].make(D,Q);else{this.evalMode=!0;let F=document.createElement("div");F.classList.add("submission");let q=document.createElement("div");q.classList.add("feedback");let I=document.createElement("div");I.classList.add("solution","fail"),I.append(F,q);let W;try{W=_[1].eval(D,Q,{submission:s.solutions[Q],solution:e.solutions[Q],mark(_i,Re){}})}catch(_i){let Re=document.createElement("div");Re.classList.add("rendered","fail"),Re.innerText="Keine Angabe",W=Re}let me;try{me=_[1].eval(D,Q,{submission:e.solutions[Q],solution:e.solutions[Q],mark(_i,Re){}})}catch(_i){let Re=document.createElement("div");Re.classList.add("rendered","fail"),Re.innerText="Leider Falsch",me=Re}F.append(W),F.contentEditable="true",q.append(me),q.contentEditable="true",D.replaceWith(I);let Le=document.createElement("span");Le.classList.add("icon"),Le.innerText="✗";let ye=document.createElement("div");ye.classList.add("assess","fail"),ye.append(Le),ye.classList.add("assess","fail"),ye.addEventListener("click",()=>{ye.classList.contains("fail")?(ye.classList.remove("fail"),I.classList.remove("fail"),Le.innerText="✓",T+=N,o+=N,X()):ye.classList.contains("warn")?(ye.classList.add("fail"),I.classList.add("fail"),ye.classList.remove("warn"),I.classList.remove("warn"),Le.innerText="✗",T-=N,o-=N,X()):(ye.classList.add("warn"),I.classList.add("warn"),Le.innerText="⚠",X())}),I.insertAdjacentElement("beforeend",ye),X()}}})}});let a=localStorage.getItem("authors"),f=[];a&&(f=JSON.parse(a));let c=localStorage.getItem(this.metadata.title+"_"+this.metadata.sheet);if(c){let u=JSON.parse(c);(!u.authors||u.authors.length==0)&&(u.authors=f),this.read(u)}else this.read({course:"",sheet:"",authors:f,solutions:{}});window.addEventListener("beforeunload",()=>{this.nosave||(this.authors&&localStorage.setItem("authors",JSON.stringify(this.authors.get())),localStorage.setItem(this.metadata.title+"_"+this.metadata.sheet,JSON.stringify(this.write())))}),window.addEventListener("keydown",u=>{(navigator.platform.match("Mac")?u.metaKey:u.ctrlKey)&&(u.key=="s"?this.evalMode?(this.emailify(),u.preventDefault()):(this.save(),u.preventDefault()):u.key=="o"?this.evalMode||(u.preventDefault(),this.load()):u.key=="r"?(document.execCommand("foreColor",!1,"red"),u.preventDefault()):u.key=="g"?(document.execCommand("foreColor",!1,"green"),u.preventDefault()):u.key=="y"&&(document.execCommand("foreColor",!1,"darkorange"),u.preventDefault()))},!1)}registerModule(s,e){this.exerciseTypes.set(s,e)}emailify(){var r;for(let o of Array.from(document.getElementsByTagName("script")))o.remove();document.querySelectorAll("[contenteditable]").forEach(o=>o.removeAttribute("contenteditable"));let s=document.createElement("a"),e=Array.from(document.styleSheets).flatMap(o=>Array.from(o.rules)).map(o=>o.cssText).join(`
`);console.log(this.metadata);let t="a893q4h87hadsfg08gsdifuhgosdifg",i=`To: ${this.metadata.authors.map(o=>`"${o.name.trim()}" <${o.email.trim()}>`).join(", ")}
Subject: [${this.metadata.title}] Bewertung Blatt ${this.metadata.sheet}
Content-Type: multipart/mixed; boundary="${t}"
\r
--${t}
Content-Type: text/plain;charset="utf-8"

Hallo,

Im Anhang kommt eure Bewertung für Übungsblatt ${this.metadata.sheet}. ${(r=document.querySelector(".main .points"))==null?void 0:r.textContent}

Viele Grüße, Martin
\r
--${t}
Content-Type: text/html; charset="utf-8"; name="eval${this.metadata.sheet}.html"
Content-Disposition: attachment; filename="eval${this.metadata.sheet}.html"

<html><head><style>${e}</style></head><body class="email">${document.body.innerHTML}</body></html>
\r
--${t}--`;s.download=`sheet${this.metadata.sheet}.eml`;let n=new Blob([i],{type:"message/rfc822"});s.href=URL.createObjectURL(n),s.click()}save(){var i;if(!((i=this.authors)==null?void 0:i.validate())){alert("Bitte mindestens einen Autor mit Name, Matrikelnummer und Email eintragen.");return}let s=this.write(),e=document.createElement("a");e.download="sheet"+this.metadata.sheet+".json";var t=new Blob([JSON.stringify(s)],{type:"application/json"});e.href=URL.createObjectURL(t),e.click()}clearSheet(){localStorage.removeItem(this.metadata.title+"_"+this.metadata.sheet),this.nosave=!0,window.location.reload()}load(){let s=document.createElement("input");s.type="file",s.accept=".json",s.addEventListener("change",()=>{var t;let e=(t=s.files)==null?void 0:t.item(0);if(e){let i=new FileReader;i.addEventListener("load",n=>{try{if(i.result){let r=JSON.parse(i.result instanceof ArrayBuffer?String.fromCharCode.apply(null,Array.from(new Uint16Array(i.result))):i.result);typeof r.sheet=="string"&&(r.sheet=Number.parseInt(r.sheet)),typeof r.course!="string"||typeof r.authors!="object"||typeof r.sheet!="number"||typeof r.solutions!="object"?alert("Keine gültige JSON Datei!"):r.course!=this.metadata.title?alert(`Diese Abgabe ist für den Kurs '${r.course}.'`):r.sheet!=this.metadata.sheet?alert(`Diese Abgabe ist für Übungsblatt ${r.sheet}.`):this.read(r)}else if(i.error)throw i.error}catch(r){console.error(r),alert("Keine kompatible Abgabe!")}}),i.readAsText(e)}}),s.click()}},Eo=Do;var Kc=C.baseTheme({$matchingBracket:{color:"#0b0"},$nonmatchingBracket:{color:"#a22"}}),$o=1e4,Lo="()[]{}",Ia=w.define({combine(s){return Ne(s,{afterCursor:!0,brackets:Lo,maxScanDistance:$o})}}),_a=L.mark({class:ee("matchingBracket")}),ja=L.mark({class:ee("nonmatchingBracket")}),Zc=be.define({create(){return L.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],i=e.state.facet(Ia);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=Se(e.state,n.head,-1,i)||n.head>0&&Se(e.state,n.head-1,1,i)||i.afterCursor&&(Se(e.state,n.head,1,i)||n.head<e.state.doc.length&&Se(e.state,n.head+1,-1,i));if(!r)continue;let o=r.matched?_a:ja;t.push(o.range(r.start.from,r.start.to)),r.end&&t.push(o.range(r.end.from,r.end.to))}return L.set(t,!0)},provide:s=>C.decorations.from(s)});function zn(s,e,t){let i=s.prop(e<0?$.openedBy:$.closedBy);if(i)return i;if(s.name.length==1){let n=t.indexOf(s.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function Se(s,e,t,i={}){let n=i.maxScanDistance||$o,r=i.brackets||Lo,o=ue(s),l=o.resolve(e,t),h;return(h=zn(l.type,t,r))?za(s,e,t,l,h,r):Fa(s,e,t,o,l.type,n,r)}function za(s,e,t,i,n,r){let o=i.parent,l={from:i.from,to:i.to},h=0,a=o==null?void 0:o.cursor;if(a&&(t<0?a.childBefore(i.from):a.childAfter(i.to)))do if(t<0?a.to<=i.from:a.from>=i.to){if(h==0&&n.indexOf(a.type.name)>-1)return{start:l,end:{from:a.from,to:a.to},matched:!0};if(zn(a.type,t,r))h++;else if(zn(a.type,-t,r)&&(h--,h==0))return{start:l,end:{from:a.from,to:a.to},matched:!1}}while(t<0?a.prevSibling():a.nextSibling());return{start:l,matched:!1}}function Fa(s,e,t,i,n,r,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),h=o.indexOf(l);if(h<0||h%2==0!=t>0)return null;let a={from:t<0?e-1:e,to:t>0?e+1:e},f=s.doc.iterRange(e,t>0?s.doc.length:0),c=0;for(let u=0;!f.next().done&&u<=r;){let d=f.value;t<0&&(u+=d.length);let p=e+u*t;for(let m=t>0?0:d.length-1,y=t>0?d.length:-1;m!=y;m+=t){let k=o.indexOf(d[m]);if(!(k<0||i.resolve(p+m,1).type!=n))if(k%2==0==t>0)c++;else{if(c==1)return{start:a,end:{from:p+m,to:p+m+1},matched:k>>1==h>>1};c--}}t>0&&(u+=d.length)}return f.done?{start:a,matched:!1}:null}function Zt(s,e){return O.create(s.ranges.map(e),s.mainIndex)}function ze(s,e){return s.update({selection:e,scrollIntoView:!0,annotations:P.userEvent.of("keyboardselection")})}function De({state:s,dispatch:e},t){let i=Zt(s.selection,t);return i.eq(s.selection)?!1:(e(ze(s,i)),!0)}function Di(s,e){return O.cursor(e?s.to:s.from)}function Ro(s,e){return De(s,t=>t.empty?s.moveByChar(t,e):Di(t,e))}var Bo=s=>Ro(s,s.textDirection!=E.LTR),No=s=>Ro(s,s.textDirection==E.LTR);function Ei(s,e){return De(s,t=>t.empty?s.moveByGroup(t,e):Di(t,e))}var Wa=s=>Ei(s,s.textDirection!=E.LTR),qa=s=>Ei(s,s.textDirection==E.LTR),Ha=s=>Ei(s,!0),Ua=s=>Ei(s,!1);function Ga(s,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function $i(s,e,t){let i=ue(s).resolve(e.head),n=t?$.closedBy:$.openedBy;for(let h=e.head;;){let a=t?i.childAfter(h):i.childBefore(h);if(!a)break;Ga(s,a,n)?i=a:h=t?a.to:a.from}let r=i.type.prop(n),o,l;return r&&(o=t?Se(s,i.from,1):Se(s,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,O.cursor(l,t?-1:1)}var Ya=s=>De(s,e=>$i(s.state,e,s.textDirection!=E.LTR)),Ka=s=>De(s,e=>$i(s.state,e,s.textDirection==E.LTR));function Qo(s,e){return De(s,t=>t.empty?s.moveVertically(t,e):Di(t,e))}var Xo=s=>Qo(s,!1),Vo=s=>Qo(s,!0);function Io(s,e){return De(s,t=>t.empty?s.moveVertically(t,e,s.dom.clientHeight):Di(t,e))}var Fn=s=>Io(s,!1),Wn=s=>Io(s,!0);function Li(s,e,t){let i=s.visualLineAt(e.head),n=s.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=s.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let r=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=O.cursor(i.from+r))}return n}var Za=s=>De(s,e=>Li(s,e,!0)),Ja=s=>De(s,e=>Li(s,e,!1)),_o=s=>De(s,e=>O.cursor(s.visualLineAt(e.head).from,1)),jo=s=>De(s,e=>O.cursor(s.visualLineAt(e.head).to,-1));function ef(s,e,t){let i=!1,n=Zt(s.selection,r=>{let o=Se(s,r.head,-1)||Se(s,r.head,1)||r.head>0&&Se(s,r.head-1,1)||r.head<s.doc.length&&Se(s,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return t?O.range(r.anchor,l):O.cursor(l)});return i?(e(ze(s,n)),!0):!1}var tf=({state:s,dispatch:e})=>ef(s,e,!1);function Ee(s,e){let t=Zt(s.state.selection,i=>{let n=e(i);return O.range(i.anchor,n.head,n.goalColumn)});return t.eq(s.state.selection)?!1:(s.dispatch(ze(s.state,t)),!0)}function zo(s,e){return Ee(s,t=>s.moveByChar(t,e))}var Fo=s=>zo(s,s.textDirection!=E.LTR),Wo=s=>zo(s,s.textDirection==E.LTR);function Ri(s,e){return Ee(s,t=>s.moveByGroup(t,e))}var nf=s=>Ri(s,s.textDirection!=E.LTR),sf=s=>Ri(s,s.textDirection==E.LTR),rf=s=>Ri(s,!0),of=s=>Ri(s,!1),lf=s=>Ee(s,e=>$i(s.state,e,s.textDirection!=E.LTR)),hf=s=>Ee(s,e=>$i(s.state,e,s.textDirection==E.LTR));function qo(s,e){return Ee(s,t=>s.moveVertically(t,e))}var Ho=s=>qo(s,!1),Uo=s=>qo(s,!0);function Go(s,e){return Ee(s,t=>s.moveVertically(t,e,s.dom.clientHeight))}var Yo=s=>Go(s,!1),Ko=s=>Go(s,!0),af=s=>Ee(s,e=>Li(s,e,!0)),ff=s=>Ee(s,e=>Li(s,e,!1)),Zo=s=>Ee(s,e=>O.cursor(s.visualLineAt(e.head).from)),Jo=s=>Ee(s,e=>O.cursor(s.visualLineAt(e.head).to)),qn=({state:s,dispatch:e})=>(e(ze(s,{anchor:0})),!0),Hn=({state:s,dispatch:e})=>(e(ze(s,{anchor:s.doc.length})),!0),el=({state:s,dispatch:e})=>(e(ze(s,{anchor:s.selection.main.anchor,head:0})),!0),tl=({state:s,dispatch:e})=>(e(ze(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),cf=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},annotations:P.userEvent.of("keyboardselection")})),!0),uf=({state:s,dispatch:e})=>{let t=Bi(s).map(({from:i,to:n})=>O.range(i,Math.min(n+1,s.doc.length)));return e(s.update({selection:O.create(t),annotations:P.userEvent.of("keyboardselection")})),!0},df=({state:s,dispatch:e})=>{let t=Zt(s.selection,i=>{var n;let r=ue(s).resolve(i.head,1);for(;!(r.from<i.from&&r.to>=i.to||r.to>i.to&&r.from<=i.from||!((n=r.parent)===null||n===void 0?void 0:n.parent));)r=r.parent;return O.range(r.to,r.from)});return e(ze(s,t)),!0},pf=({state:s,dispatch:e})=>{let t=s.selection,i=null;return t.ranges.length>1?i=O.create([t.main]):t.main.empty||(i=O.create([O.cursor(t.main.head)])),i?(e(ze(s,i)),!0):!1};function Un(s,e){let{state:t}=s,i=t.changeByRange(n=>{let{from:r,to:o}=n;if(r==o){let l=e(r);r=Math.min(r,l),o=Math.max(o,l)}return r==o?{range:n}:{changes:{from:r,to:o},range:O.cursor(r)}});return i.changes.empty?!1:(s.dispatch(i,{scrollIntoView:!0,annotations:P.userEvent.of("delete")}),!0)}var Gn=(s,e,t)=>Un(s,i=>{let{state:n}=s,r=n.doc.lineAt(i),o;if(!e&&i>r.from&&i<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,i-r.from))){if(o[o.length-1]=="	")return i-1;let h=Je(o,0,n.tabSize),a=h%Ut(n)||Ut(n);for(let f=0;f<a&&o[o.length-1-f]==" ";f++)i--;return i}let l;if(t){let h=r.text.slice(i-r.from+(e?0:-2),i-r.from+(e?2:0)),a=h?li(mt(h,0)):1;l=e?Math.min(n.doc.length,i+a):Math.max(0,i-a)}else l=fe(r.text,i-r.from,e)+r.from;return l==i&&r.number!=(e?n.doc.lines:1)&&(l+=e?1:-1),l}),gf=s=>Gn(s,!1,!0);var mf=s=>Gn(s,!1,!1),il=s=>Gn(s,!0,!1),nl=(s,e)=>Un(s,t=>{let{state:i}=s,n=i.doc.lineAt(t),r=i.charCategorizer(t);for(let o=null;;){let l,h;if(t==(e?n.to:n.from)){if(n.number==(e?i.doc.lines:1))break;n=i.doc.line(n.number+(e?1:-1)),l=e?n.from:n.to,h=`
`}else l=fe(n.text,t-n.from,e)+n.from,h=n.text.slice(Math.min(t,l)-n.from,Math.max(t,l)-n.from);let a=r(h);if(o!=null&&a!=o)break;a!=Ae.Space&&(o=a),t=l}return t}),sl=s=>nl(s,!1),rl=s=>nl(s,!0),yf=s=>Un(s,e=>{let t=s.visualLineAt(e).to;return e<t?t:Math.max(s.state.doc.length,e+1)});var Of=({state:s,dispatch:e})=>{let t=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:S.of(["",""])},range:O.cursor(i.from)}));return e(s.update(t,{scrollIntoView:!0,annotations:P.userEvent.of("input")})),!0},bf=({state:s,dispatch:e})=>{let t=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let n=i.from,r=s.doc.lineAt(n),o=n==r.from?n-1:fe(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:fe(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(n,l).append(s.doc.slice(o,n))},range:O.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0})),!0)};function Bi(s){let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.from),r=s.doc.lineAt(i.to);t==n.number?e[e.length-1].to=r.to:e.push({from:n.from,to:r.to}),t=r.number}return e}function ol(s,e,t){let i=[];for(let n of Bi(s)){if(t?n.to==s.doc.length:n.from==0)continue;let r=s.doc.lineAt(t?n.to+1:n.from-1);t?i.push({from:n.to,to:r.to},{from:n.from,insert:r.text+s.lineBreak}):i.push({from:r.from,to:n.from},{from:n.to,insert:s.lineBreak+r.text})}return i.length?(e(s.update({changes:i,scrollIntoView:!0})),!0):!1}var xf=({state:s,dispatch:e})=>ol(s,e,!1),kf=({state:s,dispatch:e})=>ol(s,e,!0);function ll(s,e,t){let i=[];for(let n of Bi(s))t?i.push({from:n.from,insert:s.doc.slice(n.from,n.to)+s.lineBreak}):i.push({from:n.to,insert:s.lineBreak+s.doc.slice(n.from,n.to)});return e(s.update({changes:i,scrollIntoView:!0})),!0}var wf=({state:s,dispatch:e})=>ll(s,e,!1),vf=({state:s,dispatch:e})=>ll(s,e,!0),Sf=s=>{let{state:e}=s,t=e.changes(Bi(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Zt(e.selection,n=>s.moveVertically(n,!0)).map(t);return s.dispatch({changes:t,selection:i,scrollIntoView:!0}),!0};function Pf(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ue(s).resolve(e),i=t.childBefore(e),n=t.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop($.closedBy))&&r.indexOf(n.name)>-1?{from:i.to,to:n.from}:null}var Af=({state:s,dispatch:e})=>{let t=s.changeByRange(({from:i,to:n})=>{let r=i==n&&Pf(s,i),o=new Tt(s,{simulateBreak:i,simulateDoubleBreak:!!r}),l=Vn(o,i);l==null&&(l=/^\s*/.exec(s.doc.lineAt(i).text)[0].length);let h=s.doc.lineAt(i);for(;n<h.to&&/\s/.test(h.text.slice(n-h.from,n+1-h.from));)n++;r?{from:i,to:n}=r:i>h.from&&i<h.from+100&&!/\S/.test(h.text.slice(0,i))&&(i=h.from);let a=["",Gt(s,l)];return r&&a.push(Gt(s,o.lineIndent(h))),{changes:{from:i,to:n,insert:S.of(a)},range:O.cursor(i+1+a[1].length)}});return e(s.update(t,{scrollIntoView:!0})),!0};function Yn(s,e){let t=-1;return s.changeByRange(i=>{let n=[];for(let o=s.doc.lineAt(i.from);o.number>t&&(e(o,n,i),t=o.number),!(i.to<=o.to);)o=s.doc.lineAt(o.to+1);let r=s.changes(n);return{changes:n,range:O.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}var Cf=({state:s,dispatch:e})=>{let t=Object.create(null),i=new Tt(s,{overrideIndentation:r=>{let o=t[r];return o==null?-1:o}}),n=Yn(s,(r,o,l)=>{let h=Vn(i,r.from);if(h==null)return;let a=/^\s*/.exec(r.text)[0],f=Gt(s,h);(a!=f||l.from<r.from+a.length)&&(t[r.from]=h,o.push({from:r.from,to:r.from+a.length,insert:f}))});return n.changes.empty||e(s.update(n)),!0},Tf=({state:s,dispatch:e})=>(e(s.update(Yn(s,(t,i)=>{i.push({from:t.from,insert:s.facet(Pi)})}))),!0),Mf=({state:s,dispatch:e})=>(e(s.update(Yn(s,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let r=Je(n,0,s.tabSize),o=0,l=Gt(s,Math.max(0,r-Ut(s)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}))),!0);var Df=[{key:"Ctrl-b",run:Bo,shift:Fo},{key:"Ctrl-f",run:No,shift:Wo},{key:"Ctrl-p",run:Xo,shift:Ho},{key:"Ctrl-n",run:Vo,shift:Uo},{key:"Ctrl-a",run:_o,shift:Zo},{key:"Ctrl-e",run:jo,shift:Jo},{key:"Ctrl-d",run:il},{key:"Ctrl-h",run:mf},{key:"Ctrl-k",run:yf},{key:"Alt-d",run:rl},{key:"Ctrl-Alt-h",run:sl},{key:"Ctrl-o",run:Of},{key:"Ctrl-t",run:bf},{key:"Alt-f",run:Ha,shift:rf},{key:"Alt-b",run:Ua,shift:of},{key:"Alt-<",run:qn},{key:"Alt->",run:Hn},{key:"Ctrl-v",run:Wn},{key:"Alt-v",run:Fn}],Kn=[{key:"ArrowLeft",run:Bo,shift:Fo},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Wa,shift:nf},{mac:"Cmd-ArrowLeft",run:_o,shift:Zo},{key:"ArrowRight",run:No,shift:Wo},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:qa,shift:sf},{mac:"Cmd-ArrowRight",run:jo,shift:Jo},{key:"ArrowUp",run:Xo,shift:Ho},{mac:"Cmd-ArrowUp",run:qn,shift:el},{mac:"Ctrl-ArrowUp",run:Fn,shift:Yo},{key:"ArrowDown",run:Vo,shift:Uo},{mac:"Cmd-ArrowDown",run:Hn,shift:tl},{mac:"Ctrl-ArrowDown",run:Wn,shift:Ko},{key:"PageUp",run:Fn,shift:Yo},{key:"PageDown",run:Wn,shift:Ko},{key:"Home",run:Ja,shift:ff},{key:"Mod-Home",run:qn,shift:el},{key:"End",run:Za,shift:af},{key:"Mod-End",run:Hn,shift:tl},{key:"Enter",run:Af},{key:"Mod-a",run:cf},{key:"Backspace",run:gf},{key:"Delete",run:il},{key:"Mod-Backspace",mac:"Alt-Backspace",run:sl},{key:"Mod-Delete",mac:"Alt-Delete",run:rl}].concat(Df.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),ou=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Ya,shift:lf},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Ka,shift:hf},{key:"Alt-ArrowUp",run:xf},{key:"Shift-Alt-ArrowUp",run:wf},{key:"Alt-ArrowDown",run:kf},{key:"Shift-Alt-ArrowDown",run:vf},{key:"Escape",run:pf},{key:"Mod-l",run:uf},{key:"Mod-i",run:df},{key:"Mod-[",run:Mf},{key:"Mod-]",run:Tf},{key:"Mod-Alt-\\",run:Cf},{key:"Shift-Mod-k",run:Sf},{key:"Shift-Mod-\\",run:tf}].concat(Kn);var Zn=He.define(),Ef=He.define(),$f=w.define(),hl=w.define({combine(s){return Ne(s,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}}),Jn=be.define({create(){return $e.empty},update(s,e){let t=e.state.facet(hl),i=e.annotation(Zn);if(i){let h=de.fromTransaction(e),a=i.side,f=a==0?s.undone:s.done;return h?f=Ni(f,f.length,t.minDepth,h):f=al(f,e.startState.selection),new $e(a==0?i.rest:f,a==0?f:i.rest)}let n=e.annotation(Ef);if((n=="full"||n=="before")&&(s=s.isolate()),e.annotation(P.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=de.fromTransaction(e),o=e.annotation(P.time),l=e.annotation(P.userEvent);return r?s=s.addChanges(r,o,l,t.newGroupDelay,t.minDepth):e.selection&&(s=s.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s}});function ul(s={}){return[Jn,hl.of(s),C.domEventHandlers({beforeinput(e,t){return e.inputType=="historyUndo"?fl(t):e.inputType=="historyRedo"?cl(t):!1}})]}function Qi(s,e){return function({state:t,dispatch:i}){let n=t.field(Jn,!1);if(!n)return!1;let r=n.pop(s,t,e);return r?(i(r),!0):!1}}var fl=Qi(0,!1),cl=Qi(1,!1),Lf=Qi(0,!0),Rf=Qi(1,!0);function dl(s){return function(e){let t=e.field(Jn,!1);if(!t)return 0;let i=s==0?t.done:t.undone;return i.length-(i.length&&!i[0].changes?1:0)}}var fu=dl(0),cu=dl(1),de=class{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new de(this.changes,this.effects,this.mapped,this.startSelection,e)}static fromTransaction(e){let t=pe;for(let i of e.startState.facet($f)){let n=i(e);n.length&&(t=t.concat(n))}return!t.length&&e.changes.empty?null:new de(e.changes.invert(e.startState.doc),t,void 0,e.startState.selection,pe)}static selection(e){return new de(void 0,pe,void 0,void 0,e)}};function Ni(s,e,t,i){let n=e+1>t+20?e-t-1:0,r=s.slice(n,e);return r.push(i),r}function Bf(s,e){let t=[],i=!1;return s.iterChangedRanges((n,r)=>t.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let h=0;h<t.length;){let a=t[h++],f=t[h++];l>=a&&o<=f&&(i=!0)}}),i}function Nf(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function pl(s,e){return s.length?e.length?s.concat(e):s:e}var pe=[],Qf=200;function al(s,e){if(s.length){let t=s[s.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Qf));return i.length&&i[i.length-1].eq(e)?s:(i.push(e),Ni(s,s.length-1,1e9,t.setSelAfter(i)))}else return[de.selection([e])]}function Xf(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function es(s,e){if(!s.length)return s;let t=s.length,i=pe;for(;t;){let n=Vf(s[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=s.slice(0,t);return r[t-1]=n,r}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[de.selection(i)]:pe}function Vf(s,e,t){let i=pl(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):pe,t);if(!s.changes)return de.selection(i);let n=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new de(n,re.mapEffects(s.effects,e),o,s.startSelection.map(r),i)}var $e=class{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new $e(this.done,this.undone):this}addChanges(e,t,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&t-this.prevTime<n&&!l.selectionsAfter.length&&!l.changes.empty&&e.changes&&Bf(l.changes,e.changes)?o=Ni(o,o.length-1,r,new de(e.changes.compose(l.changes),pl(e.effects,l.effects),l.mapped,l.startSelection,pe)):o=Ni(o,o.length,r,e),new $e(o,pe,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:pe;return r.length>0&&t-this.prevTime<n&&i=="keyboardselection"&&this.prevUserEvent==i&&Nf(r[r.length-1],e)?this:new $e(al(this.done,e),this.undone,t,i)}addMapping(e){return new $e(es(this.done,e),es(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1];if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:Zn.of({side:e,rest:Xf(n)})});if(r.changes){let o=n.length==1?pe:n.slice(0,n.length-1);return r.mapped&&(o=es(o,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:Zn.of({side:e,rest:o}),filter:!1})}else return null}};$e.empty=new $e(pe,pe);var gl=[{key:"Mod-z",run:fl,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:cl,preventDefault:!0},{key:"Mod-u",run:Lf,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Rf,preventDefault:!0}];var ts=class{constructor(){this.inputModes={}}registerModule(e,t){this.inputModes[e]=t}eval(e,t,i){let n=document.createElement("div");n.classList.add("rendered","math");let r=Object.keys(this.inputModes).find(l=>e.classList.contains(l)),o=r?this.inputModes[r]:void 0;if(o&&o.render)o.render(i.submission,n,t);else if(o){let l=document.createElement("pre");r&&l.classList.add(r);let h=document.createElement("code");h.innerText=i.submission,l.appendChild(h),n.appendChild(l)}else n.innerText=i.submission;return n}make(e,t){let i=e.textContent;e.innerHTML="";let n=Object.keys(this.inputModes).find(o=>e.classList.contains(o)),r=n?this.inputModes[n]:void 0;if(r){if(r.name){let f=document.createElement("div");f.classList.add("help"),f.dataset.name=n;let c=document.createElement("a");c.target="_blank",c.innerHTML=r.name,r.help&&(c.href=r.help),f.appendChild(c),e.appendChild(f)}let o=document.createElement("div");o.classList.add("editor"),e.appendChild(o);let l=[vi.of(Kn),ul(),vi.of(gl),Mi,C.theme({$$focused:{outline:"none"},$scroller:{fontFamily:"JetBrains Mono",fontSize:"80%"},$gutters:{color:"#237893",backgroundColor:"#fff"}})];if(r.language&&l.push(r.language),r.render){let f,c=function(p){f&&window.clearTimeout(f),f=void 0;let m=d.innerHTML;try{p.trim().length>0?u(p,d,t):d.innerHTML="",d.classList.remove("error"),o.classList.remove("error")}catch(y){console.warn(y),d.innerHTML=m;let k=function(){o.classList.add("error"),d.innerHTML=y.message,d.classList.add("error")};d.classList.contains("error")?k():f=window.setTimeout(k,1e3)}},u=r.render;e.classList.add("rendered");let d=document.createElement("div");d.classList.add("rendered"),e.appendChild(d),o.addEventListener("transitionend",function(){e.classList.contains("editing")&&a.focus()}),e.addEventListener("click",function(){e.classList.add("editing")}),l.push(C.domEventHandlers({focus:p=>e.classList.add("editing"),blur:p=>e.classList.remove("editing")})),l.push(ne.define(p=>({update(m){m.docChanged&&c(m.state.sliceDoc())}})))}let h=M.create({doc:i||"",extensions:l}),a=new C({state:h,parent:o});return e.dispatchEvent(new Event("keyup",{})),{get:()=>a.state.sliceDoc(),set:f=>{a.state.sliceDoc()!=f&&a.dispatch({changes:[{from:0,to:a.state.doc.length,insert:f}]})}}}else{e.classList.add("default");let o=document.createElement("div");o.classList.add("rendered"),e.appendChild(o);let l=document.createElement("textarea");l.rows=1,e.appendChild(l);let h=()=>{(l.value.split(`
`).pop()||"").trim().length==0?o.innerText=l.value+".":o.innerText=l.value};return l.oninput=h,h(),{get:()=>l.value,set:a=>l.value=a}}}},ml=ts;var Xi=class extends Qe{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}toDOM(e){return null}at(e){return this.range(e)}};Xi.prototype.elementClass="";Xi.prototype.mapMode=ie.TrackBefore;var If={style:"",renderEmptyElements:!1,elementStyle:"",markers:()=>A.empty,lineMarker:()=>null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Vi=w.define();function jf(s){return[_f(),Vi.of(Object.assign(Object.assign({},If),s))]}var zf=C.baseTheme({$gutters:{display:"flex",height:"100%",boxSizing:"border-box",left:0},"$$light $gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"$$dark $gutters":{backgroundColor:"#333338",color:"#ccc"},$gutter:{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},$gutterElement:{boxSizing:"border-box"},"$gutterElement.lineNumber":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"}}),is=w.define({combine:s=>s.some(e=>e)});function _f(s){let e=[Ff,zf];return s&&s.fixed===!1&&e.push(is.of(!0)),e}var Ff=ne.fromClass(class{constructor(s){this.view=s,this.dom=document.createElement("div"),this.dom.className=ee("gutters"),this.dom.setAttribute("aria-hidden","true"),this.gutters=s.state.facet(Vi).map(e=>new ns(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(is),this.fixed&&(this.dom.style.position="sticky"),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(!this.updateGutters(s))return;let e=this.gutters.map(t=>new yl(t,this.view.viewport));this.view.viewportLines(t=>{let i;if(Array.isArray(t.type)){for(let n of t.type)if(n.type==H.Text){i=n;break}}else i=t.type==H.Text?t:void 0;if(!!i)for(let n of e)n.line(this.view,i)},0);for(let t of e)t.finish();this.dom.style.minHeight=this.view.contentHeight+"px",s.state.facet(is)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}updateGutters(s){let e=s.startState.facet(Vi),t=s.state.facet(Vi),i=s.docChanged||s.heightChanged||s.viewportChanged;if(e==t)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let r of t){let o=e.indexOf(r);o<0?n.push(new ns(this.view,r)):(this.gutters[o].update(s),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove();for(let r of n)this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){this.dom.remove()}},{provide:ce.scrollMargins.from(s=>s.gutters.length==0||!s.fixed?null:s.view.textDirection==E.LTR?{left:s.dom.offsetWidth}:{right:s.dom.offsetWidth})});function Ol(s){return Array.isArray(s)?s:[s]}var yl=class{constructor(e,t){this.gutter=e,this.localMarkers=[],this.i=0,this.height=0,this.cursor=A.iter(e.markers,t.from)}line(e,t){for(this.localMarkers.length&&(this.localMarkers=[]);this.cursor.value&&this.cursor.from<=t.from;)this.cursor.from==t.from&&this.localMarkers.push(this.cursor.value),this.cursor.next();let i=this.gutter.config.lineMarker(e,t,this.localMarkers);i&&this.localMarkers.unshift(i);let n=this.gutter;if(this.localMarkers.length==0&&!n.config.renderEmptyElements)return;let r=t.top-this.height;if(this.i==n.elements.length){let o=new ss(e,t.height,r,this.localMarkers,n.elementClass);n.elements.push(o),n.dom.appendChild(o.dom)}else{let o=this.localMarkers,l=n.elements[this.i];Wf(o,l.markers)&&(o=l.markers,this.localMarkers.length=0),l.update(e,t.height,r,o,n.elementClass)}this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;)e.dom.removeChild(e.elements.pop().dom)}},ns=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className=ee("gutter"+(this.config.style?"."+this.config.style:"")),this.elementClass=ee("gutterElement"+(this.config.style?"."+this.config.style:""));for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let r=e.visualLineAtHeight(n.clientY,e.contentDOM.getBoundingClientRect().top);t.domEventHandlers[i](e,r,n)&&n.preventDefault()});this.markers=Ol(t.markers(e)),t.initialSpacer&&(this.spacer=new ss(e,0,0,[t.initialSpacer(e)],this.elementClass),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Ol(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i],this.elementClass)}return this.markers!=t}},ss=class{constructor(e,t,i,n,r){this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(e,t,i,n,r)}update(e,t,i,n,r){if(this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),this.markers!=n){this.markers=n;for(let l;l=this.dom.lastChild;)l.remove();let o=r;for(let l of n){let h=l.toDOM(e);h&&this.dom.appendChild(h);let a=l.elementClass;a&&(o+=" "+a)}this.dom.className=o}}};function Wf(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}var qf=w.define(),bl=w.define({combine(s){return Ne(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let r=i[n],o=t[n];i[n]=r?(l,h,a)=>r(l,h,a)||o(l,h,a):o}return i}})}}),Ii=class extends Xi{constructor(e){super();this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function rs(s,e){return s.state.facet(bl).formatNumber(e,s.state)}var Hf=jf({style:"lineNumber",markers(s){return s.state.facet(qf)},lineMarker(s,e,t){return t.length?null:new Ii(rs(s,s.state.doc.lineAt(e.from).number))},initialSpacer(s){return new Ii(rs(s,xl(s.state.doc.lines)))},updateSpacer(s,e){let t=rs(e.view,xl(e.view.state.doc.lines));return t==s.number?s:new Ii(t)}});function kl(s={}){return[bl.of(s),Hf]}function xl(s){let e=9;for(;e<s;)e=e*10+9;return e}var Jt=class{constructor(e,t,i,n,r,o,l,h,a){this.cx=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=h,this.parent=a}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){return new Jt(e,[],t,i,i,0,[],0,null)}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:n}=this.cx,r=n.dynamicPrecedence(i);if(r&&(this.score+=r),t==0){i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.pushState(n.getGoto(this.state,i,!0),this.reducePos);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),l=this.stack[o-2],h=this.stack[o-1],a=this.bufferBase+this.buffer.length-h;if(i<n.minRepeatTerm||e&131072){let f=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,f,a+4,!0)}if(e&262144)this.state=this.stack[o];else{let f=this.stack[o-3];this.state=n.getGoto(f,i,!0)}for(;this.stack.length>o;)this.stack.pop()}storeNode(e,t,i,n=4,r=!1){if(e==0){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let n=this.pos,r=e,{parser:o}=this.cx;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),t<=o.maxNode&&this.buffer.push(t,n,i,4)}else t<=this.cx.parser.maxNode&&this.buffer.push(t,this.pos,i,4),this.pos=i}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.cx.reused.length-1;(i<0||this.cx.reused[i]!=e)&&(this.cx.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1)}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Jt(this.cx,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,e)}recoverByDelete(e,t){let i=e<=this.cx.parser.maxNode;i&&this.storeNode(e,this.pos,t),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=200}canShift(e){for(let t=new wl(this);;){let i=this.cx.parser.stateSlot(t.top,4)||this.cx.parser.hasAction(t.top,e);if((i&65536)==0)return!0;if(i==0)return!1;t.reduce(i)}}get ruleStart(){for(let e=this.state,t=this.stack.length;;){let i=this.cx.parser.stateSlot(e,5);if(!(i&65536))return 0;if(t-=3*(i>>19),(i&65535)<this.cx.parser.minRepeatTerm)return this.stack[t+1];e=this.stack[t]}}startOf(e,t){let i=this.state,n=this.stack.length,{parser:r}=this.cx;for(;;){let o=r.stateSlot(i,5),l=o>>19,h=o&65535;if(e.indexOf(h)>-1){let a=n-3*(o>>19),f=this.stack[a+1];if(t==null||t>f)return f}if(n==0)return null;l==0?(n-=3,i=this.stack[n]):(n-=3*(l-1),i=r.getGoto(this.stack[n-3],h,!0))}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.cx.parser.nextStates(this.state);if(t.length>4||this.stack.length>=120){let n=t.filter(r=>r!=this.state&&this.cx.parser.hasAction(r,e));if(this.stack.length<120)for(let r=0;n.length<4&&r<t.length;r++)n.indexOf(t[r])<0&&n.push(t[r]);t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n++){if(t[n]==this.state)continue;let r=this.split();r.storeNode(0,r.pos,r.pos,4,!0),r.pushState(t[n],this.pos),r.score-=200,i.push(r)}return i}forceReduce(){let e=this.cx.parser.stateSlot(this.state,5);return(e&65536)==0?!1:(this.cx.parser.validAction(this.state,e)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100),this.reduce(e),!0)}forceAll(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.cx;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.cx.parser}dialectEnabled(e){return this.cx.parser.dialect.flags[e]}},vl;(function(s){s[s.Token=200]="Token",s[s.Reduce=100]="Reduce",s[s.MaxNext=4]="MaxNext",s[s.MaxInsertStackDepth=300]="MaxInsertStackDepth",s[s.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(vl||(vl={}));var wl=class{constructor(e){this.stack=e,this.top=e.state,this.rest=e.stack,this.offset=this.rest.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=(i-1)*3;let n=this.stack.cx.parser.getGoto(this.rest[this.offset-3],t,!0);this.top=n}},ei=class{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e){return new ei(e,e.bufferBase+e.buffer.length,e.buffer.length)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ei(this.stack,this.pos,this.index)}},os=class{constructor(){this.start=-1,this.value=-1,this.end=-1}accept(e,t){this.value=e,this.end=t}},Dt=class{constructor(e,t){this.data=e,this.id=t}token(e,t,i){Uf(this.data,e,t,i,this.id)}};Dt.prototype.contextual=Dt.prototype.fallback=Dt.prototype.extend=!1;function Uf(s,e,t,i,n){let r=0,o=1<<n,l=i.cx.parser.dialect;e:for(let h=t.start;(o&s[r])!=0;){let a=s[r+1];for(let c=r+3;c<a;c+=2)if((s[c+1]&o)>0){let u=s[c];if(l.allows(u)&&(t.value==-1||t.value==u||i.cx.parser.overrides(u,t.value))){t.accept(u,h);break}}let f=e.get(h++);for(let c=0,u=s[r+2];c<u;){let d=c+u>>1,p=a+d+(d<<1),m=s[p],y=s[p+1];if(f<m)u=d;else if(f>=y)c=d+1;else{r=s[p+2];continue e}}break}}function ti(s,e=Uint16Array){if(typeof s!="string")return s;let t=null;for(let i=0,n=0;i<s.length;){let r=0;for(;;){let o=s.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let h=o-32;if(h>=46&&(h-=46,l=!0),r+=h,l)break;r*=46}t?t[n++]=r:t=new e(r)}return t}var ge=typeof process!="undefined"&&/\bparse\b/.test(process.env.LOG),ls=null;function Sl(s,e,t){let i=s.cursor(e);for(;;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<=e:i.from>=e)&&!i.type.isError)return t<0?i.to-1:i.from+1;if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:s.length}}var Pl=class{constructor(e){this.fragments=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Sl(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Sl(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(o==e&&o+r.length<=this.safeTo)return o==e&&o>=this.safeFrom?r:null;r instanceof Ze?(this.index[t]++,this.nextStart=o+r.length):(this.index[t]++,o+r.length>=e&&(this.trees.push(r),this.start.push(o),this.index.push(0)))}}},Al=class extends os{constructor(){super(...arguments);this.extended=-1,this.mask=0}clear(e){this.start=e,this.value=this.extended=-1}},ct=new os,Cl=class{constructor(e){this.tokens=[],this.mainToken=ct,this.actions=[],this.tokens=e.tokenizers.map(t=>new Al)}getActions(e,t){let i=0,n=null,{parser:r}=e.cx,{tokenizers:o}=r,l=r.stateSlot(e.state,3);for(let h=0;h<o.length;h++){if((1<<h&l)==0)continue;let a=o[h],f=this.tokens[h];if(!(n&&!a.fallback)&&((a.contextual||f.start!=e.pos||f.mask!=l)&&(this.updateCachedToken(f,a,e,t),f.mask=l),f.value!=0)){let c=i;if(f.extended>-1&&(i=this.addActions(e,f.extended,f.end,i)),i=this.addActions(e,f.value,f.end,i),!a.extend&&(n=f,i>c))break}}for(;this.actions.length>i;)this.actions.pop();return n||(n=ct,n.start=e.pos,e.pos==t.length?n.accept(e.cx.parser.eofTerm,e.pos):n.accept(0,e.pos+1)),this.mainToken=n,this.actions}updateCachedToken(e,t,i,n){if(e.clear(i.pos),t.token(n,e,i),e.value>-1){let{parser:r}=i.cx;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let l=r.specializers[o](n.read(e.start,e.end),i);if(l>=0&&i.cx.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else i.pos==n.length?e.accept(i.cx.parser.eofTerm,i.pos):e.accept(0,i.pos+1)}putAction(e,t,i,n){for(let r=0;r<n;r+=3)if(this.actions[r]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:r}=e,{parser:o}=e.cx,{data:l}=o;for(let h=0;h<2;h++)for(let a=o.stateSlot(r,h?2:1);;a+=3){if(l[a]==65535)if(l[a+1]==1)a=Fe(l,a+2);else{n==0&&l[a+1]==2&&(n=this.putAction(Fe(l,a+1),t,i,n));break}l[a]==t&&(n=this.putAction(Fe(l,a+1),t,i,n))}return n}},Tl;(function(s){s[s.Distance=5]="Distance",s[s.MaxRemainingPerStep=3]="MaxRemainingPerStep",s[s.MinBufferLengthPrune=200]="MinBufferLengthPrune",s[s.ForceReduceLimit=10]="ForceReduceLimit"})(Tl||(Tl={}));var hs=class{constructor(e,t,i,n){this.parser=e,this.input=t,this.startPos=i,this.context=n,this.pos=0,this.recovering=0,this.nextStackID=9812,this.nested=null,this.nestEnd=0,this.nestWrap=null,this.reused=[],this.tokens=new Cl(e),this.topTerm=e.top[1],this.stacks=[Jt.start(this,e.top[0],this.startPos)];let r=n==null?void 0:n.fragments;this.fragments=r&&r.length?new Pl(r):null}advance(){if(this.nested){let l=this.nested.advance();return this.pos=this.nested.pos,l&&(this.finishNested(this.stacks[0],l),this.nested=null),null}let e=this.stacks,t=this.pos,i=this.stacks=[],n,r,o;for(let l=0;l<e.length;l++){let h=e[l],a;for(;;){if(h.pos>t)i.push(h);else if(a=this.checkNest(h))(!o||o.stack.score<h.score)&&(o=a);else{if(this.advanceStack(h,i,e))continue;{n||(n=[],r=[]),n.push(h);let f=this.tokens.mainToken;r.push(f.value,f.end)}}break}}if(o)return this.startNested(o),null;if(!i.length){let l=n&&Gf(n);if(l)return this.stackToTree(l);if(this.parser.strict)throw ge&&n&&console.log("Stuck with token "+this.parser.getName(this.tokens.mainToken.value)),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let l=this.runRecovery(n,r,i);if(l)return this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((h,a)=>a.score-h.score);i.length>l;)i.pop();i.some(h=>h.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let h=i[l];for(let a=l+1;a<i.length;a++){let f=i[a];if(h.sameState(f)||h.buffer.length>200&&f.buffer.length>200)if((h.score-f.score||h.buffer.length-f.buffer.length)>0)i.splice(a--,1);else{i.splice(l--,1);continue e}}}}this.pos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.pos&&(this.pos=i[l].pos);return null}advanceStack(e,t,i){let n=e.pos,{input:r,parser:o}=this,l=ge?this.stackID(e)+" -> ":"";if(this.fragments)for(let f=this.fragments.nodeAt(n);f;){let c=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(e.state,f.type.id):-1;if(c>-1&&f.length)return e.useNode(f,c),ge&&console.log(l+this.stackID(e)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof j)||f.children.length==0||f.positions[0]>0)break;let u=f.children[0];if(u instanceof j)f=u;else break}let h=o.stateSlot(e.state,4);if(h>0)return e.reduce(h),ge&&console.log(l+this.stackID(e)+` (via always-reduce ${o.getName(h&65535)})`),!0;let a=this.tokens.getActions(e,r);for(let f=0;f<a.length;){let c=a[f++],u=a[f++],d=a[f++],p=f==a.length||!i,m=p?e:e.split();if(m.apply(c,u,d),ge&&console.log(l+this.stackID(m)+` (via ${(c&65536)==0?"shift":`reduce of ${o.getName(c&65535)}`} for ${o.getName(u)} @ ${n}${m==e?"":", split"})`),p)return!0;m.pos>n?t.push(m):i.push(m)}return!1}advanceFully(e,t){let i=e.pos;for(;;){let n=this.checkNest(e);if(n)return n;if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Ml(e,t),!0}}runRecovery(e,t,i){let n=null,r=!1,o;for(let l=0;l<e.length;l++){let h=e[l],a=t[l<<1],f=t[(l<<1)+1],c=ge?this.stackID(h)+" -> ":"";if(h.deadEnd){if(r)continue;r=!0,h.restart(),ge&&console.log(c+this.stackID(h)+" (restarted)");let p=this.advanceFully(h,i);if(p){p!==!0&&(o=p);continue}}let u=h.split(),d=c;for(let p=0;u.forceReduce()&&p<10;p++){ge&&console.log(d+this.stackID(u)+" (via force-reduce)");let m=this.advanceFully(u,i);if(m){m!==!0&&(o=m);break}ge&&(d=this.stackID(u)+" -> ")}for(let p of h.recoverByInsert(a))ge&&console.log(c+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,i);this.input.length>h.pos?(f==h.pos&&(f++,a=0),h.recoverByDelete(a,f),ge&&console.log(c+this.stackID(h)+` (via recover-delete ${this.parser.getName(a)})`),Ml(h,i)):(!n||n.score<h.score)&&(n=h)}if(n)return n;if(o){for(let l of this.stacks)if(l.score>o.stack.score){o=void 0;break}}return o&&this.startNested(o),null}forceFinish(){let e=this.stacks[0].split();return this.nested&&this.finishNested(e,this.nested.forceFinish()),this.stackToTree(e.forceAll())}stackToTree(e,t=e.pos){return j.build({buffer:ei.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.startPos,length:t-this.startPos,minRepeatType:this.parser.minRepeatTerm})}checkNest(e){let t=this.parser.findNested(e.state);if(!t)return null;let i=t.value;return typeof i=="function"&&(i=i(this.input,e)),i?{stack:e,info:t,spec:i}:null}startNested(e){let{stack:t,info:i,spec:n}=e;this.stacks=[t],this.nestEnd=this.scanForNestEnd(t,i.end,n.filterEnd),this.nestWrap=typeof n.wrapType=="number"?this.parser.nodeSet.types[n.wrapType]:n.wrapType||null,n.startParse?this.nested=n.startParse(this.input.clip(this.nestEnd),t.pos,this.context):this.finishNested(t)}scanForNestEnd(e,t,i){for(let n=e.pos;n<this.input.length;n++)if(ct.start=n,ct.value=-1,t.token(this.input,ct,e),ct.value>-1&&(!i||i(this.input.read(n,ct.end))))return n;return this.input.length}finishNested(e,t){this.nestWrap?t=new j(this.nestWrap,t?[t]:[],t?[0]:[],this.nestEnd-e.pos):t||(t=new j(G.none,[],[],this.nestEnd-e.pos));let i=this.parser.findNested(e.state);e.useNode(t,this.parser.getGoto(e.state,i.placeholder,!0)),ge&&console.log(this.stackID(e)+" (via unnest)")}stackID(e){let t=(ls||(ls=new WeakMap)).get(e);return t||ls.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}};function Ml(s,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==s.pos&&i.sameState(s)){e[t].score<s.score&&(e[t]=s);return}}e.push(s)}var Dl=class{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}},Et=class{constructor(e){if(this.bufferLength=ni,this.strict=!1,this.nextStateCache=[],this.cachedDialect=null,e.version!=13)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${13})`);let t=ti(e.tokenData),i=e.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let l=0;l<e.repeatNodeCount;l++)i.push("");let n=[];for(let l=0;l<i.length;l++)n.push([]);function r(l,h,a){n[l].push([h,h.deserialize(String(a))])}if(e.nodeProps)for(let l of e.nodeProps){let h=l[0];for(let a=1;a<l.length;){let f=l[a++];if(f>=0)r(f,h,l[a++]);else{let c=l[a+-f];for(let u=-f;u>0;u--)r(l[a++],h,c);a++}}}if(this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let l=0;l<e.specialized.length;l++)this.specialized[l]=e.specialized[l].term,this.specializers[l]=e.specialized[l].get;this.states=ti(e.states,Uint32Array),this.data=ti(e.stateData),this.goto=ti(e.goto);let o=Object.keys(e.topRules).map(l=>e.topRules[l][1]);this.nodeSet=new ut(i.map((l,h)=>G.define({name:h>=this.minRepeatTerm?void 0:l,id:h,props:n[h],top:o.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Dt(t,l):l),this.topRules=e.topRules,this.nested=(e.nested||[]).map(([l,h,a,f])=>({name:l,value:h,end:new Dt(ti(a),0),placeholder:f})),this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1;for(let l=0,h=this.states.length/6;l<h;l++)this.nextStateCache[l]=null;this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}parse(e,t=0,i={}){typeof e=="string"&&(e=Hi(e));let n=new hs(this,e,t,i);for(;;){let r=n.advance();if(r)return r}}startParse(e,t=0,i={}){return typeof e=="string"&&(e=Hi(e)),new hs(this,e,t,i)}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let r=n[t+1];;){let o=n[r++],l=o&1,h=n[r++];if(l&&i)return h;for(let a=r+(o>>1);r<a;r++)if(n[r]==e)return h;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let r=this.stateSlot(e,n?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=Fe(i,r+2)];else{if(i[r+1]==2)return Fe(i,r+2);break}if(o==t||o==0)return Fe(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}findNested(e){let t=this.stateSlot(e,0);return t&4?this.nested[t>>10]:null}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Fe(this.data,i+2);else return!1;if(t==Fe(this.data,i+1))return!0}}nextStates(e){let t=this.nextStateCache[e];if(t)return t;let i=[];for(let o=this.stateSlot(e,1);;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Fe(this.data,o+2);else break;(this.data[o+2]&65536>>16)==0&&i.indexOf(this.data[o+1])<0&&i.push(this.data[o+1])}let n=this.goto,r=n[0];for(let o=0;o<r;o++)for(let l=n[o+1];;){let h=n[l++],a=n[l++];for(let f=l+(h>>1);l<f;l++)n[l]==e&&i.indexOf(a)<0&&i.push(a);if(h&1)break}return this.nextStateCache[e]=i}overrides(e,t){let i=El(this.data,this.tokenPrecTable,t);return i<0||El(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(Et.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(r=>r.from==i);return n?n.to:i})),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.nested&&(t.nested=this.nested.map(i=>Object.prototype.hasOwnProperty.call(e.nested,i.name)?{name:i.name,value:e.nested[i.name],end:i.end,placeholder:i.placeholder}:i)),e.strict!=null&&(t.strict=e.strict),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get hasNested(){return this.nested.length>0}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){if(this.cachedDialect&&this.cachedDialect.source==e)return this.cachedDialect;let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let o=t.indexOf(r);o>=0&&(i[o]=!0)}let n=null;for(let r=0;r<t.length;r++)if(!i[r])for(let o=this.dialects[t[r]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return this.cachedDialect=new Dl(e,i,n)}static deserialize(e){return new Et(e)}};function Fe(s,e){return s[e]|s[e+1]<<16}function El(s,e,t){for(let i=e,n;(n=s[i])!=65535;i++)if(n==t)return i-e;return-1}function Gf(s){let e=null;for(let t of s)t.pos==t.cx.input.length&&t.cx.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t);return e}var Yf={__proto__:null,package:8,context:14,Set:23,Bag:25,Sequence:27,Collection:29,OrderedSet:31,Tuple:33,pre:48,and:56,or:58,xor:60,implies:62,self:66,true:92,false:94,null:98,invalid:102,let:106,in:108,if:118,then:120,else:122,endif:124,OclAny:127,OclInvalid:129,OclMessage:131,OclVoid:133,init:134,derive:136,inv:138,static:140,def:142,post:146,body:148,endpackage:150},$l=Et.deserialize({version:13,states:":jQ]QPOOOOQO'#ES'#ESOOQO'#Dz'#DzQ`QPOOQOQPOOOeQPO'#ExOjQPO'#EOOOQO-E7x-E7xOoQPO,5;dOOQO'#EQ'#EQO!QQPO,5;dO!`QPO,5;hOOQO'#Ca'#CaO!kQPO,5:jOjQPO1G1OO!vQPO1G0ZO!{QPO'#EyO#TQPO'#EyO#]QPO'#EyOOQO1G1O1G1OO#bQPO'#E}OOQO1G1S1G1SO#gQPO,5:lO#lQPO1G0UOOQO1G0U1G0UO#tQPO7+&jO$SQPO'#CbOOQO1G0W1G0WO$hQPO1G1RO$mQPO7+%uO$rQPO,5;eO%|QPO,5;eO&RQPO,5;eO&WQPO,5;eO&]QPO,5;eO&eQPO,5;iOOQO'#Cb'#CbOOQO7+%p7+%pOOQO<<JU<<JUO&jQPO7+&mO'gQPO<<IaO)UQPO'#CaO*bQPO'#DPO+zQPO1G1POOQO'#Cq'#CqOOQO'#Cp'#CpO,XQPO'#DROOQO'#DX'#DXOOQO'#DW'#DWOOQO'#DO'#DOOOQO'#Co'#CoOOQO'#EX'#EXOOQO'#C|'#C|O,^QPO'#DVOOQO'#DZ'#DZOOQO'#D^'#D^OOQO'#D`'#D`O,cQPO'#DbO$rQPO'#DhO$rQPO1G1PO,hQPO'#CaO-VQPO'#E{O-[QPO'#CmOOQO'#Ez'#EzO.VQPO'#EzO.[QPO1G1PO&RQPO1G1PO.pQPO1G1PO$rQPO1G1TOOQO'#Cn'#CnO.uQPO'#E]O/TQPO<<JXO/YQPO<<JXO/_QPO'#CaO0iQPO'#EVO0nQPO'#EWOOQO'#EV'#EVO0sQPO'#E[OOQO'#Ev'#EvO0xQPOAN>{O1QQPO,5:lO1VQPO,59aO$rQPO,59cO$rQPO,59cO$rQPO,59cO$rQPO,59cO1[QPO,5:PO$rQPO,59cO$rQPO,59cO$rQPO,59cOOQO7+&k7+&kO$rQPO,59mO,cQPO,59qO1aQPO,59|O2pQPO,5:SO2wQPO7+&kO3UQPO,5:lO$rQPO,59XO3ZQPO,59XO$rQPO,5;fO4TQPO7+&kO&RQPO7+&kO4iQPO7+&oO,cQPO,5:wO5PQPOAN?sO5mQPOAN?sO5rQPO,5:lO5wQPO,5:rO,cQPO,5:vO6OQPO'#EwOOQOG24gG24gO6TQPO'#CbOOQO1G/V1G/VO8pQPO'#CsO;`QPO1G.xOOQO1G.{1G.{O=wQPO1G.}O>RQPO1G.}O@iQPO1G.}O@yQPO1G.}OAZQPO1G/kOCuQPO1G.}OC|QPO1G.}OEXQPO1G.}OFqQPO'#DTOOQO'#DT'#DTOGOQPO'#DSOGWQPO1G/XOG]QPO1G/]O$rQPO1G/hO$rQPO1G/nOOQO<<JV<<JVOGbQPO'#CbOGjQPO1G.sOHaQPO1G.sOIXQPO1G1QOIoQPO<<JVOOQO<<JZ<<JZOOQO1G0c1G0cOOQOG25_G25_OJTQPOG25_OJqQPO'#CbOOQO1G0]1G0]OK{QPO1G0^OLQQPO1G0bO$rQPO,5;cOLVQPO,59_OMcQPO7+$dOMmQPO7+%VO$rQPO,59pO$rQPO,59nOOQO7+$s7+$sOOQO7+$w7+$wOMtQPO7+%SO! ^QPO7+%YO$rQPO7+$_OOQOAN?qAN?qOOQOLD*yLD*yOOQO7+%x7+%xOOQO7+%|7+%|O! eQPO1G0}O! xQPO1G.yO!$eQPO'#CaO!$uQPO'#EdOOQO<<HO<<HOO!%PQPO<<HOO!%UQPO<<HOO!%^QPO'#DgO!%hQPO'#DgO!%sQPO'#DfO!%{QPO<<HqO!&QQPO1G/[OOQO1G/Y1G/YO$rQPO<<HtO!&[QPO<<GyOOQO7+&i7+&iO$rQPO,5;OOOQOAN=jAN=jO!'RQPOAN=jO,cQPOAN=jO!'YQPO,5:ROMmQPO,5:QOOQOAN>]AN>]O!'dQPOAN>`OOQO1G0j1G0jOOQOG23UG23UO!'kQPOG23UO!'pQPOG23UOOQO1G/m1G/mOOQO1G/l1G/lOOQOG23zG23zOOQOLD(pLD(pO!'uQPOLD(pOOQO!$'L[!$'L[O!'|QPO!$'L[OOQO!)9Av!)9Av",stateData:"!(R~O!qOSPOSQOS~OSUOVTO~O!sWO~O!s[O~O!x^O!gTX!hTX!iTX!uTX~O!g`O!hbO!iaO!u_O~OhdO!kdO!ldO~OVTO!mhO!ufO~O!sjO~O!soO!xnO~O!sqO!xpO~O!irO~O!ssO~O!stO~OVTO!muO~O!g`O!hbO!iaO!ufO~O!gUX!hUX!iUX!uUX!xWX!|!jX~O!|wO~O!xxO~OZ!TO[!TO]!TO^!TO_!TO`!VOq!UO|!QO!O!WO!P!WO!R!XO!T!YO!V!ZO!]![O!syO#X!PO#e!PO#f!PO~O!x!]O~O!s!^O~O!x!dO~O!s!eO!x!dO~O!x!fO~O!s!gO!}!iO~OZ!TO[!TO]!TO^!TO_!TO`!oO!a!pO!b!pO!c!pO!d!pO!s!kO~O!e!yP!f!yP~P&rOlpXmpXnpXopX!uTX#QpX#RpX#SpX#XpX#YpX#ZpX#[pX#]pX#^pX#_pX#`pX#apX#gpX#hpX#UpX!}pX~OVpX!gpX!hpX!ipX!opX!^pXhpX!kpX!lpX#cpX#dpX!mpX!WpX!_pX!epX!fpX!`pX#VpX~P'qO!u!rO~Ol!yOm!zOn!zOo!{O!g`O!hbO!iaO#Q!wO#R!sO#S!sO#X!tO#Y!tO#Z!uO#[!uO#]!vO#^!vO#_!vO#`!vO#a!wO#g!xO#h!xO~OV#mi!o#mi!m#mi~P*gO#b!}O~O#b#OO~O!s!gO~OVbX!gbX!hbX!ibX!obX!uTX!xbX#QbX!mbX~O!u#SO~O!x#UO#Q#TOVaX!gaX!haX!iaX!oaX!}aX#UaX!WaX#daX!maX#VaX~O#Q#VO~O!g`O!hbO!iaOV#mi!o#mi!m#mi~O!x#XO~O#U#ZO!}#PX!W#PX#d#PX~O!x#[O~O!}#]O~O!eYX!fYX!uTXVYX!gYX!hYX!iYX!oYX#QYX!}YX#UYXhYX!kYX!lYX!WYX#dYX!mYX#VYX~O!u#^O~O!|#_O~O!|#`O~O!e#aO!f#aO~O!s#cO~O!s#eO~O!s#lO~O!W#uO~Ol!yOm!zOn!zOo!{O#Q!wO#R!sO#S!sO#X!tO#Y!tO#Z!uO#[!uO#]!vO#^!vO#_!vO#`!vO#a!wO#g!xO#h!xO~O!^#vO~P1fOV#mq!o#mq!m#mq~P*gO!s#xO~OV!yP!g!yP!h!yP!i!yP!o!yP#Q!yP!}!yP#U!yP!W!yP#d!yP!m!yP#V!yP~P&rO!g`O!hbO!iaOV#mq!o#mq!m#mq~OhdO!kdO!ldOV#qq!o#qq!m#qq~P1fOh!yPh#o!R!k!yP!k#o!R!l!yP!l#o!R#Q!yP#Q#o!R~P&rO!x$QO~O!s$RO~O!}!yP~P&rO!x$VO~OVtXltXmtXntXotX!gtX!htX!itX!otX!uUX#QtX#RtX#StX#XtX#YtX#ZtX#[tX#]tX#^tX#_tX#`tX#atX#gtX#htX!^tXhtX!ktX!ltX#UtX#ctX#dtX!mtX!}tX!WtX!_tX!etX!ftX!`tX#VtX~O#T$WOVjXljXmjXnjXojX!gjX!hjX!ijX!ojX!|gX#QjX#RjX#SjX#XjX#YjX#ZjX#[jX#]jX#^jX#_jX#`jX#ajX#gjX#hjX!^jXhjX!kjX!ljX#UjX#cjX#djX!mjX!}jX!WjX!_jX!ejX!fjX!`jX#VjX~O!|$XO~O#R!sO#S!sOVkilkimkinkioki!gki!hki!iki!oki#Qki#Zki#[ki#]ki#^ki#_ki#`ki#aki#gki#hki!^kihki!kki!lki#Uki#cki#dki!mki!}ki!Wki!_ki!eki!fki!`ki#Vki~O#Xki#Yki~P;eO#X!tO#Y!tO~P;eO#R!sO#S!sO#X!tO#Y!tO#Z!uO#[!uOVkilkimkinkioki!gki!hki!iki!oki#Qki#aki#gki#hki!^kihki!kki!lki#Uki#cki#dki!mki!}ki!Wki!_ki!eki!fki!`ki#Vki~O#]ki#^ki#_ki#`ki~P>]O#]!vO#^!vO#_!vO#`!vO~P>]O!|$YO~O#Q!wO#R!sO#S!sO#X!tO#Y!tO#Z!uO#[!uO#]!vO#^!vO#_!vO#`!vO#a!wOVkimkinkioki!gki!hki!iki!oki#gki#hki!^kihki!kki!lki#Uki#cki#dki!mki!}ki!Wki!_ki!eki!fki!`ki#Vki~Olki~PA`Ol!yO~PA`Ol!yOm!zOn!zOo!{O#Q!wO#R!sO#S!sO#X!tO#Y!tO#Z!uO#[!uO#]!vO#^!vO#_!vO#`!vO#a!wO~OVki!gki!hki!iki!oki#gki#hki!^kihki!kki!lki#Uki#cki#dki!mki!}ki!Wki!_ki!eki!fki!`ki#Vki~PDTO#c$ZO#UwX#dwX~P1fO#U$[O#dvX~O#d$]O~O#d$^O~O!uUX!|!jX~OVai!gai!hai!iai!oai!}ai#Uai!Wai#dai!mai#Vai~P1fO#Q$aOVai!gai!hai!iai!oai!}ai#Uai!Wai#dai!mai#Vai~OV#ni!g#ni!h#ni!i#ni!o#ni!m#ni~P1fO!g`O!hbO!iaOV#my!o#my!m#my~Oh!yPh#o!Z!k!yP!k#o!Z!l!yP!l#o!Z#Q!yP#Q#o!Z~P&rO!eXX!fXX!uUXVXX!gXX!hXX!iXX!oXX#QXX!}XX#UXXhXX!kXX!lXX!WXX#dXX!mXX#VXX~O!}$dO~O!}$eO~Oh$gO~OZ!TO[!TO]!TO^!TO_!TO`!VOq!UO|!QO!O!WO!P!WO!R!XO!T!YO!V!ZO!]![O#X!PO#e!PO#f!PO~O!s$hO!}$jO~PL[O#i$nO~P$rOV!Uq!g!Uq!h!Uq!i!Uq!o!Uq#g!Uq#h!Uq!^!Uqh!Uq!k!Uq!l!Uq#U!Uq#c!Uq#d!Uq!m!Uq!}!Uq!W!Uq!_!Uq!e!Uq!f!Uq!`!Uq#V!Uq~PDTO!_$sO~P1fO!e#aO!f#aOV#ki!o#ki!m#ki~P1fOVjiljimjinjioji!gji!hji!iji!oji!|gi#Qji#Rji#Sji#Xji#Yji#Zji#[ji#]ji#^ji#_ji#`ji#aji#gji#hji!^jihji!kji!lji#Uji#cji#dji!mji!}ji!Wji!_ji!eji!fji!`ji#Vji~O!xbX#QbX#UbX#VbX~P'qO#U$vO!}#WX~P1fO!}$wO~O#U$yO#V$xO~O!}!ZX#U!ZX~P1fO!x$zO!}!ZX#U!ZX~O#U${O!}!YX~O!}$|O~O#Uxi#dxi~P1fOVay!gay!hay!iay!oay!}ay#Uay!Way#day!may#Vay~P1fO!}%PO~P$rO!}!yP#U!yP~P&rO!`%UO~P1fO!}%VO~O#V%WO~O!}%XO~P$rO!}%ZO~O",goto:"/p#rPPPPP#s$nP$u$x${PPPPPP%T%g%s'^'{(j)XP(j)['^PPPP'^P'^)_)|)_*P*V*Z)_)_*_P*_PP*_P*_P'^PP'^*|+S'^PPPPPPPPPPPPP+WPPP+[PPP+fP+iP,n,tP,z${-^PP${.TPPPPPP.dPPPPPPPPPPPPPPPPP${.p,t.v/X/b,t/j!qXTU^npx![!]!d!f!t!u!v!w!y!z!{!}#T#U#V#X#[#_#u#v$Q$V$X$Y$Z$[$a$s$v$x$z${%WZk_f!r#S#^Rm_R$S#^]!nx#U#[#_$Q$zU!ap!d#XY!hw!Z#O#Z#`Q$l$XR%R$ye!`pw!Z!d#O#X#Z#`$X$yQ{nQ#Q![Q#R!]Q#Y!fQ#h!tQ#i!uQ#j!vQ#k!wQ#m!yQ#n!zQ#o!{S#p!}$[Q#y#TQ#{#VQ$_#uQ$`#vQ$f$VW$i$X$v$x%WS$m$Y${Q$q$ZQ$t$aR$}$s!X!Sn![!]!f!t!u!v!w!y!z!{!}#T#V#u#v$V$X$Y$Z$[$a$s$v$x${%W!X}n![!]!f!t!u!v!w!y!z!{!}#T#V#u#v$V$X$Y$Z$[$a$s$v$x${%W!X|n![!]!f!t!u!v!w!y!z!{!}#T#V#u#v$V$X$Y$Z$[$a$s$v$x${%WR#f!sR#g!s!X!Rn![!]!f!t!u!v!w!y!z!{!}#T#V#u#v$V$X$Y$Z$[$a$s$v$x${%WR#d!rQ#s!}R$r$[T#r!}$[T#q!}$[!X!Qn![!]!f!t!u!v!w!y!z!{!}#T#V#u#v$V$X$Y$Z$[$a$s$v$x${%WQ$p$YR%T${T$o$Y${Tl_#SQROSVRgRg]RSOQYTQ]UQi^!Wzn![!]!f!t!u!v!w!y!z!{!}#T#V#u#v$V$X$Y$Z$[$a$s$v$x${%WU!_p!d#X]!lx#U#[#_$Q$zXQOR]gXPOR]gQ!qxQ#z#UQ$P#[Q$T#_Q$c$QR%S$z!W!On![!]!f!t!u!v!w!y!z!{!}#T#V#u#v$V$X$Y$Z$[$a$s$v$x${%W]!mx#U#[#_$Q$zQ!jwQ#P!ZQ#t#OQ$O#ZR$U#`Q$k$XQ%O$vQ%Q$xR%Y%WQ#b!qR$u$fQcYQviS!|{!cS#w#R#WR$b#|Q!cpQ#W!dR#|#XQZTV!bp!d#XQeZR#}#Y",nodeNames:"⚠ LineComment BlockComment ExpressionInOcl package Namespace Namespace context PropertyName Type Type Set Bag Sequence Collection OrderedSet Tuple VariableDeclaration VariableName OclExpression CallExp FeatureCallExp OperationCallExp MethodName pre PropertyCallExp PropertyName BinaryExp and or xor implies VariableExp self LiteralExp EnumLiteralExp EnumLiteral CollectionLiteralExp CollectionLiteralParts CollectionLiteralPart CollectionRange TupleLiteralExp PrimitiveLiteralExp NumericLiteral StringLiteral BooleanLiteralExp true false NullLiteralExp null InvalidLiteralExp invalid LetExp let in OclMessageExp OclMessageArguments OclMessageArg IfExp if then else endif OclAny OclInvalid OclMessage OclVoid init derive inv static def MethodName post body endpackage",maxTerm:125,skippedNodes:[0,1,2],repeatNodeCount:1,tokenData:"-R~RsX^#`pq#`tu$Twx$ixy%ayz%fz{%k{|%p|}%u}!O%z!O!P&g!P!Q&t!Q!R't!R![*a![!]+T!^!_+b!_!`+w!`!a+|!a!b,Z!b!c,`!c!}$T#Q#R,e#R#S$T#T#o$T#o#p,r#p#q,w#q#r,|#y#z#`$f$g#`#BY#BZ#`$IS$I_#`$I|$JO#`$JT$JU#`$KV$KW#`&FU&FV#`~#eY!q~X^#`pq#`#y#z#`$f$g#`#BY#BZ#`$IS$I_#`$I|$JO#`$JT$JU#`$KV$KW#`&FU&FV#`~$YT!s~tu$T!Q![$T!c!}$T#R#S$T#T#o$T~$lUOY$iZw$iwx%Ox#O$i#O#P%T#P~$i~%TO|~~%WROY$iYZ$iZ~$i~%fO!|~~%kO!}~~%pO#X~~%uO#Z~~%zO#U~~&PQ#[~}!O&V!`!a&b~&[QP~OY&VZ~&V~&gO#R~~&lP#S~!O!P&o~&tO#c~~&yP#Y~z{&|~'PSOz&|z{']{!P&|!Q~&|~'`TOz&|z{']{!P&|!P!Q'o!Q~&|~'tOQ~~'yR#e~!O!P(S!g!h)g#X#Y)g~(VP!Q![(Y~(_R#f~!Q![(Y!g!h(h#X#Y(h~(kS{|(w}!O(w!Q!R)Q!R![)V~(zQ!Q!R)Q!R![)V~)VO#f~~)[P#f~!Q![)_~)dP#f~!Q![)_~)jS{|)v}!O)v!Q!R)Q!R![*P~)yQ!Q!R)Q!R![*P~*UP#f~!Q![*X~*^P#f~!Q![*X~*fS#e~!O!P(S!Q![*r!g!h)g#X#Y)g~*wS#e~!O!P(S!Q![*r!g!h)g#X#Y)g~+YP!x~![!]+]~+bO!u~~+gQ#]~!_!`+m!`!a+r~+rO#_~~+wO#a~~+|O#Q~~,RP#^~!_!`,U~,ZO#`~~,`O#i~~,eO#T~~,jP#g~#Q#R,m~,rO#h~~,wO#b~~,|O#V~~-RO#d~",tokenizers:[0],topRules:{ExpressionInOcl:[0,3]},specialized:[{term:81,get:s=>Yf[s]||-1}],tokenPrec:0});var Ll=Ct.define({parser:$l.configure({props:[Po({self:g.self,"if then else endif":g.controlKeyword,"package endpackage":g.keyword,"true false null invalid let in context inv pre post init derive":g.keyword,"and or implies xor":g.keyword,"Set Bag Sequence Collection OrderedSet Tuple":g.typeName,"OclAny OclInvalid OclMessage OclVoid":g.typeName,"Boolean Integer Real String UnlimitedNatural":g.typeName,PreMarker:g.special(g.keyword),Type:g.typeName,SimpleName:g.keyword,BlockComment:g.blockComment,StringLiteral:g.string,NumericLiteral:g.number,LineComment:g.lineComment,EnumLiteral:g.literal,MethodName:g.function(g.variableName),PropertyName:g.propertyName,Namespace:g.namespace,VariableName:g.definition(g.variableName),"( )":g.paren,"^ ^^":g.operatorKeyword})]}),languageData:{}});var as=class{constructor(){this.language=[kl(),Ll]}},Rl=as;var Kf={lang:"en",sheet:1,date:"15.12.2020",due:"Nie",author:[]},fs=new Eo(document.querySelector("form.ublatt"),Kf);window.ublatt=fs;var Bl=new ml;fs.registerModule("input",Bl);var Zf=new Rl;Bl.registerModule("ocl",Zf);fs.init();

</script><style >
@import"https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css";@import"https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap";@import"https://fonts.cdnfonts.com/css/tex-gyre-pagella";.input{display:block;position:relative}.input.default>.rendered{visibility:hidden}.input.default>textarea,.input.default>.rendered{resize:none;overflow:hidden;width:calc(100% - 4rem);font-family:"TeX Gyre Pagella";display:block;padding:1rem 2rem;border:.05rem solid #ddd;transition:border-color .3s ease}.input.default>textarea{position:absolute;top:0;left:0;right:0;height:calc(100% - 2rem)}.input.default>textarea:focus,.input.default>textarea:hover{outline:none;border:.05rem solid #000}.input.rendered>.rendered{grid-column:1/3;grid-row:1;border:.05rem solid #ddd;transition:border-color .3s ease;flex-grow:1;padding:1rem;align-self:center;text-align:center}.input.markdown.rendered>:not(:empty).rendered{text-align:left}.input.markdown.rendered>.rendered>:first-child{margin-top:0}.input.markdown.rendered>.rendered>:last-child{margin-bottom:0}.input:not(.rendered)>.editor{overflow:hidden;border:1px solid #ddd;border-radius:.25rem}.input.rendered>.editor{position:absolute;top:100%;left:0;right:0;grid-column:1 / 3;grid-row:2;border-left:.05rem solid #000;border-bottom:.05rem solid #000;border-right:.05rem solid #000;opacity:0;transform-origin:50% 0;transform:scaleY(0);transition:transform .3s ease,opacity .3s ease;pointer-events:none;z-index:10000;min-height:1rem;max-height:200px}.input>.help{position:absolute;top:1rem;right:-2rem;z-index:1000}@media only print{.input>.help{display:none}}.input>.help:not(:hover):before{font-family:"icons";font-size:1rem;content:"ⓘ"}.input>.help:hover::before{content:"Syntax:"}.input>.help>a{display:none}.input>.help:hover{background:rgba(255,255,255,.8);border:1px solid #ccc;padding:1rem}.input>.help:hover>a{display:block}.input.editing .editor{grid-row:2;opacity:.9;transform:scaleY(1);pointer-events:unset}.input.rendered>.rendered:hover,.input.editing>.rendered{border:.05rem solid #000}.input.rendered.editing>.rendered{border-bottom:none}.input.rendered .rendered:empty::before{width:100%;text-align:center;font-family:"TeX Gyre Pagella";content:"Hier klicken um die Antwort zu bearbeiten";color:#999}.input .rendered.error{font-family:"JetBrains Mono";color:#f44336}.input>.editor .keyword{font-weight:bold}@font-face{font-family:"icons";src:url(data:font/woff;base64,d09GRgABAAAAAA0EAAsAAAAADLgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgkxINAmNtYXAAAAFoAAABQAAAAUB2Jdu5Z2FzcAAAAqgAAAAIAAAACAAAABBnbHlmAAACsAAAB+QAAAfklwCjk2hlYWQAAAqUAAAANgAAADYbZVRsaGhlYQAACswAAAAkAAAAJAeCA9FobXR4AAAK8AAAAEAAAABANgAGMWxvY2EAAAswAAAAIgAAACIO6gzMbWF4cAAAC1QAAAAgAAAAIAAYAFtuYW1lAAALdAAAAW4AAAFu0YJtmXBvc3QAAAzkAAAAIAAAACAAAwAAAAMD2QGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAAQAAhAAAAAAAAAAAAAAAAAAAQAAA//8DwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAABgAAAAMAAAA0AAAABAAAAJQAAQADAAAANAABAAQAAACUAAMAAQAAADQAAwAKAAAAlAAEAGAAAAAUABAAAwAEAAEAICTYJwInCScUJxcnlv/9//8AAAAAACAk2CcCJwknFCcXJ5X//f//AAH/49ss2QPY/djz2PHYdAADAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAACsAAAAAAAAAA0AAAAAAAAAAQAAAAEAAAAgAAAAIAAAAAMAACTYAAAk2AAAAAQAACcCAAAnAgAAAAUAACcJAAAnCQAAAAYAACcUAAAnFAAAAAcAACcXAAAnFwAAAAgAACeVAAAnlgAAAAkAAfSsAAH0rAAAAAsAAfS+AAH0vgAAAAwAAfTCAAH0wgAAAA0AAfWLAAH1iwAAAA4AAfXRAAH10QAAAA8AAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAADAGAAIAOgA2AAGwA+AEoAAAEiBw4BBwYVFBceARcWMzI3PgE3NjU0Jy4BJyYDDgEjLgE/ATYmJyYGDwEmNjU+ATMeAQ8BBhYXFjY/ARYGFQMiJjU0NjMyFhUUBgIAVkxMcSAhISBxTExWVkxMcSAhISBxTEwVFzYoGxcGRgEEBAQNBioBARdEGxkWBEYBBAQEDgYqAQIJFBwcFBQcHANgISBxTExWVkxMcSAhISBxTExWVkxMcSAh/ccjMQUiFeQFBwIBCAczBxEEJDEDIxbmAwcCAQgIMgcSBAErGhYVGhoVFhoAAAAABADgAAADIAOAACwAOABEAFAAAAEyFhUUBiMiJjU0NjcnBx4BFRQGIyImNTQ2MzIWFzcnJjYxGwEwFg8BFz4BMwUiBhUUFjMyNjU0JhMiBhUUFjMyNjU0JhMUFjMyNjU0JiMiBgKwLkJCLi5CGRVubhUZQi4uQkIuBQkFb3RHM7a2M0d0bwUJBf6gGiYmGhomJpYNExMNDRMTYyYaGiYmGhomASBUPDtVVTskPRSenhQ9JDtVVTs8VAEByKZ7ef64AUh5e6bIAQE/LyEhLy8hIS8BHRMNDhISDg0T/pMhLy8hIS8vAAAAAAQAQACBA8AC/wAEAAcACwAPAAABJwEhAQEhATcBEQUlEQElAgCC/uUDPP7kATv8hgG9lgEp/tf9qQEp/tcBZGv+sgFSASz+ilv+nQJe+/v9ogFj+wAAAAABAGAAjQOgAvMAFQAAAScmIgcBJyYiDwEGFBcBFjI3ATY0JwOgRAoaCv5nwwoaCkQJCQEeCRsJAfUJCQKvRAoK/mfECQlEChoK/uEKCgH0ChsJAAABAMoAigM2AvYAJAAAARcWFA8BBiIvAQcGIi8BJjQ/AScmND8BNjIfATc2Mh8BFhQPAQJzwwkJRQkbCsPDChoKRQkJw8MJCUUKGgrDwwoaCkUJCcMBwMMKGwlFCQnDwwkJRQkbCsPDChoKRQkJw8MJCUUKGgrDAAADAGAAIAOgA2AAGwA3AFcAACUiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBw4BBwYDIgcOAQcGFRQXHgEXFjMyNz4BNzY1NCcuAScmEyMVFAYjIiY9ASMiJjU0NjsBNTQ2MzIWHQEzMhYVFAYCAFZMTHEgISEgcUxMVlZMTHEgISEgcUxMVkI7OlcZGRkZVzo7QkI7OlcZGRkZVzo7PmATDQ4SYA4SEg5gEg4NE2ANExMgISBxTExWVkxMcSAhISBxTExWVkxMcSAhAuAZGVc6O0JCOzpXGRkZGVc6O0JCOzpXGRn+oGANExMNYBMNDRNgDRMTDWATDQ0TAAMAYAAgA6ADYAAbADcARQAAASIHDgEHBhUUFx4BFxYzMjc+ATc2NTQnLgEnJgMiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBw4BBwYTISIGFRQWMyEyNjU0JgIAVkxMcSAhISBxTExWVkxMcSAhISBxTExWQjs6VxkZGRlXOjtCQjs6VxkZGRlXOjs2/wAOEhIOAQANExMDYCEgcUxMVlZMTHEgISEgcUxMVlZMTHEgIf0gGRlXOjtCQjs6VxkZGRlXOjtCQjs6VxkZAWATDQ0TEw0NEwAABQBuAGkDkgMXACgANABAAEwAWAAAASIHDgEHBhUUFhcwBw4BBwYxMDc+ATc2Mx4BMzI3PgE3NjU0Jy4BJyYBIiY1NDYzMhYVFAYXIiY1NDYzMhYVFAYzIiY1NDYzMhYVFAYzIiY1NDYzMhYVFAYCAFNKSW0fIFpLDQweDA0mJlsmJgERJRNTSkltIB8gH21JSv7sDRMTDQ0TE3INExMNDhISdA4SEg4NExNzDhISDg0TEwMXFxhRNzY+S34pFxc2FxYODyIPDwMCFxhRNjc+PjY3URgX/rUTDQ0TEw0NEwESDg0TEw0OEhIODRMTDQ4SEg4NExMNDhIAAAAAAgDAAIADQAMAAAcAGwAAARc3FzUnFwcFJxMhESUnIyIGFREUFjMhMjY1JwH2VqBT+VGhAUg+Af4AAR9A4BomJhoCABomAgIPVqFT+AFRoG0+/uAB/wFAJhr+ABslJRviAAAAAAIAwACAA0ADAAAHABoAAAEXJzcnBycVIScTIRElJyMiBhURFBYzITI2NQHg+VGhVaFTAV4+Af4AAR9A4BomJhoCABomAaIBUaBWoVP4Pv7gAf8BQCYa/gAaJiYaAAAAAAcAOf/5A7UDdQAEAAkADgATAB4AIgAmAAATARcBJwEnARcBFycBFwEXJwEXAQM+AR8BFhQPASc3ARcHJxcHNxezAdzM/iPLAfIW/oAXAX8tF/6BFgGALBb+gRYBfxQTNRJxEhNFykX9ucGpVDRiIz8BPgHdzP4jzAFqFv6BFwGALRb+gRYBfy0X/oAWAX8BJxIBE3ATNRNFykb9r8E8VF8jYj8ABQCgACADYANAAAkADQARABUAKwAAJRQWMyEyNjUTIQUzESMDMxEjAzMRIwEjMCYrASIGMSMiBhUcATEhMDQ1NCYBADgoAUAoOED9gAGgQECAQECAQEAB0NATDYANE9AUHALAHIAoODgoAgBg/mABoP5gAaD+YAKAQEAcFBQcHBQUHAAAAQAAAAEAAIrnDu1fDzz1AAsEAAAAAADcQwf7AAAAANxDB/sAAP/5A8ADgAAAAAgAAgAAAAAAAAABAAADwP/AAAAEAAAAAAADwAABAAAAAAAAAAAAAAAAAAAAEAQAAAAAAAAAAAAAAAIAAAAEAABgBAAA4AQAAEAEAABgBAAAygQAAGAEAABgBAAAbgQAAMAEAADABAAAOQQAAKAAAAAAAAoAFAAeAJIBBgEyAVwBmAIUAn4C/AMuA14DsAPyAAAAAQAAABAAWQAHAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAUAAAABAAAAAAACAAcATgABAAAAAAADAAUAMAABAAAAAAAEAAUAYwABAAAAAAAFAAsADwABAAAAAAAGAAUAPwABAAAAAAAKABoAcgADAAEECQABAAoABQADAAEECQACAA4AVQADAAEECQADAAoANQADAAEECQAEAAoAaAADAAEECQAFABYAGgADAAEECQAGAAoARAADAAEECQAKADQAjGljb25zAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb25zAGkAYwBvAG4Ac2ljb25zAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb25zAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=) format("woff");font-weight:normal;font-style:normal;font-display:block}i{font-family:"icons"!important;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1}:root{--text-color:#000;--background:#fff;--border-color:#999;--border-width:.667rem;--highlight-color:#00f;--sheet-shadow:}body{background-color:#fff;margin:0}form.ublatt>.main>section>ol{counter-reset:list;margin:0}form.ublatt>.main>section>ol>li{list-style:none;position:relative}form.ublatt>.main>section>ol>li:before{counter-increment:list;content:"(" counter(list,lower-alpha) ") ";position:absolute;left:-1.6em}form.ublatt{font-family:"TeXGyrePagella",sans-serif;color-adjust:exact;display:block;counter-reset:figure}@media only screen and (min-width: 60rem){form.ublatt{background-color:#fff;margin:auto;max-width:55rem;box-shadow:.1rem .1rem .5rem #aaa;margin:2rem auto;counter-reset:figure;padding:2rem 3rem}}form.ublatt::before{display:block;height:3.6rem;font-family:Arial,Helvetica,sans-serif;content:"Universtität Bremen";background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB0ZXh0LXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiBpbWFnZS1yZW5kZXJpbmc9Im9wdGltaXplUXVhbGl0eSIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHZpZXdCb3g9IjAgMCAyMzg1LjY5IDQzMi4wMyI+DQogIDwhLS1wYXRoIGZpbGw9IiMxRjFBMTciIGQ9Ik01MjkuNDUgMTE3Ljg0SDU1NnY5MS42N2MwIDIwLjk0IDEuMjIgNDUuMzYgMzUuNTYgNDUuMzYgMzQuMzMgMCAzNS43MS0yNC40MiAzNS43MS00NS4zNnYtOTEuNjdoMjYuNFYyMTguNGMwIDQwLjI5LTI0LjcyIDYwLjI3LTYyLjExIDYwLjI3LTM3LjI0IDAtNjIuMTEtMTkuOTgtNjIuMTEtNjAuMjdWMTE3Ljg0ek02ODEuNzUgMTYxLjNoMjIuOXYxNi42NWwuMy40OGM3LjMzLTEyLjUzIDE5Ljg0LTIwLjMgMzQuMTktMjAuMyAyMy44IDAgMzguNzYgMTMuMzIgMzguNzYgMzguODV2NzguMDNoLTI0LjExVjIwMy41Yy0uNDYtMTcuNzctNy4xOC0yNS41NC0yMS4zNy0yNS41NC0xNi4xOCAwLTI2LjU1IDEzLjMzLTI2LjU1IDI5Ljk4VjI3NWgtMjQuMTJWMTYxLjN6TTgwNC45MSAxNjEuM2gyNC4xMlYyNzVIODA0LjlWMTYxLjN6bTAtNDMuNDZoMjQuMTJ2MjMuOEg4MDQuOXYtMjMuOHpNODQ1LjM2IDE2MS4zaDI2LjI1bDI3Ljc3IDg3LjIzaC40NmwyNi43MS04Ny4yM2gyNS4wM2wtMzkuMjMgMTEzLjcxaC0yNy4xNnpNMTAxNCAxNzcuOTVoLjc2YzE2LjMzIDAgMjYuNzEgMTQuNDMgMjcuNDcgMzAuM0gxMDE0djE2LjMzaDUyLjM0Yy4zMS0xLjQzLjMxLTIuODUuNDYtNC4yOHYtNy45M2MtMS42OC0yOS4xOC0yMS42Ny01NC4yNC01Mi4wNC01NC4yNGgtLjc2djE5Ljgyem0wIDEwMC4wOFYyNTguMmgxLjM3YzEzLjg5IDAgMjIuNDQtNi4zNCAyNi43MS0xOC44N2gyMi45Yy01LjM1IDI0LjktMjUuNjUgMzguNy00OS42IDM4LjdIMTAxNHptLTI4LjA5LTY5Ljc5Yy42Mi0xNi44IDExLjc2LTI5Ljk3IDI4LjA5LTMwLjN2LTE5LjgxYy0zMi4yLjQ3LTUyLjM1IDI4LjA3LTUyLjM1IDU5Ljk1IDAgMzQuNzMgMTguOTMgNTkuMzEgNTIuMzUgNTkuOTVWMjU4LjJjLTE5LjIzLS42My0yOC4wOS0xNi4xOC0yOC4wOS0zMy42MkgxMDE0di0xNi4zNGgtMjguMDl6TTEwODUuNzIgMTYxLjNoMjIuNTl2MjIuMDRoLjQ1YzIuNzUtMTIuMiAxNy4yNS0yNS4yMSAzMi4wNS0yNS4yMSA1LjUgMCA3LjAzLjQ3IDkuMTYuNjN2MjQuMjdjLTMuNTEtLjQ4LTcuMDItMS4xMS0xMC4zOC0xLjExLTE2LjYzIDAtMjkuNzYgMTMuOTUtMjkuNzYgMzguODV2NTQuMjRoLTI0LjExVjE2MS4zek0xMTc5LjQyIDIzOC4zOGMxLjIyIDE0LjU5IDExLjkgMTkuODIgMjQuNTcgMTkuODIgOS4xNiAwIDI1LjAzLTEuOSAyNC40Mi0xNC45LS42LTEzLjMzLTE4LjE2LTE0Ljc2LTM1Ljg2LTE5LjA0LTE3LjU1LTMuOTYtMzQuOTUtMTAuMy0zNC45NS0zMy40NiAwLTI0LjkgMjUuOC0zMi42NyA0NS42My0zMi42NyAyMi40NCAwIDQyLjczIDkuNjcgNDUuNzggMzUuMDVoLTI1LjMzYy0xLjk4LTExLjktMTEuNi0xNS4yMy0yMi4xMy0xNS4yMy03LjAyIDAtMTkuODQgMS43NC0xOS44NCAxMS43NCAwIDEyLjM3IDE3LjcgMTQuMTEgMzUuNCAxOC4yNCAxNy43MSA0LjI4IDM1LjQxIDEwLjYyIDM1LjQxIDMzLjE1IDAgMjcuMTEtMjYuMjUgMzYuOTUtNDguOTkgMzYuOTUtMjcuMzEgMC00Ny45Mi0xMi42OS00OC4zNy0zOS42NWgyNC4yNnpNMTI3Mi41MiAxNjEuM2gyNC4xMVYyNzVoLTI0LjExVjE2MS4zem0wLTQzLjQ2aDI0LjExdjIzLjhoLTI0LjExdi0yMy44ek0xMzEyLjgxIDE2MS4zaDE4LjE2di0zNC4yNmgyNC4yN3YzNC4yNmgyMS44MnYxOC43MmgtMjEuODJ2NjAuNThjMCAxMC4zLjc2IDE1LjcgMTEuNiAxNS43IDMuMzUgMCA2LjcgMCAxMC4yMi0uOTV2MTkuMzVjLTUuMzQuNDgtMTAuNTMgMS40Mi0xNS43MiAxLjQyLTI1LjE4IDAtMjkuOTEtMTAuMTQtMzAuMzctMjkuMTh2LTY2LjkyaC0xOC4xNlYxNjEuM3pNMTQ2Mi44MyAyMzYuNjNjMCAxNC43NS0xNC4yIDIwLjc4LTI0LjczIDIxLjU3djE4Ljg4YzkuOTItMS43NSAxOS44NC01Ljg3IDI2LjcxLTEyLjg1IDEuODMgMTAuMyA4Ljg2IDEzLjggMTguNjIgMTMuOCAzLjk3IDAgMTEuNi0xLjU5IDE1LjI2LTIuODZ2LTE3LjQ0Yy0yLjU5LjQ3LTQuNDIuNDctNS45NS40Ny00LjQyIDAtNS44LTIuMzgtNS44LTguNTZ2LTU4LjM2YzAtMjQuMTEtMjIuNDMtMzMuMTUtNDMuOC0zMy4xNS0xLjY4IDAtMy4zNi4xNS01LjA0LjE1djE5LjgzbDMuNTEtLjE2YzkuNzcgMCAyMi43NCAyLjU0IDIyLjc0IDE1LjM5IDAgMTIuODQtMTEuNzUgMTMuMTYtMjYuMjUgMTUuMDZ2MTUuNTRjOS4xNi0xLjI2IDE4LjQ3LTEuNzQgMjQuNzMtNi4wMnYxOC43MXptLTE1LjExLTExNy4ydjIzLjc5aDI0LjI3di0yMy44aC0yNC4yN3ptLTkuNjIgMTM4Ljc3aC0yLjQ0Yy04LjQgMC0yMi4yOC0zLjMzLTIyLjI4LTE0LjQzIDAtMTMuMzIgOS40Ny0xNy4yOSAxOS44NC0xOS4wMyAxLjUzLS4zMiAzLjItLjQ4IDQuODgtLjhWMjA4LjRjLTIuMTMuMzItNC40Mi42NC02LjcxIDEuMTEtMjAuMyAyLjM4LTQyLjEyIDYuODItNDIuMTIgMzUuMjEgMCAyMi4zNyAxNy44NSAzMy4zIDM3LjU0IDMzLjMgMy42NiAwIDcuNDgtLjMxIDExLjMtLjk0VjI1OC4yem0wLTk5LjkydjE5LjgzYy0xMS42Ljk1LTE5LjY4IDYuNjYtMjAuNiAxNy45MmgtMjQuMjZjMS42OC0yNy4yOCAyMi41OC0zNi42NCA0NC44Ni0zNy43NXptLTIuNTktMTUuMDZ2LTIzLjhoLTI0LjExdjIzLjhoMjQuMTF6TTE1MDIuOTcgMTYxLjNoMTguMTZ2LTM0LjI2aDI0LjEydjM0LjI2aDIxLjgydjE4LjcyaC0yMS44MnY2MC41OGMwIDEwLjMuOTEgMTUuNyAxMS43NSAxNS43IDMuMzYgMCA2LjcxIDAgMTAuMDctLjk1djE5LjM1Yy01LjIuNDgtMTAuMzggMS40Mi0xNS41NyAxLjQyLTI1LjMzIDAtMjkuOS0xMC4xNC0zMC4zNy0yOS4xOHYtNjYuOTJoLTE4LjE2VjE2MS4zek0xNzExLjEzIDIwMy40OWgxMC42OGMxNi4xOCAwIDI1LjQ5IDguODggMjUuNDkgMjQuMSAwIDE1Ljg2LTkuMyAyNC45LTI1LjQ5IDI0LjloLTEwLjY4djIyLjUyaDYuODdjMzkuMjIgMCA1NS44Ni0xOS4xOCA1NS44Ni00My45MyAwLTIxLjEtMTAuMDgtMzYuMTYtMjguNTQtNDAuMjh2LS40OGMxMy44OC02LjE4IDIxLjY3LTE3LjYgMjEuNjctMzMuNDYgMC0yNi4xNy0xNy44Ni0zOS4wMi00NC44Ny0zOS4wMmgtMTAuOTl2MjIuNTNoNy4xN2MxNC4zNSAwIDIyLjEzIDUuNyAyMi4xMyAyMS41NiAwIDE0LjEyLTkuNDYgMjEuNzMtMjIuMTMgMjEuNzNoLTcuMTd2MTkuODN6bS0zNi4xNyAwaDM2LjE3di0xOS44M2gtMzYuMTd2LTQzLjNoMzYuMTd2LTIyLjUyaC02Mi41N3YxNTcuMTdoNjIuNTdWMjUyLjVoLTM2LjE3di00OXpNMTc5NS4yMiAxNjEuM2gyMi41OXYyMi4wNGguNDZjMi43NC0xMi4yIDE3LjI0LTI1LjIxIDMyLjA0LTI1LjIxIDUuNSAwIDcuMDMuNDcgOS4xNi42M3YyNC4yN2MtMy41MS0uNDgtNy4wMi0xLjExLTEwLjM4LTEuMTEtMTYuNjMgMC0yOS43NiAxMy45NS0yOS43NiAzOC44NXY1NC4yNGgtMjQuMTFWMTYxLjN6TTE5MTMuOTYgMTc3Ljk1aC42YzE2LjM0IDAgMjYuNzIgMTQuNDMgMjcuNjMgMzAuM2gtMjguMjN2MTYuMzNoNTIuMzRjLjE2LTEuNDMuMzEtMi44NS4zMS00LjI4di03LjkzYy0xLjY4LTI5LjE4LTIxLjY3LTU0LjI0LTUyLjA0LTU0LjI0aC0uNjF2MTkuODJ6bTAgMTAwLjA4VjI1OC4yaDEuMjJjMTQuMDQgMCAyMi40My02LjM0IDI2LjctMTguODdoMjIuOWMtNS4zNCAyNC45LTI1LjY0IDM4LjctNDkuNiAzOC43aC0xLjIyem0tMjguMjQtNjkuNzljLjYxLTE2LjggMTEuNzUtMjkuOTcgMjguMjQtMzAuM3YtMTkuODFjLTMyLjM2LjQ3LTUyLjM1IDI4LjA3LTUyLjM1IDU5Ljk1IDAgMzQuNzMgMTguNzcgNTkuMzEgNTIuMzUgNTkuOTVWMjU4LjJjLTE5LjIzLS42My0yOC4yNC0xNi4xOC0yOC4yNC0zMy42MmgyOC4yNHYtMTYuMzRoLTI4LjI0ek0xOTg1LjUzIDE2MS4zaDIyLjl2MTUuODZoLjZjNy4zMy0xMS4yNiAxNi4zMy0xOS4wMyAzMy43My0xOS4wMyAxMy40MyAwIDI1Ljk1IDYuMDIgMzAuODMgMTkuMDMgNy45My0xMS43NCAxOC4zLTE5LjAzIDM0LjM0LTE5LjAzIDIzLjA0IDAgMzYuNjIgMTAuNjIgMzYuNjIgMzguMzh2NzguNWgtMjQuMTF2LTY2LjQ1YzAtMTguMDgtMS4wNy0zMC42MS0yMC0zMC42MS0xNi4zMiAwLTIzLjM0IDExLjI2LTIzLjM0IDMwLjQ1djY2LjYxaC0yNC4xMnYtNzIuOTVjMC0xNS43LTQuNzMtMjQuMTEtMTkuMjItMjQuMTEtMTIuNTIgMC0yMy45NiAxMC42My0yMy45NiAyOS41VjI3NWgtMjQuMjdWMTYxLjN6TTIyMTcuODEgMTc3Ljk1aC43NmMxNi4zMyAwIDI2LjcxIDE0LjQzIDI3LjQ3IDMwLjNoLTI4LjIzdjE2LjMzaDUyLjVjLjE1LTEuNDMuMTUtMi44NS4zLTQuMjh2LTcuOTNjLTEuNjgtMjkuMTgtMjEuNjctNTQuMjQtNTIuMDQtNTQuMjRoLS43NnYxOS44MnptMCAxMDAuMDhWMjU4LjJoMS4zN2MxMy44OSAwIDIyLjQ0LTYuMzQgMjYuNzEtMTguODdoMjIuOWMtNS4zNSAyNC45LTI1LjY1IDM4LjctNDkuNiAzOC43aC0xLjM4em0tMjguMDktNjkuNzljLjYyLTE2LjggMTEuNzYtMjkuOTcgMjguMDktMzAuM3YtMTkuODFjLTMyLjIuNDctNTIuMzUgMjguMDctNTIuMzUgNTkuOTUgMCAzNC43MyAxOC45MyA1OS4zMSA1Mi4zNSA1OS45NVYyNTguMmMtMTkuMjMtLjYzLTI4LjA5LTE2LjE4LTI4LjA5LTMzLjYyaDI4LjA5di0xNi4zNGgtMjguMDl6TTIyODkuNTQgMTYxLjNoMjIuODl2MTYuNjVsLjQ2LjQ4YzcuMTctMTIuNTMgMTkuNjgtMjAuMyAzNC4wMy0yMC4zIDIzLjgxIDAgMzguNzYgMTMuMzIgMzguNzYgMzguODV2NzguMDNoLTI0LjExVjIwMy41Yy0uNDYtMTcuNzctNy4xNy0yNS41NC0yMS4zNi0yNS41NC0xNi4xOCAwLTI2LjU2IDEzLjMzLTI2LjU2IDI5Ljk4VjI3NWgtMjQuMTFWMTYxLjN6Ii8tLT4NCiAgPHBhdGggZmlsbD0iI0M0MjYzQSIgZD0iTTE0OS43NCAxOTcuNjJjLS4xNSA0My4zIDM0LjM0IDc3LjIzIDc1LjU0IDc3LjIzIDQxLjY3IDAgNzUuNTUtMzMuOTMgNzUuNTUtNzcuMjNWMGgtMzcuN3YxOTcuNjJjMCAyMS41Ny0xNi45MyAzOC4wNi0zNy44NSAzOC4wNi0yMC4xNCAwLTM3Ljg0LTE3LjEzLTM3Ljg0LTM4LjA2Vjc4LjgyaC0zNy43djExOC44ek0zNi4zNSAzOS4zM1YwSDB2MzkuMzN6TTc0LjA0IDc4LjY3VjM5LjMzSDM2LjM1djM5LjM0ek0xMTEuODkgMzkuMzNWMEg3NC4wNHYzOS4zM3pNMTg3LjQ0IDM5LjMzaC0zNy43VjBoMzcuN3pNMTQ5Ljc0IDc4LjY3aC0zNy44NVYzOS4zM2gzNy44NXoiLz4NCiAgPHBhdGggZmlsbD0iI0M0MjYzQSIgZD0iTTQ1Mi4wNy4xNnYxOTcuNDZjMCAxMjkuNTctMTAxLjY0IDIzNC40LTIyNi42MyAyMzQuNC0xMTYuMSAwLTIxMi41LTkwLjY4LTIyNS40NC0yMDcuNlY3OC42N2gzNi4zNXYxMTguOTVjMCAxMDggODUgMTk1LjA4IDE4OS4wOSAxOTUuMDggMTA0LjA4IDAgMTg4Ljc4LTg3LjA4IDE4OC43OC0xOTUuMDhWMGwzNy44NS4xNnoiLz4NCiAgPHBhdGggZmlsbD0iI0M0MjYzQSIgZD0iTTMzOC42OCAwdjE5Ny42MmMwIDY0Ljg3LTUwLjk4IDExNi41Ny0xMTMuNCAxMTYuNTctNjIuNTcgMC0xMTMuMzktNTEuNy0xMTMuMzktMTE2LjU3Vjc4LjVINzQuMDR2MTE5LjFjMCA4Ni40NCA2Ny45MiAxNTUuNzUgMTUxLjI0IDE1NS43NSA4My4zMyAwIDE1MS4xLTY5LjMgMTUxLjEtMTU1Ljc0Vi4xNkwzMzguNjggMHoiLz4NCjwvc3ZnPg0K);background-size:auto 2.7rem;background-position:1rem 1rem;background-repeat:no-repeat;border-bottom:.0667rem solid black;padding-left:4.2rem;font-size:1.4rem;padding-top:1.4rem}@media only screen and (min-width: 40rem){form.ublatt::before{background-position:3rem 1rem;padding-left:6.2rem}}form.ublatt .head{margin:1rem;display:grid;grid-template-columns:[left] min-content [left2] max-content [middle] auto [right] max-content [end];grid-template-rows:[top] min-content [title] min-content [issued] min-content [due] min-content}@media only screen and (min-width: 40rem){form.ublatt .head{margin:1rem 3rem}}form.ublatt .head .title{grid-column:left / middle;grid-row:1}form.ublatt .head .term{margin:0 1em;grid-column:middle;grid-row:1}form.ublatt .head .lecturers{grid-column:right;grid-row:1/3;padding:0;margin:0;list-style:none}form.ublatt .head .lecturers li{margin:0}form.ublatt .head .sheetnum{grid-row:2;grid-column:left / end;font-size:2.074rem;font-weight:900;margin:1rem 0 .5rem 0}form.ublatt .head .issued,form.ublatt .head .due{grid-column:left2;font-size:1.2rem;line-height:1.2}form.ublatt .head .issued{grid-row:3}form.ublatt .head .due{grid-row:4}form.ublatt .head .issued-title,form.ublatt .head .due-title{font-size:1.2rem;line-height:1.2;grid-column:left;font-weight:bold;padding-right:1em}form.ublatt .head .issued-title{grid-row:3}form.ublatt .head .due-title{grid-row:4}form.ublatt .main{margin:2rem 1rem}@media only screen and (min-width: 40rem){form.ublatt .main{margin:2rem 3rem}}.row .column:first-child{padding-right:8px}.row .column:last-child{padding-left:8px}.column{float:left;width:calc(50% - 8px)}.row:after{content:"";display:table;clear:both}.CodeMirror{height:auto;font-family:"JetBrains Mono","Fira Code","Monaco","Consolas",monospace}table{margin:auto;border-collapse:collapse}.figures,.figures>p:first-child:last-child{display:flex;flex-wrap:wrap;justify-content:center;align-items:end}figure{text-align:center;margin:1rem}figure>figcaption{margin-top:.5rem}figure>figcaption::before{counter-increment:figure;content:"Fig. " counter(figure) ": ";font-weight:bold}th{padding:.5rem 1rem;border-bottom:.1rem solid black}td{padding:.5rem 1rem;border-bottom:.1rem solid #ddd}form.ublatt>.main{counter-reset:h1}form.ublatt>.main>section>h1>.secnum{font-size:1.44rem;display:inline-block;border:.0667rem solid black;padding:.1rem .2rem 0rem .2rem;text-align:center;font-weight:normal;margin-right:.5rem}form.ublatt>.main>section>h1:first-child{font-size:1.44rem;font-weight:normal;font-style:italic}form.ublatt>.main>.points{color:#00f;font-size:1.44rem;font-weight:normal;font-style:normal;text-align:center}form.ublatt>.main>section>h1:first-child>.points{float:right;color:#00f;font-weight:normal;font-style:normal;text-align:center}.figure{text-align:center}.figure img{max-width:80%}input[type=checkbox]+label,input[type=radio]+label{padding:1rem;display:flex;flex-flow:row nowrap;align-items:center}input[type=checkbox],input[type=radio]{display:none}:hover>input[type=checkbox]+label::before,:hover>input[type=radio]+label::before{border-color:#000;background-color:rgba(0,0,0,0.031)}input[type=checkbox]+label::before,input[type=radio]+label::before{content:"✔";overflow:visible;color:transparent;margin-bottom:.1rem;font-size:1.4rem;border:.1rem solid #ccc;transition:border-color .2s ease,color .2s ease,background-color .2s ease;width:1rem;height:1rem;line-height:1rem;flex-shrink:0;text-align:center;vertical-align:middle}input[type=radio]+label::before{border-radius:50%}input[type=checkbox]:checked+label::before,input[type=radio]:checked+label::before{color:#02c}code{font-family:"JetBrains Mono"}pre{overflow-x:auto}pre>code{font-size:.8em;display:table;border-spacing:.5rem 0;border-collapse:separate;line-height:1.4;counter-reset:line-numbers}pre>code>.line{display:table-row;white-space:pre}pre.lineNumbers>code>.line::before{counter-increment:line-numbers;content:counter(line-numbers);display:table-cell;border-right:1px solid #ddd;text-align:right;padding-right:.25rem;margin-right:.25rem;color:#237893}p+pre>code{padding-top:0}.info{background-color:#eee;padding:.5em 1em .5em 3em;font-style:italic;margin-bottom:1em;position:relative}.info::before{content:"ⓘ";font-style:normal;position:absolute;top:1.5em;left:1.3em}.submit{position:relative;background-color:#eee;padding:1rem}.submit>.row{display:flex;flex-direction:column;justify-content:space-between}.submit>.row p:first-child{margin-top:0}@media only screen and (min-width: 40rem){.submit{padding:1rem 3rem}.submit>.row{flex-direction:row}.submit>.row>div:not(:first-child){padding-left:2rem}}@media only screen and (min-width: 60rem){.submit{margin:2rem -3rem -2rem -3rem;padding:1rem 6rem 2rem 6rem}}@media only print{.submit{display:none!important}}.submit::before{content:"";position:absolute;top:-.1rem;left:0;right:0;display:block;border-top:.2rem dotted #333}.submit::after{color:#333;position:absolute;font-size:2rem;top:-1.1rem;right:.5rem;content:"✂";font-family:"icons";transform:rotate(-90deg)}.buttons{display:flex;flex-flow:row;justify-content:center;gap:1rem}.submit table.authors{text-align:left;line-height:1.5rem;white-space:nowrap;min-width:20rem}.submit table.authors th,.submit table.authors td{padding:.25rem 0 .25rem .75rem}.submit table.authors th:last-child,.submit table.authors td:last-child{padding:.25rem .75rem}a{cursor:pointer}a:hover{color:#333}.submit .field{text-align:left;font-size:1rem;display:block;font-family:"TeXGyrePagella",sans-serif;width:auto}.compact>ul,.compact>ol{display:flex;flex-flow:row;justify-content:center}.compact>ul>li,.compact>ol>li{margin:0 1rem}.center{text-align:center}.icon.large>i{font-size:2rem;vertical-align:middle;margin-right:.2rem}.icon.large{display:inline-block;line-height:2rem;vertical-align:middle}.assess{font-family:"TeXGyrePagella",sans-serif;position:absolute;right:-5rem;width:4rem;top:0}.solution{position:relative;color:#00f;display:flex;flex-flow:row;flex-wrap:wrap;gap:1rem 2rem;justify-content:stretch;border:1px solid #eee}.solution>.submission{padding:1rem 2rem;flex:1}.solution.fail>.submission{color:green}.solution.warn>.submission{color:green}.solution .assess .icon{font-size:2rem;color:green}.solution .assess.fail .icon{color:red}.solution .assess.warn .icon{color:#ff8c00}.solution>.feedback{color:#00f;display:none;padding:1rem 2rem;background-color:#eef;flex:1}.solution.fail>.feedback,.solution.warn>.feedback{display:block}.solution>.submission{color:green;display:block}.solution>.submission .mute,.solution>.feedback .mute{color:gray}

</style>
</head><body >
<form class="ublatt">
<div class="head">
<ul class="lecturers">

</ul><span class="sheetnum">
1. Übungsblatt
</span><span class="issued-title">
Ausgabe: 
</span><span class="issued">
15.12.2020
</span><span class="due-title">
Abgabe: 
</span><span class="due">
Nie
</span>
</div><div class="main">
<section>
<h1>Bla</h1>
<p>Hallo</p>
<p>Ein Absatz</p>
<pre class="css lineNumbers"><code><div class="line"><span class="ͼz">body</span> {  </div><div class='line'>  <span class="ͼ12">color</span>: rgba(<span class="ͼu">0</span>,<span class="ͼu">0</span>,<span class="ͼu">0</span>) <span class="ͼt">alskhjl</span> <span class="ͼt">sakdjfh</span> <span class="ͼt">lkjahsdl</span> <span class="ͼt">fkjhasl</span> <span class="ͼt">kdfjhals</span> <span class="ͼt">kdjfh</span> <span class="ͼt">laskjdhfl</span> <span class="ͼt">askjdhfl</span> <span class="ͼt">aksjdf</span> </div><div class='line'>}</div><div class='line'><span class="ͼz">body</span> {  </div><div class='line'>  <span class="ͼ12">color</span>: rgba(<span class="ͼu">0</span>,<span class="ͼu">0</span>,<span class="ͼu">0</span>)</div><div class='line'>}</div><div class='line'><span class="ͼz">body</span> {  </div><div class='line'>  <span class="ͼ12">color</span>: rgba(<span class="ͼu">0</span>,<span class="ͼu">0</span>,<span class="ͼu">0</span>)</div><div class='line'>}</div><div class='line'><span class="ͼz">body</span> {  </div><div class='line'>  <span class="ͼ12">color</span>: rgba(<span class="ͼu">0</span>,<span class="ͼu">0</span>,<span class="ͼu">0</span>)</div><div class='line'>}</div><div class='line'><span class="ͼz">body</span> {  </div><div class='line'>  <span class="ͼ12">color</span>: rgba(<span class="ͼu">0</span>,<span class="ͼu">0</span>,<span class="ͼu">0</span>)</div><div class='line'>}</div><div class='line'><span class="ͼz">body</span> {  </div><div class='line'>  <span class="ͼ12">color</span>: rgba(<span class="ͼu">0</span>,<span class="ͼu">0</span>,<span class="ͼu">0</span>)</div><div class='line'>}</div></code></pre><div class="input ocl">
</div>
</section>

</div><div class="submit">
<h1 >
Abgabe
</h1><div class="row">
<div >
<p >
Bitte gebt alle Autoren mit Matrikelnummer und Emailaddresse an und speichert dann eure Lösung. Die gespeicherte JSON Datei sendet ihr dann an beide Tutoren per E-Mail.
</p>
</div><div >
<div class="authors">

</div>
</div>
</div><div class="buttons" id="submit-buttons">

</div>
</div>
</form>
</body>
</html>